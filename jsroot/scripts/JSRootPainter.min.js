var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(e){var k=0;return function(){return k<e.length?{done:!1,value:e[k++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,k,C){e!=Array.prototype&&e!=Object.prototype&&(e[k]=C.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(e,k){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:k})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function e(C){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(C||"")+"_"+k++,C)}var k=0;return e}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.asyncIterator;e||(e=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};
$jscomp.iteratorFromArray=function(e,k){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var C=0,E={next:function(){if(C<e.length){var D=C++;return{value:k(D,e[D]),done:!1}}E.next=function(){return{done:!0,value:void 0}};return E.next()}};E[Symbol.iterator]=function(){return E};return E};
$jscomp.polyfill=function(e,k,C,E){if(k){C=$jscomp.global;e=e.split(".");for(E=0;E<e.length-1;E++){var D=e[E];D in C||(C[D]={});C=C[D]}e=e[e.length-1];E=C[e];k=k(E);k!=E&&null!=k&&$jscomp.defineProperty(C,e,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3");
(function(e){if("function"===typeof define&&define.amd)define(["JSRootCore","d3"],e);else if("object"===typeof exports&&"undefined"!==typeof module){var k=require("./JSRootCore.js");e(k,require("d3"));k.nodejs&&k.Painter.readStyleFromURL("?interactive=0&tooltip=0&nomenu&noprogress&notouch&toolbar=0&webgl=0")}else{if("undefined"==typeof JSROOT)throw Error("JSROOT is not defined","JSRootPainter.js");if("object"!=typeof d3)throw Error("d3 is not defined","JSRootPainter.js");if("object"==typeof JSROOT.Painter)throw Error("JSROOT.Painter already defined",
"JSRootPainter.js");e(JSROOT,d3)}})(function(e,k){function C(a){this.opt=a&&"string"==typeof a?a.toUpperCase().trim():"";this.part=""}function E(a){this.palette=a}function D(a){this.x0=this.y0=0;this.color="black";this.style=1;this.size=8;this.scale=1;this.fill=this.stroke=!0;this.marker="";this.ndig=0;this.used=!0;this.changed=!1;this.func=this.Apply.bind(this);this.SetArgs(a);this.changed=!1}function G(a){this.func=this.Apply.bind(this);this.used=!0;a._typename&&void 0!==a.fLineStyle&&(a={attr:a});
this.SetArgs(a)}function F(a){this.color="none";this.pattern=this.colorindx=0;this.used=!0;this.kind=a.kind||2;this.changed=!1;this.func=this.Apply.bind(this);this.SetArgs(a);this.changed=!1}function H(a,b,c){this.path=a;this.req=this.connid=null;this.raw=b;this.args=c;this.nextrequest("","connect")}function I(a){this.receiver=a;this.protocol=[];this.cnt=0;e.NewHttpRequest("protocol.json","text",this.get_protocol.bind(this)).send()}function B(a){this.kind=a;this.state=0;this.ackn=this.cansend=10}
function w(){this.divid=null}function m(a,b){this.draw_g=this.divid=null;this.pad_name="";this.main=null;"string"==typeof b&&(this.options={original:b});this.AssignObject(a)}function J(a){e.TObjectPainter.call(this,a);this.tooltip_enabled=!0}e.sources.push("2d");"function"===typeof define&&define.amd&&e.loadScript("$$$style/JSRootPainter.css");e._test_d3_||("object"==typeof k&&k.version&&"5"===k.version[0]?("5.7.0"!==k.version&&console.log("Reuse existing d3.js "+k.version+", expected 5.7.0"),e._test_d3_=
5):"object"==typeof k&&k.version&&"4"===k.version[0]?("4.4.4"!==k.version&&console.warn("Try to use older d3.js "+k.version+", expected 5.7.0"),e._test_d3_=4):"object"==typeof k&&k.version&&"3"===k.version[0]?(console.error("Very old d3.js "+k.version+" found, please UPGRADE"),k.timeFormat=k.time.format,k.scaleTime=k.time.scale,k.scaleLog=k.scale.log,k.scaleLinear=k.scale.linear,e._test_d3_=3):console.error("Fail to identify d3.js version "+(k?k.version:"???")));e.ToolbarIcons={camera:{path:"M 152.00,304.00c0.00,57.438, 46.562,104.00, 104.00,104.00s 104.00-46.562, 104.00-104.00s-46.562-104.00-104.00-104.00S 152.00,246.562, 152.00,304.00z M 480.00,128.00L 368.00,128.00 c-8.00-32.00-16.00-64.00-48.00-64.00L 192.00,64.00 c-32.00,0.00-40.00,32.00-48.00,64.00L 32.00,128.00 c-17.60,0.00-32.00,14.40-32.00,32.00l0.00,288.00 c0.00,17.60, 14.40,32.00, 32.00,32.00l 448.00,0.00 c 17.60,0.00, 32.00-14.40, 32.00-32.00L 512.00,160.00 C 512.00,142.40, 497.60,128.00, 480.00,128.00z M 256.00,446.00c-78.425,0.00-142.00-63.574-142.00-142.00c0.00-78.425, 63.575-142.00, 142.00-142.00c 78.426,0.00, 142.00,63.575, 142.00,142.00 C 398.00,382.426, 334.427,446.00, 256.00,446.00z M 480.00,224.00l-64.00,0.00 l0.00-32.00 l 64.00,0.00 L 480.00,224.00 z"},
disk:{path:"M384,0H128H32C14.336,0,0,14.336,0,32v448c0,17.656,14.336,32,32,32h448c17.656,0,32-14.344,32-32V96L416,0H384z M352,160   V32h32v128c0,17.664-14.344,32-32,32H160c-17.664,0-32-14.336-32-32V32h128v128H352z M96,288c0-17.656,14.336-32,32-32h256   c17.656,0,32,14.344,32,32v192H96V288z"},question:{path:"M256,512c141.375,0,256-114.625,256-256S397.375,0,256,0S0,114.625,0,256S114.625,512,256,512z M256,64   c63.719,0,128,36.484,128,118.016c0,47.453-23.531,84.516-69.891,110.016C300.672,299.422,288,314.047,288,320   c0,17.656-14.344,32-32,32c-17.664,0-32-14.344-32-32c0-40.609,37.25-71.938,59.266-84.031   C315.625,218.109,320,198.656,320,182.016C320,135.008,279.906,128,256,128c-30.812,0-64,20.227-64,64.672   c0,17.664-14.336,32-32,32s-32-14.336-32-32C128,109.086,193.953,64,256,64z M256,449.406c-18.211,0-32.961-14.75-32.961-32.969   c0-18.188,14.75-32.953,32.961-32.953c18.219,0,32.969,14.766,32.969,32.953C288.969,434.656,274.219,449.406,256,449.406z"},
undo:{path:"M450.159,48.042c8.791,9.032,16.983,18.898,24.59,29.604c7.594,10.706,14.146,22.207,19.668,34.489  c5.509,12.296,9.82,25.269,12.92,38.938c3.113,13.669,4.663,27.834,4.663,42.499c0,14.256-1.511,28.863-4.532,43.822  c-3.009,14.952-7.997,30.217-14.953,45.795c-6.955,15.577-16.202,31.52-27.755,47.826s-25.88,32.9-42.942,49.807  c-5.51,5.444-11.787,11.67-18.834,18.651c-7.033,6.98-14.496,14.366-22.39,22.168c-7.88,7.802-15.955,15.825-24.187,24.069  c-8.258,8.231-16.333,16.203-24.252,23.888c-18.3,18.13-37.354,37.016-57.191,56.65l-56.84-57.445  c19.596-19.472,38.54-38.279,56.84-56.41c7.75-7.685,15.772-15.604,24.108-23.757s16.438-16.163,24.33-24.057  c7.894-7.893,15.356-15.33,22.402-22.312c7.034-6.98,13.312-13.193,18.821-18.651c22.351-22.402,39.165-44.648,50.471-66.738  c11.279-22.09,16.932-43.567,16.932-64.446c0-15.785-3.217-31.005-9.638-45.671c-6.422-14.665-16.229-28.504-29.437-41.529  c-3.282-3.282-7.358-6.395-12.217-9.325c-4.871-2.938-10.381-5.503-16.516-7.697c-6.121-2.201-12.815-3.992-20.058-5.373  c-7.242-1.374-14.9-2.064-23.002-2.064c-8.218,0-16.802,0.834-25.788,2.507c-8.961,1.674-18.053,4.429-27.222,8.271  c-9.189,3.842-18.456,8.869-27.808,15.089c-9.358,6.219-18.521,13.819-27.502,22.793l-59.92,60.271l93.797,94.058H0V40.91  l93.27,91.597l60.181-60.532c13.376-15.018,27.222-27.248,41.536-36.697c14.308-9.443,28.608-16.776,42.89-21.992  c14.288-5.223,28.505-8.74,42.623-10.557C294.645,0.905,308.189,0,321.162,0c13.429,0,26.389,1.185,38.84,3.562  c12.478,2.377,24.2,5.718,35.192,10.029c11.006,4.311,21.126,9.404,30.374,15.265C434.79,34.724,442.995,41.119,450.159,48.042z"},
arrow_right:{path:"M30.796,226.318h377.533L294.938,339.682c-11.899,11.906-11.899,31.184,0,43.084c11.887,11.899,31.19,11.893,43.077,0  l165.393-165.386c5.725-5.712,8.924-13.453,8.924-21.539c0-8.092-3.213-15.84-8.924-21.551L338.016,8.925  C332.065,2.975,324.278,0,316.478,0c-7.802,0-15.603,2.968-21.539,8.918c-11.899,11.906-11.899,31.184,0,43.084l113.391,113.384  H30.796c-16.822,0-30.463,13.645-30.463,30.463C0.333,212.674,13.974,226.318,30.796,226.318z"},arrow_up:{path:"M295.505,629.446V135.957l148.193,148.206c15.555,15.559,40.753,15.559,56.308,0c15.555-15.538,15.546-40.767,0-56.304  L283.83,11.662C276.372,4.204,266.236,0,255.68,0c-10.568,0-20.705,4.204-28.172,11.662L11.333,227.859  c-7.777,7.777-11.666,17.965-11.666,28.158c0,10.192,3.88,20.385,11.657,28.158c15.563,15.555,40.762,15.555,56.317,0  l148.201-148.219v493.489c0,21.993,17.837,39.82,39.82,39.82C277.669,669.267,295.505,651.439,295.505,629.446z"},
arrow_diag:{path:"M279.875,511.994c-1.292,0-2.607-0.102-3.924-0.312c-10.944-1.771-19.333-10.676-20.457-21.71L233.97,278.348  L22.345,256.823c-11.029-1.119-19.928-9.51-21.698-20.461c-1.776-10.944,4.031-21.716,14.145-26.262L477.792,2.149  c9.282-4.163,20.167-2.165,27.355,5.024c7.201,7.189,9.199,18.086,5.024,27.356L302.22,497.527  C298.224,506.426,289.397,511.994,279.875,511.994z M118.277,217.332l140.534,14.294c11.567,1.178,20.718,10.335,21.878,21.896  l14.294,140.519l144.09-320.792L118.277,217.332z"},
auto_zoom:{path:"M505.441,242.47l-78.303-78.291c-9.18-9.177-24.048-9.171-33.216,0c-9.169,9.172-9.169,24.045,0.006,33.217l38.193,38.188  H280.088V80.194l38.188,38.199c4.587,4.584,10.596,6.881,16.605,6.881c6.003,0,12.018-2.297,16.605-6.875  c9.174-9.172,9.174-24.039,0.011-33.217L273.219,6.881C268.803,2.471,262.834,0,256.596,0c-6.229,0-12.202,2.471-16.605,6.881  l-78.296,78.302c-9.178,9.172-9.178,24.045,0,33.217c9.177,9.171,24.051,9.171,33.21,0l38.205-38.205v155.4H80.521l38.2-38.188  c9.177-9.171,9.177-24.039,0.005-33.216c-9.171-9.172-24.039-9.178-33.216,0L7.208,242.464c-4.404,4.403-6.881,10.381-6.881,16.611  c0,6.227,2.477,12.207,6.881,16.61l78.302,78.291c4.587,4.581,10.599,6.875,16.605,6.875c6.006,0,12.023-2.294,16.61-6.881  c9.172-9.174,9.172-24.036-0.005-33.211l-38.205-38.199h152.593v152.063l-38.199-38.211c-9.171-9.18-24.039-9.18-33.216-0.022  c-9.178,9.18-9.178,24.059-0.006,33.222l78.284,78.302c4.41,4.404,10.382,6.881,16.611,6.881c6.233,0,12.208-2.477,16.611-6.881  l78.302-78.296c9.181-9.18,9.181-24.048,0-33.205c-9.174-9.174-24.054-9.174-33.21,0l-38.199,38.188v-152.04h152.051l-38.205,38.199  c-9.18,9.175-9.18,24.037-0.005,33.211c4.587,4.587,10.596,6.881,16.604,6.881c6.01,0,12.024-2.294,16.605-6.875l78.303-78.285  c4.403-4.403,6.887-10.378,6.887-16.611C512.328,252.851,509.845,246.873,505.441,242.47z"},
statbox:{path:"M28.782,56.902H483.88c15.707,0,28.451-12.74,28.451-28.451C512.331,12.741,499.599,0,483.885,0H28.782   C13.074,0,0.331,12.741,0.331,28.451C0.331,44.162,13.074,56.902,28.782,56.902zM483.885,136.845H28.782c-15.708,0-28.451,12.741-28.451,28.451c0,15.711,12.744,28.451,28.451,28.451H483.88   c15.707,0,28.451-12.74,28.451-28.451C512.331,149.586,499.599,136.845,483.885,136.845zM483.885,273.275H28.782c-15.708,0-28.451,12.731-28.451,28.452c0,15.707,12.744,28.451,28.451,28.451H483.88   c15.707,0,28.451-12.744,28.451-28.451C512.337,286.007,499.599,273.275,483.885,273.275zM256.065,409.704H30.492c-15.708,0-28.451,12.731-28.451,28.451c0,15.707,12.744,28.451,28.451,28.451h225.585   c15.707,0,28.451-12.744,28.451-28.451C284.516,422.436,271.785,409.704,256.065,409.704z"},
circle:{path:"M256,256 m-150,0 a150,150 0 1,0 300,0 a150,150 0 1,0 -300,0"},three_circles:{path:"M256,85 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0  M256,255 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0  M256,425 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0 "},diamand:{path:"M256,0L384,256L256,511L128,256z"},rect:{path:"M80,80h352v352h-352z"},cross:{path:"M80,40l176,176l176,-176l40,40l-176,176l176,176l-40,40l-176,-176l-176,176l-40,-40l176,-176l-176,-176z"},vrgoggles:{size:"245.82 141.73",path:"M175.56,111.37c-22.52,0-40.77-18.84-40.77-42.07S153,27.24,175.56,27.24s40.77,18.84,40.77,42.07S198.08,111.37,175.56,111.37ZM26.84,69.31c0-23.23,18.25-42.07,40.77-42.07s40.77,18.84,40.77,42.07-18.26,42.07-40.77,42.07S26.84,92.54,26.84,69.31ZM27.27,0C11.54,0,0,12.34,0,28.58V110.9c0,16.24,11.54,30.83,27.27,30.83H99.57c2.17,0,4.19-1.83,5.4-3.7L116.47,118a8,8,0,0,1,12.52-.18l11.51,20.34c1.2,1.86,3.22,3.61,5.39,3.61h72.29c15.74,0,27.63-14.6,27.63-30.83V28.58C245.82,12.34,233.93,0,218.19,0H27.27Z"},
th2colorz:{recs:[{x:128,y:486,w:256,h:26,f:"rgb(38,62,168)"},{y:461,f:"rgb(22,82,205)"},{y:435,f:"rgb(16,100,220)"},{y:410,f:"rgb(18,114,217)"},{y:384,f:"rgb(20,129,214)"},{y:358,f:"rgb(14,143,209)"},{y:333,f:"rgb(9,157,204)"},{y:307,f:"rgb(13,167,195)"},{y:282,f:"rgb(30,175,179)"},{y:256,f:"rgb(46,183,164)"},{y:230,f:"rgb(82,186,146)"},{y:205,f:"rgb(116,189,129)"},{y:179,f:"rgb(149,190,113)"},{y:154,f:"rgb(179,189,101)"},{y:128,f:"rgb(209,187,89)"},{y:102,f:"rgb(226,192,75)"},{y:77,f:"rgb(244,198,59)"},
{y:51,f:"rgb(253,210,43)"},{y:26,f:"rgb(251,230,29)"},{y:0,f:"rgb(249,249,15)"}]},CreateSVG:function(a,b,c,d){a=a.append("svg:svg").attr("class","svg_toolbar_btn").attr("width",c+"px").attr("height",c+"px").attr("viewBox","0 0 512 512").style("overflow","hidden");if("recs"in b){c={};for(var h=0;h<b.recs.length;++h)e.extend(c,b.recs[h]),a.append("rect").attr("x",c.x).attr("y",c.y).attr("width",c.w).attr("height",c.h).attr("fill",c.f)}else a.append("svg:path").attr("d",b.path);a.append("svg:rect").attr("x",
0).attr("y",0).attr("width",512).attr("height",512).style("opacity",0).style("fill","none").style("pointer-events","visibleFill").append("svg:title").text(d);return a}};C.prototype.empty=function(){return 0===this.opt.length};C.prototype.remain=function(){return this.opt};C.prototype.check=function(a,b){var c=this.opt.indexOf(a);if(0>c)return!1;this.opt=this.opt.substr(0,c)+this.opt.substr(c+a.length);this.part="";if(!b)return!0;for(a=c;a<this.opt.length&&" "!==this.opt[a]&&","!==this.opt[a]&&";"!==
this.opt[a];)a++;a>c&&(this.part=this.opt.substr(c,a-c),this.opt=this.opt.substr(0,c)+this.opt.substr(a));return!0};C.prototype.partAsInt=function(a,b){var c=this.part.replace(/^\D+/g,"");c=c?parseInt(c,10):Number.NaN;return isNaN(c)?b||0:c+(a||0)};C.prototype.partAsFloat=function(a,b){var c=this.part.replace(/^\D+/g,"");c=c?parseFloat(c):Number.NaN;return isNaN(c)?b||0:c+(a||0)};var u={Coord:{kCARTESIAN:1,kPOLAR:2,kCYLINDRICAL:3,kSPHERICAL:4,kRAPIDITY:5},root_colors:[],root_line_styles:"  3,3 1,2 3,4,1,4 5,3,1,3 5,3,1,3,1,3,1,3 5,5 5,3,1,3,1,3 20,5 20,10,1,10 1,3".split(" "),
root_markers:[0,100,8,7,0,9,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,103,105,104,0,3,4,2,1,106,6,7,5,102,101],root_fonts:"Arial;iTimes New Roman;bTimes New Roman;biTimes New Roman;Arial;oArial;bArial;boArial;Courier New;oCourier New;bCourier New;boCourier New;Symbol;Times New Roman;Wingdings;iSymbol;Verdana".split(";"),root_fonts_aver_width:[.537,.51,.535,.52,.537,.54,.556,.56,.6,.6,.6,.6,.587,.514,.896,.587,.55],symbols_map:{"#alpha":"\u03b1","#beta":"\u03b2","#chi":"\u03c7","#delta":"\u03b4",
"#varepsilon":"\u03b5","#phi":"\u03c6","#gamma":"\u03b3","#eta":"\u03b7","#iota":"\u03b9","#varphi":"\u03c6","#kappa":"\u03ba","#lambda":"\u03bb","#mu":"\u03bc","#nu":"\u03bd","#omicron":"\u03bf","#pi":"\u03c0","#theta":"\u03b8","#rho":"\u03c1","#sigma":"\u03c3","#tau":"\u03c4","#upsilon":"\u03c5","#varomega":"\u03d6","#omega":"\u03c9","#xi":"\u03be","#psi":"\u03c8","#zeta":"\u03b6","#Alpha":"\u0391","#Beta":"\u0392","#Chi":"\u03a7","#Delta":"\u0394","#Epsilon":"\u0395","#Phi":"\u03a6","#Gamma":"\u0393",
"#Eta":"\u0397","#Iota":"\u0399","#vartheta":"\u03d1","#Kappa":"\u039a","#Lambda":"\u039b","#Mu":"\u039c","#Nu":"\u039d","#Omicron":"\u039f","#Pi":"\u03a0","#Theta":"\u0398","#Rho":"\u03a1","#Sigma":"\u03a3","#Tau":"\u03a4","#Upsilon":"\u03a5","#varsigma":"\u03c2","#Omega":"\u03a9","#Xi":"\u039e","#Psi":"\u03a8","#Zeta":"\u0396","#varUpsilon":"\u03d2","#epsilon":"\u03b5","#sqrt":"\u221a","#bar":"","#overline":"","#underline":"","#strike":"","#leq":"\u2264","#/":"\u2044","#infty":"\u221e","#voidb":"\u0192",
"#club":"\u2663","#diamond":"\u2666","#heart":"\u2665","#spade":"\u2660","#leftrightarrow":"\u2194","#leftarrow":"\u2190","#uparrow":"\u2191","#rightarrow":"\u2192","#downarrow":"\u2193","#circ":"\u02c6","#pm":"\u00b1","#doublequote":"\u2033","#geq":"\u2265","#times":"\u00d7","#propto":"\u221d","#partial":"\u2202","#bullet":"\u2022","#divide":"\u00f7","#neq":"\u2260","#equiv":"\u2261","#approx":"\u2248","#3dots":"\u2026","#cbar":"|","#topbar":"\u00af","#downleftarrow":"\u21b5","#aleph":"\u2135","#Jgothic":"\u2111",
"#Rgothic":"\u211c","#voidn":"\u2118","#otimes":"\u2297","#oplus":"\u2295","#oslash":"\u2205","#cap":"\u2229","#cup":"\u222a","#supseteq":"\u2287","#supset":"\u2283","#notsubset":"\u2284","#subseteq":"\u2286","#subset":"\u2282","#int":"\u222b","#in":"\u2208","#notin":"\u2209","#angle":"\u2220","#nabla":"\u2207","#oright":"\u00ae","#ocopyright":"\u00a9","#trademark":"\u2122","#prod":"\u220f","#surd":"\u221a","#upoint":"\u02d9","#corner":"\u00ac","#wedge":"\u2227","#vee":"\u2228","#Leftrightarrow":"\u21d4",
"#Leftarrow":"\u21d0","#Uparrow":"\u21d1","#Rightarrow":"\u21d2","#Downarrow":"\u21d3","#LT":"<","#void1":"\u00ae","#copyright":"\u00a9","#void3":"\u2122","#sum":"\u2211","#arctop":"\u239b","#lbar":"\u23b8","#arcbottom":"\u239d","#void8":"","#bottombar":"\u230a","#arcbar":"\u23a7","#ltbar":"\u23a8","#AA":"\u212b","#aa":"\u00e5","#void06":"","#GT":">","#forall":"\u2200","#exists":"\u2203","#vec":"","#dot":"\u22c5","#hat":"\u00b7","#ddot":"","#acute":"acute","#grave":"","#check":"\u2713","#tilde":"\u02dc",
"#slash":"\u2044","#hbar":"\u0127","#box":"\u25fd","#Box":"\u2610","#parallel":"\u2225","#perp":"\u22a5","#odot":"\u2299","#left":"","#right":"","{}":""},math_symbols_map:{"#LT":"\\langle","#GT":"\\rangle","#club":"\\clubsuit","#spade":"\\spadesuit","#heart":"\\heartsuit","#diamond":"\\diamondsuit","#voidn":"\\wp","#voidb":"f","#copyright":"(c)","#ocopyright":"(c)","#trademark":"TM","#void3":"TM","#oright":"R","#void1":"R","#3dots":"\\ldots","#lbar":"\\mid","#void8":"\\mid","#divide":"\\div","#Jgothic":"\\Im",
"#Rgothic":"\\Re","#doublequote":'"',"#plus":"+","#minus":"-","#/":"/","#upoint":".","#aa":"\\mathring{a}","#AA":"\\mathring{A}","#omicron":"o","#Alpha":"A","#Beta":"B","#Epsilon":"E","#Zeta":"Z","#Eta":"H","#Iota":"I","#Kappa":"K","#Mu":"M","#Nu":"N","#Omicron":"O","#Rho":"P","#Tau":"T","#Chi":"X","#varomega":"\\varpi","#corner":"?","#ltbar":"?","#bottombar":"?","#notsubset":"?","#arcbottom":"?","#cbar":"?","#arctop":"?","#topbar":"?","#arcbar":"?","#downleftarrow":"?","#splitline":"\\genfrac{}{}{0pt}{}",
"#it":"\\textit","#bf":"\\textbf","#frac":"\\frac","#left{":"\\lbrace","#right}":"\\rbrace","#left\\[":"\\lbrack","#right\\]":"\\rbrack","#\\[\\]{":"\\lbrack"," } ":"\\rbrack","#\\[":"\\lbrack","#\\]":"\\rbrack","#{":"\\lbrace","#}":"\\rbrace"," ":"\\;"}};e.Painter=u;u.convertSymbol=function(a){return u.symbols_map[a]};u.createMenu=function(a,b,c){document.body.style.cursor="wait";var d;c&&"object"==typeof c&&void 0!==c.clientX&&void 0!==c.clientY&&(d={clientX:c.clientX,clientY:c.clientY});e.AssertPrerequisites("hierarchy;jq2d;",
function(){document.body.style.cursor="auto";u.createMenu(a,b,d)})};u.closeMenu=function(a){return(a=document.getElementById(a||"root_ctx_menu"))?(a.parentNode.removeChild(a),!0):!1};u.readStyleFromURL=function(a){var b=e.GetUrlOption("optimize",a);""==b?e.gStyle.OptimizeDraw=2:null!==b&&(e.gStyle.OptimizeDraw=parseInt(b),isNaN(e.gStyle.OptimizeDraw)&&(e.gStyle.OptimizeDraw=2));b=e.GetUrlOption("interactive",a);"nomenu"===b?e.gStyle.ContextMenu=!1:null!==b&&(b&&"1"!=b?"0"==b&&(b="000000"):b="111111",
6===b.length&&("0"==b[0]?e.gStyle.ToolBar=!1:"1"==b[0]?e.gStyle.ToolBar="popup":"2"==b[0]&&(e.gStyle.ToolBar=!0),b=b.substr(1)),5==b.length&&(e.gStyle.Tooltip=parseInt(b[0]),e.gStyle.ContextMenu="0"!=b[1],e.gStyle.Zooming="0"!=b[2],e.gStyle.MoveResize="0"!=b[3],e.gStyle.DragAndDrop="0"!=b[4]));b=e.GetUrlOption("tooltip",a);null!==b&&(e.gStyle.Tooltip=parseInt(b));b=e.GetUrlOption("mathjax",a);var c=e.GetUrlOption("latex",a);null!==b&&"0"!=b&&null===c&&(c="math");null!==c&&(e.gStyle.Latex=c);null!==
e.GetUrlOption("nomenu",a)&&(e.gStyle.ContextMenu=!1);null!==e.GetUrlOption("noprogress",a)&&(e.gStyle.ProgressBox=!1);null!==e.GetUrlOption("notouch",a)&&(e.touches=!1);null!==e.GetUrlOption("adjframe",a)&&(e.gStyle.CanAdjustFrame=!0);b=e.GetUrlOption("optstat",a);null!==b&&(e.gStyle.fOptStat=parseInt(b));b=e.GetUrlOption("optfit",a);null!==b&&(e.gStyle.fOptFit=parseInt(b));e.gStyle.fStatFormat=e.GetUrlOption("statfmt",a,e.gStyle.fStatFormat);e.gStyle.fFitFormat=e.GetUrlOption("fitfmt",a,e.gStyle.fFitFormat);
b=e.GetUrlOption("toolbar",a);null!==b&&(c=null,0<=b.indexOf("popup")&&(c="popup"),0<=b.indexOf("left")&&(e.gStyle.ToolBarSide="left",c="popup"),0<=b.indexOf("right")&&(e.gStyle.ToolBarSide="right",c="popup"),0<=b.indexOf("vert")&&(e.gStyle.ToolBarVert=!0,c="popup"),0<=b.indexOf("show")&&(c=!0),e.gStyle.ToolBar=c||0>b.indexOf("0")&&0>b.indexOf("false")&&0>b.indexOf("off"));b=e.GetUrlOption("palette",a);null!==b&&(b=parseInt(b),!isNaN(b)&&0<b&&113>b&&(e.gStyle.Palette=b));b=e.GetUrlOption("embed3d",
a);null!==b&&(e.gStyle.Embed3DinSVG=parseInt(b));b=e.GetUrlOption("webgl",a);"0"===b||"false"===b?e.gStyle.NoWebGL=!0:"ie"===b&&(e.gStyle.NoWebGL=!e.browser.isIE);b=e.GetUrlOption("geosegm",a);null!==b&&(e.gStyle.GeoGradPerSegm=Math.max(2,parseInt(b)));a=e.GetUrlOption("geocomp",a);null!==a&&(e.gStyle.GeoCompressComp="0"!==a&&"false"!==a)};u.createRootColors=function(){var a="white black red green blue yellow magenta cyan rgb(89,212,84) rgb(89,84,217) white".split(" ");a[110]="white";for(var b=[{col:11,
str:"c1b7ad4d4d4d6666668080809a9a9ab3b3b3cdcdcde6e6e6f3f3f3cdc8accdc8acc3c0a9bbb6a4b3a697b8a49cae9a8d9c8f83886657b1cfc885c3a48aa9a1839f8daebdc87b8f9a768a926983976e7b857d9ad280809caca6c0d4cf88dfbb88bd9f83c89a7dc08378cf5f61ac8f94a6787b946971d45a549300ff7b00ff6300ff4b00ff3300ff1b00ff0300ff0014ff002cff0044ff005cff0074ff008cff00a4ff00bcff00d4ff00ecff00fffd00ffe500ffcd00ffb500ff9d00ff8500ff6d00ff5500ff3d00ff2600ff0e0aff0022ff003aff0052ff006aff0082ff009aff00b1ff00c9ff00e1ff00f9ff00ffef00ffd700ffbf00ffa700ff8f00ff7700ff6000ff4800ff3000ff1800ff0000"},
{col:201,str:"5c5c5c7b7b7bb8b8b8d7d7d78a0f0fb81414ec4848f176760f8a0f14b81448ec4876f1760f0f8a1414b84848ec7676f18a8a0fb8b814ecec48f1f1768a0f8ab814b8ec48ecf176f10f8a8a14b8b848ecec76f1f1"},{col:390,str:"ffffcdffff9acdcd9affff66cdcd669a9a66ffff33cdcd339a9a33666633ffff00cdcd009a9a00666600333300"},{col:406,str:"cdffcd9aff9a9acd9a66ff6666cd66669a6633ff3333cd33339a3333663300ff0000cd00009a00006600003300"},{col:422,str:"cdffff9affff9acdcd66ffff66cdcd669a9a33ffff33cdcd339a9a33666600ffff00cdcd009a9a006666003333"},
{col:590,str:"cdcdff9a9aff9a9acd6666ff6666cd66669a3333ff3333cd33339a3333660000ff0000cd00009a000066000033"},{col:606,str:"ffcdffff9affcd9acdff66ffcd66cd9a669aff33ffcd33cd9a339a663366ff00ffcd00cd9a009a660066330033"},{col:622,str:"ffcdcdff9a9acd9a9aff6666cd66669a6666ff3333cd33339a3333663333ff0000cd00009a0000660000330000"},{col:791,str:"ffcd9acd9a669a66339a6600cd9a33ffcd66ff9a00ffcd33cd9a00ffcd00ff9a33cd66006633009a3300cd6633ff9a66ff6600ff6633cd3300ff33009aff3366cd00336600339a0066cd339aff6666ff0066ff3333cd0033ff00cdff9a9acd66669a33669a009acd33cdff669aff00cdff339acd00cdff009affcd66cd9a339a66009a6633cd9a66ffcd00ff6633ffcd00cd9a00ffcd33ff9a00cd66006633009a3333cd6666ff9a00ff9a33ff6600cd3300ff339acdff669acd33669a00339a3366cd669aff0066ff3366ff0033cd0033ff339aff0066cd00336600669a339acd66cdff009aff33cdff009acd00cdffcd9aff9a66cd66339a66009a9a33cdcd66ff9a00ffcd33ff9a00cdcd00ff9a33ff6600cd33006633009a6633cd9a66ff6600ff6633ff3300cd3300ffff339acd00666600339a0033cd3366ff669aff0066ff3366cd0033ff0033ff9acdcd669a9a33669a0066cd339aff66cdff009acd009aff33cdff009a"},
{col:920,str:"cdcdcd9a9a9a666666333333"}],c=0;c<b.length;++c)for(var d=b[c],e=0;e<d.str.length;e+=6){var f=parseInt(d.col)+parseInt(e/6);a[f]="rgb("+parseInt("0x"+d.str.slice(e,e+2))+","+parseInt("0x"+d.str.slice(e+2,e+4))+","+parseInt("0x"+d.str.slice(e+4,e+6))+")"}u.root_colors=a};u.MakeColorRGB=function(a){if(null==a||"TColor"!=a._typename)return null;var b=Math.round(255*a.fRed)+","+Math.round(255*a.fGreen)+","+Math.round(255*a.fBlue);b=void 0===a.fAlpha||1==a.fAlpha?"rgb("+b+")":"rgba("+b+","+
a.fAlpha.toFixed(3)+")";switch(b){case "rgb(255,255,255)":b="white";break;case "rgb(0,0,0)":b="black";break;case "rgb(255,0,0)":b="red";break;case "rgb(0,255,0)":b="green";break;case "rgb(0,0,255)":b="blue";break;case "rgb(255,255,0)":b="yellow";break;case "rgb(255,0,255)":b="magenta";break;case "rgb(0,255,255)":b="cyan"}return b};u.extendRootColors=function(a,b){if(!a){a=[];for(var c=0;c<this.root_colors.length;++c)a[c]=this.root_colors[c]}if(!b)return a;var d=b;if(b._typename&&b.arr)for(d=[],c=
0;c<b.arr.length;++c){var e=b.arr[c];e&&"TColor"==e._typename&&0<=e.fNumber&&1E4>=e.fNumber&&(d[e.fNumber]=u.MakeColorRGB(e))}for(c=0;c<d.length;++c)d[c]&&a[c]!=d[c]&&(a[c]=d[c]);return a};u.adoptRootColors=function(a){this.extendRootColors(this.root_colors,a)};E.prototype.calcColorIndex=function(a,b){a=Math.floor((a+.99)*this.palette.length/(b-1));a>this.palette.length-1&&(a=this.palette.length-1);return a};E.prototype.getColor=function(a){return this.palette[a]};E.prototype.getLength=function(){return this.palette.length};
E.prototype.calcColor=function(a,b){a=this.calcColorIndex(a,b);return this.getColor(a)};D.prototype.SetArgs=function(a){"object"==typeof a&&"number"==typeof a.fMarkerStyle&&(a={attr:a});if(a.attr){void 0===a.color&&(a.color=u.root_colors[a.attr.fMarkerColor]);if(!a.style||0>a.style)a.style=a.attr.fMarkerStyle;a.size||(a.size=a.attr.fMarkerSize)}this.Change(a.color,a.style,a.size)};D.prototype.reset_pos=function(){this.lastx=this.lasty=null};D.prototype.create=function(a,b){if(!this.optimized)return"M"+
(a+this.x0).toFixed(this.ndig)+","+(b+this.y0).toFixed(this.ndig)+this.marker;a=Math.round(a);b=Math.round(b);var c="M"+a+","+b+"h1",d=null===this.lastx?c:"m"+(a-this.lastx)+","+(b-this.lasty)+"h1";this.lastx=a+1;this.lasty=b;return d.length<c.length?d:c};D.prototype.GetFullSize=function(){return this.scale*this.size};D.prototype.MarkerLength=function(){return this.marker?this.marker.length:10};D.prototype.Change=function(a,b,c){this.changed=!0;void 0!==a&&(this.color=a);void 0!==b&&0<=b&&(this.style=
b);void 0!==c?this.size=c:c=this.size;this.x0=this.y0=0;if(1===this.style||777===this.style)return this.fill=!1,this.marker="h1",this.size=1,this.optimized=!0,this.reset_pos(),!0;this.optimized=!1;b=u.root_markers[this.style];void 0===b&&(b=100);a=b%100;this.fill=100<=b;switch(this.style){case 1:this.scale=this.size=1;break;case 6:this.size=2;this.scale=1;break;case 7:this.size=3;this.scale=1;break;default:this.size=c,this.scale=8}c=this.GetFullSize();this.ndig=7<c?0:2<c?1:2;6==a&&this.ndig++;b=(c/
2).toFixed(this.ndig);var d=c.toFixed(this.ndig);switch(a){case 0:this.x0=-parseFloat(b);d=(2*parseFloat(b)).toFixed(this.ndig);this.marker="a"+b+","+b+",0,1,0,"+d+",0a"+b+","+b+",0,1,0,-"+d+",0z";break;case 1:a=(c/3).toFixed(this.ndig);this.x0=this.y0=c/6;this.marker="h"+a+"v-"+a+"h-"+a+"v-"+a+"h-"+a+"v"+a+"h-"+a+"v"+a+"h"+a+"v"+a+"h"+a+"z";break;case 2:this.x0=-c/2;this.marker="l"+b+",-"+b+"l"+b+","+b+"l-"+b+","+b+"z";break;case 3:this.x0=this.y0=-c/2;this.marker="v"+d+"h"+d+"v-"+d+"z";break;case 4:this.y0=
c/2;this.marker="l-"+b+",-"+d+"h"+d+"z";break;case 5:this.y0=-c/2;this.marker="l-"+b+","+d+"h"+d+"z";break;case 6:this.y0=-c/2;this.marker="l"+(c/3).toFixed(this.ndig)+","+d+"l-"+(5/6*c).toFixed(this.ndig)+",-"+(.625*c).toFixed(this.ndig)+"h"+d+"l-"+(5/6*c).toFixed(this.ndig)+","+(.625*c).toFixed(this.ndig)+"z";break;case 7:this.x0=this.y0=-c/2;this.marker="l"+d+","+d+"m0,-"+d+"l-"+d+","+d+"m0,-"+b+"h"+d+"m-"+b+",-"+b+"v"+d;break;case 8:this.y0=-c/2;this.marker="v"+d+"m-"+b+",-"+b+"h"+d;break;case 9:this.x0=
this.y0=-c/2;this.marker="l"+d+","+d+"m0,-"+d+"l-"+d+","+d;break;default:this.x0=-c/2,this.marker="l"+b+",-"+b+"l"+b+","+b+"l-"+b+","+b+"z"}return!0};D.prototype.getStrokeColor=function(){return this.stroke?this.color:"none"};D.prototype.getFillColor=function(){return this.fill?this.color:"none"};D.prototype.Apply=function(a){a.style("stroke",this.stroke?this.color:"none");a.style("fill",this.fill?this.color:"none")};D.prototype.verifyDirectChange=function(a){this.Change(this.color,parseInt(this.style),
parseFloat(this.size))};D.prototype.CreateSample=function(a,b,c){this.reset_pos();a.append("path").attr("d",this.create(b/2,c/2)).call(this.func)};G.prototype.SetArgs=function(a){a.attr?(a.color=a.color0||u.root_colors[a.attr.fLineColor],void 0===a.width&&(a.width=a.attr.fLineWidth),a.style=a.attr.fLineStyle):"string"==typeof a.color?"none"===a.color||a.width||(a.width=1):"number"==typeof a.color&&(a.color=u.root_colors[a.color]);void 0===a.width&&(a.width=a.color&&"none"!=a.color?1:0);this.color=
0===a.width?"none":a.color;this.width=a.width;this.style=a.style;a.can_excl&&(this.excl_side=this.excl_width=0,99<Math.abs(this.width)&&(this.excl_side=0>this.width?-1:1,this.excl_width=5*Math.floor(this.width/100),this.width=Math.abs(this.width%100)));!this.color&&0<this.width&&(this.color="lightgrey")};G.prototype.ChangeExcl=function(a,b){void 0!==b&&(this.excl_width=b);void 0!==a&&(this.excl_side=a,0===this.excl_width&&0!==this.excl_side&&(this.excl_width=20));this.changed=!0};G.prototype.empty=
function(){return"none"==this.color};G.prototype.Apply=function(a){this.used=!0;this.empty()?a.style("stroke",null).style("stroke-width",null).style("stroke-dasharray",null):a.style("stroke",this.color).style("stroke-width",this.width).style("stroke-dasharray",u.root_line_styles[this.style]||null)};G.prototype.Change=function(a,b,c){void 0!==a&&(this.color=a);void 0!==b&&(this.width=b);void 0!==c&&(this.style=c);this.changed=!0};G.prototype.CreateSample=function(a,b,c){a.append("path").attr("d","M0,"+
c/2+"h"+b).call(this.func)};F.prototype.SetArgs=function(a){a.attr&&"object"==typeof a.attr&&(void 0===a.pattern&&void 0!==a.attr.fFillStyle&&(a.pattern=a.attr.fFillStyle),void 0===a.color&&void 0!==a.attr.fFillColor&&(a.color=a.attr.fFillColor));this.Change(a.color,a.pattern,a.svg,a.color_as_svg)};F.prototype.Apply=function(a){this.used=!0;a.style("fill",this.fillcolor());"opacity"in this&&a.style("opacity",this.opacity);"antialias"in this&&a.style("antialias",this.antialias)};F.prototype.fillcolor=
function(){return this.pattern_url||this.color};F.prototype.fillcoloralt=function(a){return this.color&&"none"!=this.color?this.color:a};F.prototype.empty=function(){var a=this.fillcolor();return!a||"none"==a};F.prototype.SetSolidColor=function(a){delete this.pattern_url;this.color=a;this.pattern=1001};F.prototype.isSolid=function(a){return 1001!==this.pattern?!1:!a||a==this.color};F.prototype.verifyDirectChange=function(a){"string"==typeof this.pattern&&(this.pattern=parseInt(this.pattern));isNaN(this.pattern)&&
(this.pattern=0);this.Change(this.color,this.pattern,a?a.svg_canvas():null,!0)};F.prototype.Change=function(a,b,c,d){delete this.pattern_url;this.changed=!0;void 0===a||isNaN(a)||d||(this.colorindx=parseInt(a));void 0===b||isNaN(b)||(this.pattern=parseInt(b),delete this.opacity,delete this.antialias);if(1E3==this.pattern&&0===this.colorindx)return this.pattern_url="white",!0;1E3==this.pattern&&(this.pattern=1001);if(1001>this.pattern||this.isSolid()&&0===this.colorindx&&1===this.kind&&!d)return this.pattern_url=
"none",!0;b=this.colorindx;d?(this.color=a,b=1E4+e.id_counter++):this.color=e.Painter.root_colors[b];"string"!=typeof this.color&&(this.color="none");if(this.isSolid())return!0;if(4E3<=this.pattern&&4100>=this.pattern)return this.opacity=(this.pattern-4E3)/100,!0;if(!c||c.empty()||3E3>this.pattern)return!1;a="pat_"+this.pattern+"_"+b;b=c.select(".canvas_defs");b.empty()&&(b=c.insert("svg:defs",":first-child").attr("class","canvas_defs"));this.pattern_url="url(#"+a+")";this.antialias=!1;if(!b.select("."+
a).empty())return d&&console.log("find id in def",a),!0;var h="";c=null;var f=d="",g=2,l=2;switch(this.pattern){case 3001:g=l=2;d="M0,0h1v1h-1zM1,1h1v1h-1z";break;case 3002:g=4;l=2;d="M1,0h1v1h-1zM3,1h1v1h-1z";break;case 3003:g=l=4;d="M2,1h1v1h-1zM0,3h1v1h-1z";break;case 3004:g=l=8;h="M8,0L0,8";break;case 3005:g=l=8;h="M0,0L8,8";break;case 3006:g=l=4;h="M1,0v4";break;case 3007:g=l=4;h="M0,1h4";break;case 3008:g=l=10;d="M0,3v-3h3ZM7,0h3v3ZM0,7v3h3ZM7,10h3v-3ZM5,2l3,3l-3,3l-3,-3Z";h="M0,3l5,5M3,10l5,-5M10,7l-5,-5M7,0l-5,5";
break;case 3009:l=g=12;h="M0,0A6,6,0,0,0,12,0M6,6A6,6,0,0,0,12,12M6,6A6,6,0,0,1,0,12";c="none";break;case 3010:g=l=10;h="M0,2h10M0,7h10M2,0v2M7,2v5M2,7v3";break;case 3011:g=9;l=18;h="M5,0v8M2,1l6,6M8,1l-6,6M9,9v8M6,10l3,3l-3,3M0,9v8M3,10l-3,3l3,3";c="none";break;case 3012:g=10;l=20;h="M5,1A4,4,0,0,0,5,9A4,4,0,0,0,5,1M0,11A4,4,0,0,1,0,19M10,11A4,4,0,0,0,10,19";c="none";break;case 3013:g=l=7;h="M0,0L7,7M7,0L0,7";c="none";break;case 3014:g=l=16;h="M0,0h16v16h-16v-16M0,12h16M12,0v16M4,0v8M4,4h8M0,8h8M8,4v8";
c="none";break;case 3015:g=6;l=12;h="M2,1A2,2,0,0,0,2,5A2,2,0,0,0,2,1M0,7A2,2,0,0,1,0,11M6,7A2,2,0,0,0,6,11";c="none";break;case 3016:g=12;l=7;h="M0,1A3,2,0,0,1,3,3A3,2,0,0,0,9,3A3,2,0,0,1,12,1";c="none";break;case 3017:g=l=4;h="M3,1l-2,2";break;case 3018:g=l=4;h="M1,1l2,2";break;case 3019:g=l=12;h="M1,6A5,5,0,0,0,11,6A5,5,0,0,0,1,6h-1h1A5,5,0,0,1,6,11v1v-1A5,5,0,0,1,11,6h1h-1A5,5,0,0,1,6,1v-1v1A5,5,0,0,1,1,6";c="none";break;case 3020:g=7;l=12;h="M1,0A2,3,0,0,0,3,3A2,3,0,0,1,3,9A2,3,0,0,0,1,12";c=
"none";break;case 3021:g=l=8;h="M8,2h-2v4h-4v2M2,0v2h-2";c="none";break;case 3022:g=l=8;h="M0,2h2v4h4v2M6,0v2h2";c="none";break;case 3023:g=l=8;d="M4,0h4v4zM8,4v4h-4z";f="M4,0L0,4L4,8L8,4Z";break;case 3024:g=l=16;d="M0,8v8h2v-8zM8,0v8h2v-8M4,14v2h12v-2z";f="M0,2h8v6h4v-6h4v12h-12v-6h-4z";break;case 3025:g=l=18;d="M5,13v-8h8ZM18,0v18h-18l5,-5h8v-8Z";break;default:var p=function(a,b){var c=[],d=n,e=0,v=l;3>Math.abs(a)&&(d=Math.round(n/12*9));0==a?(d=Math.round(n/12*8),e=d/2):0<a?v-=d:e=d;for(;e<=v;){var f=
e+a*d;0>f?(f=Math.round(e/(e-f)*g),c.push(0,e,f,0),c.push(g,l-e,g-f,l)):f>l?(f=Math.round((l-e)/(f-e)*g),c.push(0,e,f,l),c.push(g,l-e,g-f,0)):c.push(0,e,g,f);e+=d}for(a=0;a<c.length;a+=4)h=b?h+("M"+c[a+1]+","+c[a]+"L"+c[a+3]+","+c[a+2]):h+("M"+c[a]+","+c[a+1]+"L"+c[a+2]+","+c[a+3])};if(3025<this.pattern&&3100>this.pattern)g=4,l=2,d="M1,0h1v1h-1zM3,1h1v1h-1z";else{var q=this.pattern%1E3,K=q%10,v=(q-K)%100/10;if(q=(q-10*v-K)/100){var n=12*q;g=l=6*n;switch(v){case 0:p(0);break;case 1:p(1);break;case 2:p(2);
break;case 3:p(3);break;case 4:p(6);break;case 6:p(3,!0);break;case 7:p(2,!0);break;case 8:p(1,!0);break;case 9:p(0,!0)}switch(K){case 0:v&&p(0);break;case 1:p(-1);break;case 2:p(-2);break;case 3:p(-3);break;case 4:p(-6);break;case 6:p(-3,!0);break;case 7:p(-2,!0);break;case 8:p(-1,!0);break;case 9:9!=v&&p(0,!0)}}}}if(!d&&!h)return!1;a=b.append("svg:pattern").attr("id",a).attr("class",a).attr("patternUnits","userSpaceOnUse").attr("width",g).attr("height",l);f&&(b=k.rgb(this.color),b.r=Math.round((b.r+
255)/2),b.g=Math.round((b.g+255)/2),b.b=Math.round((b.b+255)/2),a.append("svg:path").attr("d",f).style("fill",b));d&&a.append("svg:path").attr("d",d).style("fill",this.color);h&&a.append("svg:path").attr("d",h).style("stroke",this.color).style("stroke-width",1).style("fill",c);return!0};F.prototype.CreateSample=function(a,b,c){var d=new F({svg:a,pattern:this.pattern,color:this.color,color_as_svg:!0});a.append("path").attr("d","M0,0h"+b+"v"+c+"h-"+b+"z").call(d.func)};u.getFontDetails=function(a,b){b=
{name:"Arial",size:Math.round(b||11),weight:null,style:null};a=Math.floor(a/10);for(var c=u.root_fonts[a]||"";0<c.length;){if("b"===c[0])b.weight="bold";else if("i"===c[0])b.style="italic";else if("o"===c[0])b.style="oblique";else break;c=c.substr(1)}"Symbol"==c&&(b.weight=b.style=null);b.name=c;b.aver_width=u.root_fonts_aver_width[a]||.55;b.setFont=function(a,b){a.attr("font-family",this.name);"without-size"!=b&&a.attr("font-size",this.size).attr("xml:space","preserve");this.weight&&a.attr("font-weight",
this.weight);this.style&&a.attr("font-style",this.style)};b.func=b.setFont.bind(b);return b};u.chooseTimeFormat=function(a,b){if(.5>a)return b?"%S.%L":"%H:%M:%S.%L";if(30>a)return b?"%Mm%S":"%H:%M:%S";a/=60;if(30>a)return b?"%Hh%M":"%d/%m %H:%M";a/=60;if(12>a)return b?"%d-%Hh":"%d/%m/%y %Hh";a/=24;if(15.218425>a)return b?"%d/%m":"%d/%m/%y";a/=30.43685;return 6>a?"%d/%m/%y":2>a/12?b?"%m/%y":"%d/%m/%y":"%Y"};u.getTimeFormat=function(a){var b=a.fTimeFormat.indexOf("%F");return 0<=b?a.fTimeFormat.substr(0,
b):a.fTimeFormat};u.getTimeOffset=function(a){function b(a,b,c){a=d.indexOf(a);if(0>a)return b;var e=parseInt(d.substr(0,a));d=d.substr(a+1);return isNaN(e)||e<b||e>c?b:e}if(!a)return 7889184E5;var c=a.fTimeFormat.indexOf("%F");if(0>c)return 1E3*e.gStyle.fTimeOffset;var d=a.fTimeFormat.substr(c+2);if(0==d.indexOf("1995-01-01 00:00:00s0"))return 7889184E5;if("0"==d||""==d)return 0;a=b("-",1970,2300);c=b("-",1,12)-1;var h=b(" ",1,31),f=b(":",0,23),g=b(":",0,59),l=b("s",0,59),p=b(" ",0,999);c=new Date(Date.UTC(a,
c,h,f,g,l,p));a=c.getTime();d=d.toUpperCase();0==d.indexOf("GMT")&&(a+=6E4*c.getTimezoneOffset(),d=d.substr(4).trim(),3<d.length&&(c=0,h=1E3,"-"==d[0]&&(c=1,h=-1E3),a-=h*(3600*parseInt(d.substr(c,2))+60*parseInt(d.substr(c+2,2)))));return a};u.translateLaTeX=function(a){for(;2<a.length&&"{"==a[0]&&"}"==a[a.length-1];)a=a.substr(1,a.length-2);u.symbolsRegexCache||(u.symbolsRegexCache=new RegExp("("+Object.keys(u.symbols_map).join("|").replace(/\{/g,"{").replace(/\\}/g,"\\}")+")","g"));a=a.replace(u.symbolsRegexCache,
u.convertSymbol);return a=a.replace(/\{\}/g,"")};u.approxTextWidth=function(a,b){return b.length*a.size*a.aver_width};u.isAnyLatex=function(a){return 0<=a.indexOf("#")||0<=a.indexOf("\\")||0<=a.indexOf("{")};u.translateMath=function(a,b,c,d){if(2!=b){for(var e in u.math_symbols_map)a=a.replace(new RegExp(e,"g"),u.math_symbols_map[e]);for(e in u.symbols_map)2<e.length&&(a=a.replace(new RegExp(e,"g"),"\\"+e.substr(1)));b="";for(e=!0;a;){var f=a.indexOf("#color[");if(0>f&&e){b=a;break}e=!1;if(0!=f){var g=
0>f?a:a.substr(0,f);b+=g;if(0>f)break}a=a.substr(f+7);f=a.indexOf("]{");if(0>=f)break;g=parseInt(a.substr(0,f));if(isNaN(g))break;g=d.get_color(g);var l=1;a=a.substr(f+2);for(f=-1;l&&++f<a.length;)"{"==a[f]?l++:"}"==a[f]&&l--;if(0!=l)break;l=a.substr(0,f);a=a.substr(f+1);l&&(b+="\\color{"+g+"}{"+l+"}")}a=b}else a=a.replace(/\\\^/g,"\\hat");return"string"!=typeof c?"\\("+a+"\\)":"\\(\\color{"+c+"}{"+a+"}\\)"};u.BuildSvgPath=function(a,b,c,d){function e(a,b){return(b.gry-a.gry)/(b.grx-a.grx)}function f(a){var b;
var c=0;var d=a.length-1;var f=[];var v=a[1];for(b=f[0]=e(a[0],v);++c<d;)f[c]=(b+(b=e(v,v=a[c+1])))/2;f[c]=b;for(var g=-1,h=a.length-1;++g<h;)c=e(a[g],a[g+1]),1E-6>Math.abs(c)?f[g]=f[g+1]=0:(d=f[g]/c,v=f[g+1]/c,b=d*d+v*v,9<b&&(b=3*c/Math.sqrt(b),f[g]=b*d,f[g+1]=b*v));for(g=-1;++g<=h;)b=(a[Math.min(h,g+1)].grx-a[Math.max(0,g-1)].grx)/(6*(1+f[g]*f[g])),a[g].dgrx=b||0,a[g].dgry=f[g]*b||0}function g(a){var b=Math.round(a);if(0==d||b===a)return b.toString();for(a=a.toFixed(d);"0"==a[a.length-1]&&a.lastIndexOf(".")<
a.length-1;)a=a.substr(0,a.length-1);"."==a[a.length-1]&&(a=a.substr(0,a.length-1));"-0"==a&&(a="0");return a}var l=0<=a.indexOf("bezier");void 0===d&&(d=l?2:0);void 0===c&&(c=0);var p={path:"",close:""},q=b[0],k=Math.max(q.gry,c+5);var v=Math.round(q.grx);var n=Math.round(q.gry),y=b.length;p.path=("L"==a[0]?"L":"M")+g(q.grx)+","+g(q.gry);(l||0<=a.indexOf("calc"))&&f(b);if(l)for(p.path+="c"+g(q.dgrx)+","+g(q.dgry)+",",a=1;a<y;++a)v=q,q=b[a],1<a&&(p.path+="s"),p.path+=g(q.grx-q.dgrx-v.grx)+","+g(q.gry-
q.dgry-v.gry)+","+g(q.grx-v.grx)+","+g(q.gry-v.gry),k=Math.max(k,v.gry);else if(1E4>y)for(a=1;a<y;++a){q=b[a];l=Math.round(q.grx)-v;var t=Math.round(q.gry)-n;l&&t?p.path+="l"+l+","+t:!l&&t?p.path+="v"+t:l&&!t&&(p.path+="h"+l);v+=l;n+=t;k=Math.max(k,n)}else{var r=t=n,m=n;for(a=1;a<y;++a){q=b[a];var u=Math.round(q.grx);var A=Math.round(q.gry);k=Math.max(k,A);l=u-v;0===l?(t=Math.min(t,A),r=Math.max(r,A),m=A):(t!==r&&(t!=n&&(p.path+="v"+(t-n)),p.path+="v"+(r-t),r!=m&&(p.path+="v"+(m-r)),n=m),t=A-n,p.path=
t?p.path+("l"+l+","+t):p.path+("h"+l),v=u,m=t=r=n=A)}t!=r&&(t!=n&&(p.path+="v"+(t-n)),p.path+="v"+(r-t),r!=m&&(p.path+="v"+(m-r)),n=m)}0<c&&(p.close="L"+g(q.grx)+","+g(k)+"h"+g(b[0].grx-q.grx)+"Z");return p};H.prototype.nextrequest=function(a,b){var c=this.path,d="buf",h=null;if("connect"===b)c+=this.raw?"?raw_connect":"?txt_connect",this.args&&(c+="&"+this.args),console.log("longpoll connect "+c+" raw = "+this.raw),this.connid="connect";else if("close"===b){if(null===this.connid||"close"===this.connid)return;
c+="?connection="+this.connid+"&close";this.connid="close";d="text;sync"}else{if(null===this.connid||"number"!==typeof this.connid){e.browser.qt5||console.error("No connection");return}c+="?connection="+this.connid;"dummy"===b&&(c+="&dummy")}a&&(this.raw?c+="&post="+btoa(a):(d="post",h=a));a=e.NewHttpRequest(c,d,function(a){this.handle.req===this&&(this.handle.req=null);if(null===a)return this.handle.processreq(null);if(this.handle.raw){var b="",c=0,d=new Uint8Array(a),f=d.length;if(4>f)return e.browser.qt5||
console.error("longpoll got short message in raw mode "+f),this.handle.processreq(null);for(;4>c;)b+=String.fromCharCode(d[c++]);if("txt:"!=b){for(b="";c<f&&":"!=String.fromCharCode(d[c]);)b+=String.fromCharCode(d[c++]);++c;f=c+parseInt(b.trim())}for(b="";c<f;)b+=String.fromCharCode(d[c++]);b&&("<<nope>>"==b&&(b=""),this.handle.processreq(b));f<d.length&&this.handle.processreq(a,f)}else if("application/x-binary"==this.getResponseHeader("Content-Type"))(b=this.getResponseHeader("LongpollHeader"))&&
this.handle.processreq(b),this.handle.processreq(a,0);else{if(a&&"string"!==typeof a){b="";d=new Uint8Array(a);for(c=0;c<d.length;++c)b+=String.fromCharCode(d[c]);a=b}"<<nope>>"==a&&(a="");this.handle.processreq(a)}});a.handle=this;"dummy"===b&&(this.req=a);a.send(h)};H.prototype.processreq=function(a,b){if(null===a){if("function"===typeof this.onerror)this.onerror("receive data with connid "+(this.connid||"---"));this.connid=null}else{if("connect"===this.connid){if(!a){this.connid=null;if("function"===
typeof this.onerror)this.onerror("connection rejected");return}this.connid=parseInt(a);console.log("Get new longpoll connection with id "+this.connid);if("function"==typeof this.onopen)this.onopen()}else{if("close"===this.connid){if("function"==typeof this.onclose)this.onclose();return}if("function"===typeof this.onmessage&&a)this.onmessage({data:a,offset:b})}this.req||this.nextrequest("","dummy")}};H.prototype.send=function(a){this.nextrequest(a)};H.prototype.close=function(){this.nextrequest("",
"close")};I.prototype.get_protocol=function(a){if(a){this.protocol=JSON.parse(a);if("function"==typeof this.onopen)this.onopen();this.next_operation()}};I.prototype.send=function(a){"send"==this.protocol[this.cnt]&&(this.cnt++,setTimeout(this.next_operation.bind(this),10))};I.prototype.close=function(){};I.prototype.next_operation=function(){if(!this.wait_for_file){var a=this.protocol[this.cnt];a&&"send"!=a&&(this.wait_for_file=!0,e.NewHttpRequest(a,0<a.indexOf(".bin")?"buf":"text",this.get_file.bind(this,
a)).send(),this.cnt++)}};I.prototype.get_file=function(a,b){this.wait_for_file=!1;b&&(this.receiver.ProvideData&&this.receiver.ProvideData(1,b,0),setTimeout(this.next_operation.bind(this),10))};B.prototype.GetUserArgs=function(a){return a&&"string"==typeof a?this.user_args&&"object"==typeof this.user_args?this.user_args[a]:void 0:this.user_args};B.prototype.SetReceiver=function(a){this.receiver=a};B.prototype.Cleanup=function(){delete this.receiver;this.Close(!0)};B.prototype.InvokeReceiver=function(a,
b,c,d){if(this.receiver&&"function"==typeof this.receiver[b])this.receiver[b](this,c,d);if(a&&this.channels){a=Object.keys(this.channels);for(var e=0;e<a.length;++e)this.channels[a[e]].InvokeReceiver(!1,b,c,d)}};B.prototype.ProvideData=function(a,b,c){if(this.wait_first_recv)return console.log("FIRST MESSAGE",a,b),delete this.wait_first_recv,this.InvokeReceiver(!1,"OnWebsocketOpened");if(1<a&&this.channels&&(a=this.channels[a]))return a.ProvideData(1,b,c);a=c&&0>c;if(!(a||this.msgqueue&&this.msgqueue.length))return this.InvokeReceiver(!1,
"OnWebsocketMsg",b,c);this.msgqueue||(this.msgqueue=[]);a&&(c=void 0);this.msgqueue.push({ready:!0,msg:b,len:c})};B.prototype.ReserveQueueItem=function(){this.msgqueue||(this.msgqueue=[]);var a={ready:!1,msg:null,len:0};this.msgqueue.push(a);return a};B.prototype.DoneItem=function(a,b,c){a.ready=!0;a.msg=b;a.len=c;this.ProcessQueue()};B.prototype.ProcessQueue=function(){if(!this._loop_msgqueue&&this.msgqueue){for(this._loop_msgqueue=!0;0<this.msgqueue.length&&this.msgqueue[0].ready;){var a=this.msgqueue.shift();
this.InvokeReceiver(!1,"OnWebsocketMsg",a.msg,a.len)}0==this.msgqueue.length&&delete this.msgqueue;delete this._loop_msgqueue}};B.prototype.Close=function(a){this.master?(this.master.Send("CLOSECH="+this.channelid,0),delete this.master.channels[this.channelid],delete this.master):(this.timerid&&(clearTimeout(this.timerid),delete this.timerid),this._websocket&&0<this.state&&(this.state=a?-1:0,this._websocket.onclose=null,this._websocket.close(),delete this._websocket))};B.prototype.CanSend=function(a){return this.cansend>=
(a||1)};B.prototype.Send=function(a,b){if(this.master)return this.master.Send(a,this.channelid);if(!this._websocket||0>=this.state)return!1;if(isNaN(b)||void 0===b)b=1;0>=this.cansend&&console.error("should be queued before sending cansend: "+this.cansend);b=this.ackn+":"+this.cansend+":"+b+":";this.ackn=0;this.cansend--;this._websocket.send(b+a);"websocket"===this.kind&&(this.timerid&&clearTimeout(this.timerid),this.timerid=setTimeout(this.KeepAlive.bind(this),1E4));return!0};B.prototype.Inject=
function(a,b,c){if(!c)return setTimeout(this.Inject.bind(this,a,b,!0),0);void 0===b&&(b=1);if(Array.isArray(a)){for(c=0;c<a.length;++c)this.ProvideData(b,"string"==typeof a[c]?a[c]:JSON.stringify(a[c]),-1);this.ProcessQueue()}else a&&this.ProvideData(b,"string"==typeof a?a:JSON.stringify(a))};B.prototype.KeepAlive=function(){delete this.timerid;this.Send("KEEPALIVE",0)};B.prototype.CreateChannel=function(){if(this.master)return master.CreateChannel();var a=new B("channel");a.wait_first_recv=!0;this.channels||
(this.channels={},this.freechannelid=2);a.master=this;a.channelid=this.freechannelid++;return this.channels[a.channelid]=a};B.prototype.getChannelId=function(){return this.channelid&&this.master?this.channelid:1};B.prototype.CreateRelative=function(a){if(!a||!this.kind||!this.href)return null;var b=new B(this.kind);console.log("Try to connect ",this.href+a);b.Connect(this.href+a);return b};B.prototype.Connect=function(a){function b(f){if(0==c.state){f||console.log("try connect window again"+(new Date).getTime());
c._websocket&&c._websocket.close();delete c._websocket;var g=null;a||((a=window.location.href)&&0<a.indexOf("#")&&(a=a.substr(0,a.indexOf("#"))),a&&0<a.lastIndexOf("/")&&(a=a.substr(0,a.lastIndexOf("/")+1)));c.href=a;d++;f&&console.log("Opening web socket at "+a);2<d&&e.progress("Trying to connect "+a);var l=a;"file"==c.kind?(l+="root.filedump",g=new I(c),console.log("configure protocol log "+l)):"websocket"===c.kind&&f?(l=l.replace("http://","ws://").replace("https://","wss://")+"root.websocket",
h&&(l+="?"+h),console.log("configure websocket "+l),g=new WebSocket(l)):(l+="root.longpoll",console.log("configure longpoll "+l),g=new H(l,"rawlongpoll"===c.kind,h));g&&(c._websocket=g,g.onopen=function(){2<d&&e.progress();c.state=1;c.Send("READY="+(c.key||""),0);c.InvokeReceiver(!1,"OnWebsocketOpened")},g.onmessage=function(a){var b=a.data;if(c.next_binary){var d=c.next_binary;delete c.next_binary;if(b instanceof Blob){d=new FileReader;var e=c.ReserveQueueItem();d.onload=function(a){c.DoneItem(e,
a.target.result,0)};d.readAsArrayBuffer(b,a.offset||0)}else c.ProvideData(d,b,a.offset||0)}else{if("string"!=typeof b)return console.log("unsupported message kind: "+typeof b);var f=b.indexOf(":");a=parseInt(b.substr(0,f));d=b.indexOf(":",f+1);parseInt(b.substr(f+1,d-f));f=b.indexOf(":",d+1);d=parseInt(b.substr(d+1,f-d));c.ackn++;c.cansend+=a;b=b.substr(f+1);0==d?(console.log("GET chid=0 message",b),"CLOSE"==b&&(c.Close(!0),c.InvokeReceiver(!0,"OnWebsocketClosed"))):"$$binary$$"==b?c.next_binary=
d:"$$nullbinary$$"==b?c.ProvideData(d,new ArrayBuffer(0),0):c.ProvideData(d,b);7<c.ackn&&c.Send("READY",0)}},g.onclose=function(){delete c._websocket;0<c.state&&(console.log("websocket closed"),c.state=0,c.InvokeReceiver(!0,"OnWebsocketClosed"))},g.onerror=function(a){console.log("websocket error "+a);0<c.state&&(c.InvokeReceiver(!0,"OnWebsocketError",a),c.state=0)},e.BatchMode||setTimeout(b,3E3))}}this.Close();var c=this,d=0,h=this.key?"key="+this.key:"";b(!0)};e.ConnectWebWindow=function(a){"function"==
typeof a?a={callback:a}:a&&"object"==typeof a||(a={});if(a.prereq)return a.openui5src&&(e.openui5src=a.openui5src),a.openui5libs&&(e.openui5libs=a.openui5libs),a.openui5theme&&(e.openui5theme=a.openui5theme),e.AssertPrerequisites(a.prereq,function(){delete a.prereq;e.ConnectWebWindow(a)},a.prereq_logdiv);null!==e.GetUrlOption("batch_mode")&&e.GetUrlOption("key")&&(e.browser.isChromeHeadless||e.browser.isChrome)&&e.loadScript("root_batch_holder.js?key="+e.GetUrlOption("key"));a.platform||(a.platform=
e.GetUrlOption("platform"));"qt5"==a.platform?e.browser.qt5=!0:"cef3"==a.platform&&(e.browser.cef3=!0);void 0===a.batch&&(a.batch=null!==e.GetUrlOption("batch_mode"));a.batch&&(e.BatchMode=!0);a.socket_kind||(a.socket_kind=e.GetUrlOption("ws"));a.socket_kind||(a.socket_kind=e.browser.qt5?"rawlongpoll":e.browser.cef3?"longpoll":"websocket");var b=new B(a.socket_kind);b.user_args=a.user_args;window&&(window.onbeforeunload=b.Close.bind(b,!0),e.browser.qt5&&(window.onqt5unload=window.onbeforeunload));
a.first_recv&&(a.receiver={OnWebsocketOpened:function(a){},OnWebsocketMsg:function(b,d){if(0!=d.indexOf(a.first_recv))return b.Close();a.first_msg=d.substr(a.first_recv.length);a.prereq2||e.CallBack(a.callback,b,a)},OnWebsocketClosed:function(a){e.CloseCurrentWindow()}});b.key=e.GetUrlOption("key");if(!a.receiver)return e.CallBack(a.callback,b,a);b.SetReceiver(a.receiver);b.Connect();a.prereq2?e.AssertPrerequisites(a.prereq2,function(){delete a.prereq2;a.first_recv&&!a.first_msg||e.CallBack(a.callback,
b,a)}):a.first_recv||e.CallBack(a.callback,b,a)};w.prototype.AccessTopPainter=function(a){var b=this.select_main().node();b=b?b.firstChild:null;if(!b)return null;!0===a?b.painter=this:!1===a&&delete b.painter;return b.painter};w.prototype.Cleanup=function(a){var b=this.select_main("origin");b.empty()||a||b.html("");this._changed_layout&&this.set_layout_kind("simple");this.AccessTopPainter(!1);this.divid=null;delete this._selected_main;this._hpainter&&"function"===typeof this._hpainter.ClearPainter&&
this._hpainter.ClearPainter(this);delete this._changed_layout;delete this._hitemname;delete this._hdrawopt;delete this._hpainter};w.prototype.DrawingReady=function(a){this._ready_called_=!0;if(void 0!==this._ready_callback_){var b=this._ready_callback_;this._return_res_painter||(a=this);delete this._return_res_painter;for(delete this._ready_callback_;b.length;)e.CallBack(b.shift(),a)}return this};w.prototype.WhenReady=function(a){if("function"===typeof a){if("_ready_called_"in this)return e.CallBack(a,
this);void 0===this._ready_callback_&&(this._ready_callback_=[]);this._ready_callback_.push(a)}};w.prototype.ResetReady=function(){delete this._ready_called_;delete this._ready_callback_};w.prototype.GetObject=function(){};w.prototype.MatchObjectType=function(a){};w.prototype.UpdateObject=function(a){};w.prototype.RedrawPad=function(a){};w.prototype.RedrawObject=function(a){if(!this.UpdateObject(a))return!1;a=document.body.style.cursor;document.body.style.cursor="wait";this.RedrawPad();document.body.style.cursor=
a;return!0};w.prototype.CheckResize=function(a){};w.prototype.select_main=function(a){if(!this.divid)return k.select(null);var b=this._selected_main;b||("string"==typeof this.divid?(b=this.divid,"#"!=b[0]&&(b="#"+b),b=k.select(b),b.empty()||(this.divid=b.node())):b=k.select(this.divid),this._selected_main=b);if(!b||b.empty()||"origin"===a)return b;var c=b.property("use_enlarge"),d="simple"==(b.property("layout")||"simple")?"":b.property("layout_selector");d&&(b=b.select(d));a||b.empty()||!c||(b=k.select("#jsroot_enlarge_div"));
return b};w.prototype.get_main_id=function(){var a=this.select_main();if(a.empty())return"";var b=a.attr("id");b||(b="jsroot_element_"+e.id_counter++,a.attr("id",b));return b};w.prototype.get_layout_kind=function(){var a=this.select_main("origin");return(a.empty()?"":a.property("layout"))||"simple"};w.prototype.set_layout_kind=function(a,b){var c=this.select_main("origin");c.empty()||(a||(a="simple"),c.property("layout",a),c.property("layout_selector","simple"!=a&&b?b:null),this._changed_layout="simple"!==
a)};w.prototype.check_main_resize=function(a,b,c){var d=this.enlarge_main("state"),e=this.select_main("origin"),f=this.select_main();"on"!==d&&b&&b.width&&b.height&&e.style("width",b.width+"px").style("height",b.height+"px");b=this.get_visible_rect(e,!0);var g=e.attr("can_resize"),l=!1;"height"==g&&c&&Math.abs(b.width*c-b.height)>.1*b.width&&(l=!0);(5>=b.height||5>=b.width)&&g&&"false"!==g&&(l=!0);l&&"on"!==d&&(5<b.width?e.style("height",Math.round(b.width*(c||.66))+"px"):"height"!==g&&e.style("width",
"200px").style("height","100px"));c=this.get_visible_rect(f);d=f.property("draw_height");f=f.property("draw_width");c.changed=!1;if(d&&f&&0<d&&0<f){if(d!==c.height||f!==c.width)if(1<a||.66>c.width/f||1.5<c.width/f||.66>c.height/d&&1.5<c.height/d)c.changed=!0}else c.changed=!0;return c};w.prototype.enlarge_main=function(a,b){var c=this.select_main(!0),d=this.select_main("origin");if(c.empty()||!e.gStyle.CanEnlarge||!1===d.property("can_enlarge"))return!1;if(void 0===a||"verify"===a)return!0;var h=
d.property("use_enlarge")?"on":"off";if("state"===a)return h;"toggle"===a&&(a="off"===h);var f=k.select("#jsroot_enlarge_div");if(!0===a&&"on"!==h){if(!f.empty())return!1;f=k.select(document.body).append("div").attr("id","jsroot_enlarge_div");a=this.get_visible_rect(c);h=this.get_visible_rect(f);if((h.width<=a.width||h.height<=a.height)&&h.width*h.height<a.width*a.height)return b||console.log("Enlarged area "+h.width+"x"+h.height+" smaller then original drawing "+a.width+"x"+a.height),f.remove(),
!1;for(;0<c.node().childNodes.length;)f.node().appendChild(c.node().firstChild);d.property("use_enlarge",!0);return!0}if(!1===a&&"off"!==h){for(;f.node()&&0<f.node().childNodes.length;)c.node().appendChild(f.node().firstChild);f.remove();d.property("use_enlarge",!1);return!0}return!1};w.prototype.GetStyleValue=function(a,b){if(!a||a.empty())return 0;a=a.style(b);if(!a||"string"!==typeof a)return 0;a=parseFloat(a.replace("px",""));return isNaN(a)?0:Math.round(a)};w.prototype.get_visible_rect=function(a,
b){if(e.nodejs)return{width:parseInt(a.attr("width")),height:parseInt(a.attr("height"))};var c=a.node().getBoundingClientRect();c={width:Math.round(c.width),height:Math.round(c.height)};b||(c.width-=this.GetStyleValue(a,"padding-left")+this.GetStyleValue(a,"padding-right"),c.height-=this.GetStyleValue(a,"padding-top")-this.GetStyleValue(a,"padding-bottom"));return c};w.prototype.SetDivId=function(a){void 0!==a&&(this.divid=a,delete this._selected_main);this.AccessTopPainter(!0)};w.prototype.SetItemName=
function(a,b,c){"string"===typeof a?this._hitemname=a:delete this._hitemname;"string"===typeof b&&(this._hdrawopt=b);this._hpainter=c};w.prototype.GetItemName=function(){return"_hitemname"in this?this._hitemname:null};w.prototype.GetItemDrawOpt=function(){return"_hdrawopt"in this?this._hdrawopt:""};w.prototype.CanZoomIn=function(a,b,c){};m.prototype=Object.create(w.prototype);m.prototype.AssignObject=function(a){this.draw_object=void 0!==a&&"object"==typeof a?a:null};m.prototype.AssignSnapId=function(a){this.snapid=
a};m.prototype.Cleanup=function(){this.RemoveDrawG();var a=!0;if(this.is_main_painter()){var b=this.pad_painter();b&&!1!==b.normal_canvas||(a=!1)}this.pad_name="";this.draw_object=this.main=null;delete this.snapid;delete this.fillatt;delete this.lineatt;delete this.markeratt;delete this.bins;delete this.root_colors;delete this.options;delete this.options_store;delete this.rstyle;delete this.csstype;w.prototype.Cleanup.call(this,a)};m.prototype.GetObject=function(){return this.draw_object};m.prototype.GetClassName=
function(){return(this.draw_object?this.draw_object._typename:"")||""};m.prototype.MatchObjectType=function(a){return a&&this.draw_object?"string"===typeof a?this.draw_object._typename===a:a._typename?this.draw_object._typename===a._typename:this.draw_object._typename.match(a):!1};m.prototype.SetItemName=function(a,b,c){w.prototype.SetItemName.call(this,a,b,c);this.no_default_title||""==a||(b=this.svg_canvas(),b.empty()?this.select_main().attr("title",a):b.select("title").text(a))};m.prototype.OptionsStore=
function(a){if(this.options){a||(a="");var b=a.indexOf(";;");0<=b&&(a=a.substr(0,b));this.options.original=a;this.options_store=e.extend({},this.options)}};m.prototype.OptionesChanged=function(){if(!this.options)return!1;if(!this.options_store)return!0;for(var a in this.options)if(this.options[a]!==this.options_store[a])return!0;return!1};m.prototype.OptionsAsString=function(){return this.options?this.OptionesChanged()?"function"==typeof this.options.asString?this.options.asString():this.options.original||
"":this.options.original||"":""};m.prototype.UpdateObject=function(a){if(!this.MatchObjectType(a))return!1;e.extend(this.GetObject(),a);return!0};m.prototype.GetTipName=function(a){var b=this.GetItemName(),c=this.GetObject();b||(b=c&&c.fName?c.fName:"");20<b.lenght&&(b=b.substr(0,17)+"...");b&&a&&(b+=a);return b};m.prototype.pad_painter=function(a){a=this.svg_pad("string"==typeof a?a:void 0);return a.empty()?null:a.property("pad_painter")};m.prototype.canv_painter=function(){var a=this.svg_canvas();
return a.empty()?null:a.property("pad_painter")};m.prototype.get_color=function(a){var b=this.root_colors;b||(b=this.root_colors=(b=this.canv_painter())&&b.root_colors?b.root_colors:e.Painter.root_colors);return b[a]};m.prototype.add_color=function(a){var b=this.root_colors;b||(b=this.root_colors=(b=this.canv_painter())&&b.root_colors?b.root_colors:e.Painter.root_colors);var c=b.indexOf(a);if(0<=c)return c;b.push(a);return b.length-1};m.prototype.IsTooltipAllowed=function(){return(this.canv_painter()||
this).tooltip_allowed?!0:!1};m.prototype.SetTooltipAllowed=function(a){var b=this.canv_painter()||this;b.tooltip_allowed="toggle"==a?!b.tooltip_allowed:a};m.prototype.get_palette=function(a,b){if(!b){var c=this.pad_painter();if(!c)return null;if(c.custom_palette)return c.custom_palette}c=this.canv_painter();if(!c)return null;if(c.custom_palette&&!b)return c.custom_palette;a&&e.Painter.GetColorPalette&&(c.custom_palette=e.Painter.GetColorPalette(b));return c.custom_palette};m.prototype.AttributeChange=
function(a,b,c){};m.prototype.CheckResize=function(a){var b=this.canv_painter();if(!b)return!1;b.CheckCanvasResize(a);return!0};m.prototype.RemoveDrawG=function(){this.draw_g&&(this.draw_g.remove(),this.draw_g=null)};m.prototype.RecreateDrawG=function(a,b){console.warn("Obsolete RecreateDrawG is used, will be removed soon. Change to CreateG");return this.CreateG(a?void 0:b)};m.prototype.CreateG=function(a){if(this.draw_g)this.draw_g.selectAll("*").remove();else if(a){var b=this.svg_frame();if(b.empty())return b;
"string"!=typeof a&&(a="main_layer");var c=b.select("."+a);c.empty()&&(c=b.select(".main_layer"));this.draw_g=c.append("svg:g")}else{c=this.svg_layer("primitives_layer");this.draw_g=c.append("svg:g");b=[];c=c.node().childNodes;for(var d=0;d<c.length;++d)k.select(c[d]).classed("most_upper_primitives")&&b.push(c[d]);b.forEach(function(a){k.select(a).raise()})}this.draw_object&&(this.draw_g.attr("objname",encodeURI(this.draw_object.fName||"name")),this.draw_g.attr("objtype",encodeURI(this.draw_object._typename||
"type")));this.draw_g.property("in_frame",!!a);return this.draw_g};m.prototype.svg_canvas=function(){return this.select_main().select(".root_canvas")};m.prototype.svg_pad=function(a){void 0===a&&(a=this.pad_name);var b=this.svg_canvas();if(!a||b.empty())return b;var c=b.property("pad_painter");if(c&&c.pads_cache&&c.pads_cache[a])return k.select(c.pads_cache[a]);b=b.select(".primitives_layer .__root_pad_"+a);c&&(c.pads_cache||(c.pads_cache={}),c.pads_cache[a]=b.node());return b};m.prototype.svg_layer=
function(a,b){b=this.svg_pad(b);if(b.empty())return b;0==a.indexOf("prim#")&&(b=b.select(".primitives_layer"),a=a.substr(5));for(b=b.node().firstChild;null!==b;){var c=k.select(b);if(c.classed(a))return c;b=b.nextSibling}return k.select(null)};m.prototype.CurrentPadName=function(a){var b=this.svg_canvas();if(b.empty())return"";var c=b.property("current_pad");void 0!==a&&b.property("current_pad",a);return c};m.prototype.root_pad=function(){var a=this.pad_painter();return a?a.pad:null};m.prototype.AxisToSvg=
function(a,b,c,d){var h=this.draw_g&&this.draw_g.property("in_frame"),f=h?this.frame_painter():null;if(h&&f&&f["gr"+a])b="y"==a?f.gry(b)+(h?0:f.frame_y()):f.grx(b)+(h?0:f.frame_x());else if(h)b=0;else{if(c=c?null:this.root_pad())"y"==a?(c.fLogy&&(b=0<b?e.log10(b):c.fUymin),b=(b-c.fY1)/(c.fY2-c.fY1)):(c.fLogx&&(b=0<b?e.log10(b):c.fUxmin),b=(b-c.fX1)/(c.fX2-c.fX1));b="y"==a?(1-b)*this.pad_height():b*this.pad_width()}return d?b:Math.round(b)};m.prototype.SvgToAxis=function(a,b,c){var d=this.draw_g&&
this.draw_g.property("in_frame"),e=d?this.frame_painter():null;d&&(e=this.frame_painter());if(d&&e)return"y"==a?e.RevertY(b-(d?0:e.frame_y())):e.RevertX(b-(d?0:e.frame_x()));if(d)return 0;b="y"==a?1-b/this.pad_height():b/this.pad_width();if(c=c?null:this.root_pad())"y"==a?(b=c.fY1+b*(c.fY2-c.fY1),c.fLogy&&(b=Math.pow(10,b))):(b=c.fX1+b*(c.fX2-c.fX1),c.fLogx&&(b=Math.pow(10,b)));return b};m.prototype.AxisToSvgFunc=function(a){var b={isndc:a};this.draw_g&&this.draw_g.property("in_frame")&&(b.main=this.frame_painter());
b.main&&!a&&b.main.grx&&b.main.gry?(b.offx=b.main.frame_x(),b.offy=b.main.frame_y(),b.x=function(a){return Math.round(this.main.grx(a)+this.offx)},b.y=function(a){return Math.round(this.main.gry(a)+this.offy)}):(a||(b.pad=this.root_pad()),b.padh=this.pad_height(),b.padw=this.pad_width(),b.x=function(a){this.pad&&(this.pad.fLogx&&(a=0<a?e.log10(a):this.pad.fUxmin),a=(a-this.pad.fX1)/(this.pad.fX2-this.pad.fX1));return Math.round(a*this.padw)},b.y=function(a){this.pad&&(this.pad.fLogy&&(a=0<a?e.log10(a):
this.pad.fUymin),a=(a-this.pad.fY1)/(this.pad.fY2-this.pad.fY1));return Math.round((1-a)*this.padh)});return b};m.prototype.svg_frame=function(a){return this.svg_layer("primitives_layer",a).select(".root_frame")};m.prototype.pad_width=function(a){a=this.svg_pad(a);a=a.empty()?0:a.property("draw_width");return isNaN(a)?0:a};m.prototype.pad_height=function(a){a=this.svg_pad(a);a=a.empty()?0:a.property("draw_height");return isNaN(a)?0:a};m.prototype.frame_painter=function(){var a=this.pad_painter();
return a?a.frame_painter_ref:null};m.prototype.frame_property=function(a){var b=this.frame_painter();return b&&b[a]?b[a]:0};m.prototype.frame_x=function(){return this.frame_property("_frame_x")};m.prototype.frame_y=function(){return this.frame_property("_frame_y")};m.prototype.frame_width=function(){return this.frame_property("_frame_width")};m.prototype.frame_height=function(){return this.frame_property("_frame_height")};m.prototype.embed_3d=function(){return e.BatchMode?4:2>e.gStyle.Embed3DinSVG||
e.browser.isFirefox?e.gStyle.Embed3DinSVG:1};m.prototype.access_3d_kind=function(a){var b=this.svg_pad(this.this_pad_name);if(b.empty())return-1;var c=b.property("can3d");void 0!==a&&b.property("can3d",a);return null===c||void 0===c?-1:c};m.prototype.size_for_3d=function(a){void 0===a&&(a=this.embed_3d());var b=this.svg_pad(this.this_pad_name),c="draw3d_"+(this.this_pad_name||this.pad_name||"canvas");if(b.empty())return a=this.get_visible_rect(this.select_main()),10>a.height&&10<a.width&&(a.height=
Math.round(.66*a.width),this.select_main().style("height",a.height+"px")),a.x=0,a.y=0,a.clname=c,a.can3d=-1,a;var d=this.frame_painter();0===a&&(b=this.svg_canvas());c={x:0,y:0,width:100,height:100,clname:c,can3d:a};d&&!d.mode3d&&(b=this.svg_frame(),c.x=b.property("draw_x"),c.y=b.property("draw_y"));c.width=b.property("draw_width");c.height=b.property("draw_height");(!d||d.mode3d)&&0<a&&(c.x=Math.round(c.x+c.width*e.gStyle.fPadLeftMargin),c.y=Math.round(c.y+c.height*e.gStyle.fPadTopMargin),c.width=
Math.round(c.width*(1-e.gStyle.fPadLeftMargin-e.gStyle.fPadRightMargin)),c.height=Math.round(c.height*(1-e.gStyle.fPadTopMargin-e.gStyle.fPadBottomMargin)));b=this.pad_width(this.this_pad_name);d=b-c.x-c.width;var h=this.pad_height(this.this_pad_name),f=h-c.y-c.height;0<=d&&0<=f&&(c.x=Math.round(.3*c.x),c.y=Math.round(.9*c.y),c.width=b-c.x-Math.round(.3*d),c.height=h-c.y-Math.round(.5*f));1===a&&this.CalcAbsolutePosition(this.svg_pad(this.this_pad_name),c);return c};m.prototype.clear_3d_canvas=function(){var a=
this.access_3d_kind(null);if(0>a){var b=this.select_main().node();b&&b.firstChild&&b.firstChild.$jsroot&&(delete b.firstChild.painter,b.removeChild(b.firstChild));return a}b=this.size_for_3d(a);if(0===b.can3d)k.select(this.svg_canvas().node().nextSibling).remove(),this.svg_canvas().style("display",null);else{if(this.svg_pad(this.this_pad_name).empty())return;this.apply_3d_size(b).remove();this.svg_frame().style("display",null)}return a};m.prototype.add_3d_canvas=function(a,b){!b||-1>a.can3d||(-1===
a.can3d?(a=this.select_main().node(),null!==a&&(a.appendChild(b),b.painter=this,b.$jsroot=!0)):(this.access_3d_kind(a.can3d),0===a.can3d?(this.svg_canvas().style("display","none"),this.svg_canvas().node().parentNode.appendChild(b)):this.svg_pad(this.this_pad_name).empty()||(this.svg_frame().style("display","none"),this.apply_3d_size(a).attr("title","").node().appendChild(b))))};m.prototype.apply_3d_size=function(a,b){if(0>a.can3d)return k.select(null);if(1<a.can3d){var c=this.svg_layer(a.clname);
if(b)return c;b=this.svg_pad();3===a.can3d||4===a.can3d?(c.empty()&&(c=b.insert("g",".primitives_layer").attr("class",a.clname)),c.attr("transform","translate("+a.x+","+a.y+")")):(c.empty()&&(c=b.insert("foreignObject",".primitives_layer").attr("class",a.clname)),c.attr("x",a.x).attr("y",a.y).attr("width",a.width).attr("height",a.height).attr("viewBox","0 0 "+a.width+" "+a.height).attr("preserveAspectRatio","xMidYMid"))}else{var d=this.svg_canvas().node().parentNode;c=k.select(d).select("."+a.clname);
if(b)return c;this.svg_canvas().property("redraw_by_resize",!0);c.empty()&&(c=k.select(d).append("div").attr("class",a.clname+" jsroot_noselect"));for(b=d.getBoundingClientRect();d;){if(d===document){d=null;break}try{if("static"!==getComputedStyle(d).position)break}catch(f){break}d=d.parentNode}var e=d?d.getBoundingClientRect():{top:0,left:0};d=Math.round(b.left-e.left);b=Math.round(b.top-e.top);c.style("position","absolute").style("left",a.x+d+"px").style("top",a.y+b+"px").style("width",a.width+
"px").style("height",a.height+"px")}return c};m.prototype.main_painter=function(a,b){var c=this.main;c||(b=this.svg_pad(b),(c=b.empty()?this.AccessTopPainter():b.property("mainpainter"))||(c=null),a||(this.main=c));return c};m.prototype.is_main_painter=function(){return this===this.main_painter()};m.prototype.SetDivId=function(a,b,c){void 0!==a&&(this.divid=a,delete this._selected_main);if(!b||isNaN(b))b=0;if(0<=b&&this.select_main(!0).empty())return"string"==typeof a?console.error("not found HTML element with id: "+
a):console.error("specified HTML element can not be selected with d3.select()"),!1;this.create_canvas=!1;var d=this.svg_canvas();d.empty()&&0<b&&5!==b&&(e.Painter.drawCanvas(a,null,2==b||4==b?"noframe":""),d=this.svg_canvas(),this.create_canvas=!0);if(d.empty()){if(0>b||5===b||this.iscan)return!0;this.AccessTopPainter(!0);return!0}this.pad_name=c;void 0===this.pad_name&&(this.pad_name=this.CurrentPadName());if(0>b)return!0;if(this.svg_frame().select(".main_layer").empty()&&(1==b||3==b||4==b)&&("function"==
typeof e.Painter.drawFrame&&e.Painter.drawFrame(a,null,4==b?"3d":""),4!=b&&this.svg_frame().empty()))return alert("Fail to draw dummy TFrame");a=this.svg_pad();if(a.empty())return!0;(c=a.property("pad_painter"))&&c!==this&&(c.painters.push(this),!this.rstyle&&c.next_rstyle&&(this.rstyle=c.next_rstyle));1!==b&&4!==b&&5!==b||a.property("mainpainter")||a.property("mainpainter",this);return!0};m.prototype.CalcAbsolutePosition=function(a,b){for(;!a.empty()&&!a.classed("root_canvas");){var c=a.attr("class");
c&&(0<=c.indexOf("root_frame")||0<=c.indexOf("__root_pad_"))&&(b.x+=a.property("draw_x")||0,b.y+=a.property("draw_y")||0);a=k.select(a.node().parentNode)}return b};m.prototype.createAttMarker=function(a){a&&"object"===typeof a?void 0!==a.fMarkerColor&&void 0!==a.fMarkerStyle&&void 0!==a.fMarkerSize&&(a={attr:a,std:!1}):a={std:!0};void 0===a.std&&(a.std=!0);var b=a.std?this.markeratt:null;b?b.changed&&!a.force||b.SetArgs(a):b=new D(a);a.std&&(this.markeratt=b);return b};m.prototype.createAttLine=function(a){a&&
"object"===typeof a?void 0!==a.fLineColor&&void 0!==a.fLineStyle&&void 0!==a.fLineWidth&&(a={attr:a,std:!1}):a={std:!0};void 0===a.std&&(a.std=!0);var b=a.std?this.lineatt:null;b?b.changed&&!a.force||b.SetArgs(a):b=new G(a);a.std&&(this.lineatt=b);return b};m.prototype.createAttFill=function(a){a&&"object"===typeof a?a._typename&&void 0!==a.fFillColor&&void 0!==a.fFillStyle&&(a={attr:a,std:!1}):a={std:!0};void 0===a.std&&(a.std=!0);var b=a.std?this.fillatt:null;a.svg||(a.svg=this.svg_canvas());b?
b.changed&&!a.force||b.SetArgs(a):b=new F(a);a.std&&(this.fillatt=b);return b};m.prototype.ForEachPainter=function(a,b){var c=this.AccessTopPainter();c?"pads"!==b&&a(c):(c=this.pad_painter())&&c.ForEachPainterInPad(a,b)};m.prototype.InteractiveRedraw=function(a,b,c){var d;"string"==typeof b&&0!=b.indexOf("exec:")&&(d=b);"pad"==a?this.RedrawPad(d):"axes"==a?(a=this.main_painter(!0,this.this_pad_name))&&"function"==typeof a.DrawAxes?a.DrawAxes():this.RedrawPad(d):!1!==a&&this.Redraw(d);(d=this.pad_painter())&&
"function"==typeof d.InteractiveObjectRedraw&&d.InteractiveObjectRedraw(this);(d=this.canv_painter())&&"function"==typeof d.ProcessChanges&&d.ProcessChanges(b,this,c)};m.prototype.RedrawPad=function(a){var b=this.pad_painter();b&&b.Redraw(a)};m.prototype.SwitchTooltip=function(a){var b=this.frame_painter();b&&b.ProcessTooltipEvent(null,a);this.control&&"function"==typeof this.control.SwitchTooltip&&this.control.SwitchTooltip(a)};m.prototype.AddMove=function(){if(e.gStyle.MoveResize&&!e.BatchMode&&
this.draw_g&&!this.draw_g.property("assigned_move")){var a="",b=!0;if(3===e._test_d3_){a="drag";var c=k.behavior.drag().origin(Object)}else c=k.drag().subject(Object);c.on(a+"start",function(){var a=k.event.sourceEvent;("buttons"in a?2===a.buttons:"which"in a?3===a.which:"button"in a&&2===a.button)||(k.event.sourceEvent.preventDefault(),k.event.sourceEvent.stopPropagation(),a=k.mouse(this.draw_g.node()),b=!0,this.moveStart&&this.moveStart(a[0],a[1]))}.bind(this)).on("drag",function(){k.event.sourceEvent.preventDefault();
k.event.sourceEvent.stopPropagation();b=!1;this.moveDrag&&this.moveDrag(k.event.dx,k.event.dy)}.bind(this)).on(a+"end",function(){k.event.sourceEvent.preventDefault();k.event.sourceEvent.stopPropagation();this.moveEnd&&this.moveEnd(b);var a=this.canv_painter();a&&a.SelectObjectPainter(this)}.bind(this));this.draw_g.style("cursor","move").property("assigned_move",!0).call(c)}};m.prototype.AddDrag=function(a){function b(a){return"buttons"in a?2===a.buttons:"which"in a?3===a.which:"button"in a?2===a.button:
!1}function c(){return Number(g.draw_g.attr("width"))}function d(){return Number(g.draw_g.attr("height"))}function h(b,c,d,e){function f(a,c){var d="js_"+a.replace("-","_"),f=b.select("."+d);f.empty()&&(f=b.append("path").classed(d,!0));f.style("opacity",0).style("cursor",a).attr("d",c);e&&f.call(e)}f("nw-resize","M2,2h15v-5h-20v20h5Z");f("ne-resize","M"+(c-2)+",2h-15v-5h20v20h-5 Z");f("sw-resize","M2,"+(d-2)+"h15v5h-20v-20h5Z");f("se-resize","M"+(c-2)+","+(d-2)+"h-15v5h20v-20h-5Z");a.no_change_x||
(f("w-resize","M-3,18h5v"+Math.max(0,d-36)+"h-5Z"),f("e-resize","M"+(c+3)+",18h-5v"+Math.max(0,d-36)+"h5Z"));a.no_change_y||(f("n-resize","M18,-3v5h"+Math.max(0,c-36)+"v-5Z"),f("s-resize","M18,"+(d+3)+"v-5h"+Math.max(0,c-36)+"v5Z"))}function f(){l.style("cursor","auto");if(!g.draw_g)return l.remove(),l=null,!1;var b=Number(g.draw_g.attr("x")),e=Number(g.draw_g.attr("y")),f=Number(l.attr("x")),p=Number(l.attr("y")),q=Number(l.attr("width")),k=Number(l.attr("height"));a.minwidth&&q<a.minwidth&&(q=a.minwidth);
a.minheight&&k<a.minheight&&(k=a.minheight);var m=q!==c()||k!==d();b=f!==b||p!==e;g.draw_g.attr("x",f).attr("y",p).attr("transform","translate("+f+","+p+")").attr("width",q).attr("height",k);l.remove();l=null;g.SwitchTooltip(!0);h(g.draw_g,q,k);if(m||b)if(m&&"resize"in a&&a.resize(q,k),b&&"move"in a&&a.move(f,p,f-oldxx,p-e),m||b)"obj"in a&&(a.obj.fX1NDC=f/g.pad_width(),a.obj.fX2NDC=(f+q)/g.pad_width(),a.obj.fY1NDC=1-(p+k)/g.pad_height(),a.obj.fY2NDC=1-p/g.pad_height(),a.obj.modified_NDC=!0),"redraw"in
a&&a.redraw();return m||b}if(e.gStyle.MoveResize&&!e.BatchMode){var g=this,l=null,p=this.pad_painter();if(!p||!p._fast_drawing){p="";if(3===e._test_d3_){p="drag";var q=k.behavior.drag().origin(Object);var m=k.behavior.drag().origin(Object)}else q=k.drag().subject(Object),m=k.drag().subject(Object);q.on(p+"start",function(){if(!b(k.event.sourceEvent)){e.Painter.closeMenu();g.SwitchTooltip(!1);k.event.sourceEvent.preventDefault();k.event.sourceEvent.stopPropagation();var a={acc_x1:Number(g.draw_g.attr("x")),
acc_y1:Number(g.draw_g.attr("y")),pad_w:g.pad_width()-c(),pad_h:g.pad_height()-d(),drag_tm:new Date};l=k.select(g.draw_g.node().parentNode).append("rect").classed("zoom",!0).attr("x",a.acc_x1).attr("y",a.acc_y1).attr("width",c()).attr("height",d()).style("cursor","move").style("pointer-events","none").property("drag_handle",a)}}).on("drag",function(){if(l){k.event.sourceEvent.preventDefault();k.event.sourceEvent.stopPropagation();var b=l.property("drag_handle");a.no_change_x||(b.acc_x1+=k.event.dx);
a.no_change_y||(b.acc_y1+=k.event.dy);l.attr("x",Math.min(Math.max(b.acc_x1,0),b.pad_w)).attr("y",Math.min(Math.max(b.acc_y1,0),b.pad_h))}}).on(p+"end",function(){if(l){k.event.sourceEvent.preventDefault();var b=l.property("drag_handle");!1===f()&&(b=(new Date).getTime()-b.drag_tm.getTime(),a.ctxmenu&&600<b?(b=resize_se.node().getBoundingClientRect(),g.ShowContextMenu("main",{clientX:b.left,clientY:b.top})):a.canselect&&600>=b&&g.canv_painter().SelectObjectPainter(g))}});m.on(p+"start",function(){if(!b(k.event.sourceEvent)){k.event.sourceEvent.stopPropagation();
k.event.sourceEvent.preventDefault();g.SwitchTooltip(!1);var a={acc_x1:Number(g.draw_g.attr("x")),acc_y1:Number(g.draw_g.attr("y")),pad_w:g.pad_width(),pad_h:g.pad_height()};a.acc_x2=a.acc_x1+c();a.acc_y2=a.acc_y1+d();l=k.select(g.draw_g.node().parentNode).append("rect").classed("zoom",!0).style("cursor",k.select(this).style("cursor")).attr("x",a.acc_x1).attr("y",a.acc_y1).attr("width",a.acc_x2-a.acc_x1).attr("height",a.acc_y2-a.acc_y1).property("drag_handle",a)}}).on("drag",function(){if(l){k.event.sourceEvent.preventDefault();
k.event.sourceEvent.stopPropagation();var b=l.property("drag_handle"),c=k.event.dx,d=k.event.dy,e=k.select(this);a.no_change_x&&(c=0);a.no_change_y&&(d=0);e.classed("js_nw_resize")?(b.acc_x1+=c,b.acc_y1+=d):e.classed("js_ne_resize")?(b.acc_x2+=c,b.acc_y1+=d):e.classed("js_sw_resize")?(b.acc_x1+=c,b.acc_y2+=d):e.classed("js_se_resize")?(b.acc_x2+=c,b.acc_y2+=d):e.classed("js_w_resize")?b.acc_x1+=c:e.classed("js_n_resize")?b.acc_y1+=d:e.classed("js_e_resize")?b.acc_x2+=c:e.classed("js_s_resize")&&(b.acc_y2+=
d);c=Math.max(0,b.acc_x1);d=Math.min(b.acc_x2,b.pad_w);e=Math.max(0,b.acc_y1);b=Math.min(b.acc_y2,b.pad_h);l.attr("x",c).attr("y",e).attr("width",Math.max(0,d-c)).attr("height",Math.max(0,b-e))}}).on(p+"end",function(){l&&(k.event.sourceEvent.preventDefault(),f())});a.only_resize||this.draw_g.style("cursor","move").call(q);h(this.draw_g,c(),d(),m)}}};m.prototype.startTouchMenu=function(a){var b=k.touches(this.svg_frame().node());if(1==b.length){a&&""!=a||(a="main");var c="touch_"+a;k.event.preventDefault();
k.event.stopPropagation();this[c]={dt:new Date,pos:b[0]};this.svg_frame().on("touchcancel",this.endTouchMenu.bind(this,a)).on("touchend",this.endTouchMenu.bind(this,a))}};m.prototype.endTouchMenu=function(a){var b="touch_"+a;if(b in this){k.event.preventDefault();k.event.stopPropagation();var c=(new Date).getTime()-this[b].dt.getTime();this.svg_frame().on("touchcancel",null).on("touchend",null);500<c&&(c=this.svg_frame().node().getBoundingClientRect(),this.ShowContextMenu(a,{clientX:c.left+this[b].pos[0],
clientY:c.top+this[b].pos[1]}));delete this[b]}};m.prototype.AddColorMenuEntry=function(a,b,c,d,h){if(void 0!==c){a.add("sub:"+b,function(){var a="string"!==typeof c,b=prompt("Enter color "+(a?"(only id number)":"(name or id)"),c);if(null!=b){var f=parseInt(b);if(!isNaN(f)&&void 0!==e.Painter.root_colors[f])b=e.Painter.root_colors[f];else if(a)return;d.bind(this)(a?f:b)}});b="string"!==typeof c;for(var f=-1;11>f;++f)if(!(0>f&&b||10==f&&1!==h)){var g=0>f?"none":e.Painter.root_colors[f];0==f&&1==h&&
(g="none");a.addchk(c==(b?f:g),"<svg width='100' height='18' style='margin:0px;background-color:"+g+"'><text x='4' y='12' style='font-size:12px' fill='"+(1==f?"white":"black")+"'>"+g+"</text></svg>",b?f:g,d)}a.add("endsub:")}};m.prototype.AddSizeMenuEntry=function(a,b,c,d,e,f,g){if(void 0!==f){for(a.add("sub:"+b,function(){var a=f.toFixed(4);.1<=e&&(a=f.toFixed(2));1<=e&&(a=f.toFixed(0));a=prompt("Enter value of "+b,a);null!=a&&(a=parseFloat(a),isNaN(a)||g.bind(this)(1<=e?Math.round(a):a))});c<=d;c+=
e){var h=c.toFixed(2);.1<=e&&(h=c.toFixed(1));1<=e&&(h=c.toFixed(0));a.addchk(Math.abs(f-c)<e/2,h,c,g)}a.add("endsub:")}};m.prototype.ExecuteMenuCommand=function(a){if("Inspect"==a.fName)return this.ShowInspector(),!0;this.canv_painter();return!1};m.prototype.WebCanvasExec=function(a,b){if(a&&"string"==typeof a){var c=this.canv_painter();c&&"function"==typeof c.SubmitExec&&c.SubmitExec(this,a,b)}};m.prototype.FillObjectExecMenu=function(a,b,c){function d(a){var b=this.exec_painter||this,c=b.canv_painter();
(a=b.args_menu_items[parseInt(a)])&&a.fName&&("Show:Editor"==a.fExec?c&&"function"==typeof c.ActivateGed&&c.ActivateGed(b):c&&"function"==typeof c.executeObjectMethod&&c.executeObjectMethod(b,a,b.args_menu_id)||b.ExecuteMenuCommand(a)||b.args_menu_id&&b.WebCanvasExec(a.fExec,b.args_menu_id))}if(this.UserContextMenuFunc)return this.UserContextMenuFunc(a,b,c);var h=this.canv_painter();if(!this.snapid||!h||h._readonly||!h._websocket)return e.CallBack(c);var f=this.snapid;b&&(f+="#"+b);c=function(a,b,
c,f){if(!this._got_menu){this._got_menu=!0;f&&b!==f.fId&&console.error("missmatch between request "+b+" and reply "+f.fId+" identifiers");if((b=f?f.fItems:null)&&b.length){0<a.size()&&a.add("separator");this.args_menu_items=b;this.args_menu_id=f.fId;for(f=0;f<b.length;++f){var g=b[f];if(g.fClassName&&h&&h!=g.fClassName){a.add("endsub:");var h=""}h!=g.fClassName&&(h=g.fClassName,a.add("sub:"+h));void 0===g.fChecked||0>g.fChecked?a.add(g.fName,f,d):a.addchk(g.fChecked,g.fName,f,d)}h&&a.add("endsub:")}e.CallBack(c)}}.bind(this,
a,f,c);this._got_menu=!1;a.painter&&(a.painter.exec_painter=a.painter!==this?this:void 0);h.SubmitMenuRequest(this,b,f,c);setTimeout(c,2E3)};m.prototype.DeleteAtt=function(){delete this.lineatt;delete this.fillatt;delete this.markeratt};m.prototype.GetColorExec=function(a,b){var c=-1,d=e.Painter.root_colors;if("string"==typeof a){if(a&&"none"!=a)for(var h=1;h<d.length;++h){if(d[h]==a){c=h;break}}else c=0;0>c&&0==a.indexOf("rgb")&&(c=9999)}else!isNaN(a)&&d[a]&&(c=a,a=d[c]);if(0>c)return"";50<=c&&(a=
k.color(a),c="TColor::GetColor("+a.r+","+a.g+","+a.b+")");return"exec:"+b+"("+c+")"};m.prototype.FillAttContextMenu=function(a,b){b||(b="");if(this.lineatt&&this.lineatt.used){a.add("sub:"+b+"Line att");this.AddSizeMenuEntry(a,"width",1,10,1,this.lineatt.width,function(a){this.lineatt.Change(void 0,parseInt(a));this.InteractiveRedraw(!0,"exec:SetLineWidth("+a+")")}.bind(this));this.AddColorMenuEntry(a,"color",this.lineatt.color,function(a){this.lineatt.Change(a);this.InteractiveRedraw(!0,this.GetColorExec(a,
"SetLineColor"))}.bind(this));a.add("sub:style",function(){var a=prompt("Enter line style id (1-solid)",1);null!=a&&(a=parseInt(a),!isNaN(a)&&e.Painter.root_line_styles[a]&&(this.lineatt.Change(void 0,void 0,a),this.InteractiveRedraw(!0,"exec:SetLineStyle("+a+")")))}.bind(this));for(var c=1;11>c;++c){var d="<svg width='100' height='18'><text x='1' y='12' style='font-size:12px'>"+c+"</text><line x1='30' y1='8' x2='100' y2='8' stroke='black' stroke-width='3' stroke-dasharray='"+e.Painter.root_line_styles[c]+
"'></line></svg>";a.addchk(this.lineatt.style==c,d,c,function(a){this.lineatt.Change(void 0,void 0,parseInt(a));this.InteractiveRedraw(!0,"exec:SetLineStyle("+a+")")}.bind(this))}a.add("endsub:");a.add("endsub:");if("excl_side"in this.lineatt&&0!==this.lineatt.excl_side){a.add("sub:Exclusion");a.add("sub:side");for(c=-1;1>=c;++c)a.addchk(this.lineatt.excl_side==c,c,c,function(a){this.lineatt.ChangeExcl(parseInt(a));this.InteractiveRedraw()}.bind(this));a.add("endsub:");this.AddSizeMenuEntry(a,"width",
10,100,10,this.lineatt.excl_width,function(a){this.lineatt.ChangeExcl(void 0,parseInt(a));this.InteractiveRedraw()}.bind(this));a.add("endsub:")}}if(this.fillatt&&this.fillatt.used){a.add("sub:"+b+"Fill att");this.AddColorMenuEntry(a,"color",this.fillatt.colorindx,function(a){this.fillatt.Change(parseInt(a),void 0,this.svg_canvas());this.InteractiveRedraw(!0,this.GetColorExec(parseInt(a),"SetFillColor"))}.bind(this),this.fillatt.kind);a.add("sub:style",function(){var a=prompt("Enter fill style id (1001-solid, 3000..3010)",
this.fillatt.pattern);null!=a&&(a=parseInt(a),isNaN(a)||(this.fillatt.Change(void 0,a,this.svg_canvas()),this.InteractiveRedraw(!0,"exec:SetFillStyle("+a+")")))}.bind(this));var h=[1,1001,3001,3002,3003,3004,3005,3006,3007,3010,3021,3022];for(c=0;c<h.length;++c)d=this.createAttFill({std:!1,pattern:h[c],color:this.fillatt.colorindx||1}),d="<svg width='100' height='18'><text x='1' y='12' style='font-size:12px'>"+h[c].toString()+"</text><rect x='40' y='0' width='60' height='18' stroke='none' fill='"+
d.fillcolor()+"'></rect></svg>",a.addchk(this.fillatt.pattern==h[c],d,h[c],function(a){this.fillatt.Change(void 0,parseInt(a),this.svg_canvas());this.InteractiveRedraw(!0,"exec:SetFillStyle("+a+")")}.bind(this));a.add("endsub:");a.add("endsub:")}if(this.markeratt&&this.markeratt.used){a.add("sub:"+b+"Marker att");this.AddColorMenuEntry(a,"color",this.markeratt.color,function(a){this.markeratt.Change(a);this.InteractiveRedraw(!0,this.GetColorExec(a,"SetMarkerColor"))}.bind(this));this.AddSizeMenuEntry(a,
"size",.5,6,.5,this.markeratt.size,function(a){this.markeratt.Change(void 0,void 0,parseFloat(a));this.InteractiveRedraw(!0,"exec:SetMarkerSize("+parseInt(a)+")")}.bind(this));a.add("sub:style");h=[1,2,3,4,5,6,7,8,21,22,23,24,25,26,27,28,29,30,31,32,33,34];for(c=0;c<h.length;++c)b=new D({style:h[c],color:this.markeratt.color,size:1.7}),d="<svg width='60' height='18'><text x='1' y='12' style='font-size:12px'>"+h[c].toString()+"</text><path stroke='black' fill='"+(b.fill?"black":"none")+"' d='"+b.create(40,
8)+"'></path></svg>",a.addchk(this.markeratt.style==h[c],d,h[c],function(a){this.markeratt.Change(void 0,parseInt(a));this.InteractiveRedraw(!0,"exec:SetMarkerStyle("+a+")")}.bind(this));a.add("endsub:");a.add("endsub:")}};m.prototype.TextAttContextMenu=function(a,b){var c=this.GetObject();if(c&&"fTextColor"in c){a.add("sub:"+(b?b:"Text"));this.AddColorMenuEntry(a,"color",c.fTextColor,function(a){this.GetObject().fTextColor=parseInt(a);this.InteractiveRedraw(!0,this.GetColorExec(parseInt(a),"SetTextColor"))}.bind(this));
b=[11,12,13,21,22,23,31,32,33];a.add("sub:align");for(var d=0;d<b.length;++d)a.addchk(b[d]==c.fTextAlign,b[d],b[d],function(a){this.GetObject().fTextAlign=parseInt(a);this.InteractiveRedraw(!0,"exec:SetTextAlign("+a+")")}.bind(this));a.add("endsub:");a.add("sub:font");for(d=1;16>d;++d)a.addchk(d==Math.floor(c.fTextFont/10),d,d,function(a){this.GetObject().fTextFont=10*parseInt(a)+2;this.InteractiveRedraw(!0,"exec:SetTextFont("+this.GetObject().fTextFont+")")}.bind(this));a.add("endsub:");a.add("endsub:")}};
m.prototype.ShowInspector=function(a){var b=this.select_main(),c=this.get_visible_rect(b),d=Math.round(.05*c.width)+"px";c=Math.round(.05*c.height)+"px";var h="root_inspector_"+e.id_counter++;b.append("div").attr("id",h).attr("class","jsroot_inspector").style("position","absolute").style("top",c).style("bottom",c).style("left",d).style("right",d);a&&"object"===typeof a&&a._typename||(a=this.GetObject());e.draw(h,a,"inspect")};m.prototype.FillContextMenu=function(a){var b=this.GetTipName();this.GetObject()&&
"_typename"in this.GetObject()&&(b=this.GetObject()._typename+"::"+b);a.add("header:"+b);this.FillAttContextMenu(a);0<a.size()&&a.add("Inspect",this.ShowInspector);return 0<a.size()};m.prototype.GetShowStatusFunc=function(){var a=this.canv_painter(),b=e.Painter.ShowStatus;a&&"function"===typeof a.ShowCanvasStatus&&(b=a.ShowCanvasStatus.bind(a));b&&"on"===this.enlarge_main("state")&&(b=null);return b};m.prototype.ShowObjectStatus=function(){var a=this.GetObject(),b=this.GetShowStatusFunc();a&&b&&b(this.GetItemName()||
a.fName,a.fTitle||a._typename,a._typename)};m.prototype.FindInPrimitives=function(a){var b=this.pad_painter();if((b=b&&b.pad&&b.pad.fPrimitives?b.pad.fPrimitives.arr:null)&&b.length)for(var c=0;c<b.length;++c){var d=b[c];if("fName"in d&&d.fName===a)return d}return null};m.prototype.FindPainterFor=function(a,b,c){var d=this.pad_painter();d=d?d.painters:null;if(!d)return null;for(var e=0;e<d.length;++e){var f=d[e].GetObject();if(f){if(a&&f===a)return d[e];if(b||c)if(!b||f.fName===b)if(!c||f._typename===
c)return d[e]}}return null};m.prototype.DeleteThis=function(){var a=this.pad_painter();if(a){var b=a.painters.indexOf(this);0<=b&&a.painters.splice(b,1)}this.Cleanup()};m.prototype.ConfigureUserTooltipCallback=function(a,b){a&&"function"===typeof a?(void 0===b&&(b=500),this.UserTooltipCallback=a,this.UserTooltipTimeout=b):(delete this.UserTooltipCallback,delete this.UserTooltipTimeout)};m.prototype.ConfigureUserContextMenu=function(a){a&&"function"===typeof a?this.UserContextMenuFunc=a:delete this.UserContextMenuFunc};
m.prototype.ConfigureUserClickHandler=function(a){var b=this.frame_painter();b&&"function"==typeof b.ConfigureUserClickHandler&&b.ConfigureUserClickHandler(a)};m.prototype.ConfigureUserDblclickHandler=function(a){var b=this.frame_painter();b&&"function"==typeof b.ConfigureUserDblclickHandler&&b.ConfigureUserDblclickHandler(a)};m.prototype.IsUserTooltipCallback=function(){return"function"==typeof this.UserTooltipCallback};m.prototype.ProvideUserTooltip=function(a){if(this.IsUserTooltipCallback()){if(0>=
this.UserTooltipTimeout)return this.UserTooltipCallback(a);"undefined"!=typeof this.UserTooltipTHandle&&(clearTimeout(this.UserTooltipTHandle),delete this.UserTooltipTHandle);if(null==a)return this.UserTooltipCallback(a);this.UserTooltipTHandle=setTimeout(function(a){delete this.UserTooltipTHandle;this.UserTooltipCallback(a)}.bind(this,a),this.UserTooltipTimeout)}};m.prototype.Redraw=function(a){};m.prototype.StartTextDrawing=function(a,b,c,d){c||(c=this.draw_g);a="font"===b?a:e.Painter.getFontDetails(a,
b);b=this.pad_painter();c.call(a.func);c.property("draw_text_completed",!1).property("text_font",a).property("mathjax_use",!1).property("text_factor",0).property("max_text_width",0).property("max_font_size",d).property("_fast_drawing",b&&b._fast_drawing);c.property("_fast_drawing")&&c.property("_font_too_small",d&&5>d||4>a.size)};m.prototype.TextScaleFactor=function(a,b){b||(b=this.draw_g);a&&a>b.property("text_factor")&&b.property("text_factor",a)};m.prototype.GetBoundarySizes=function(a){if(null===
a)return console.warn("empty node in GetBoundarySizes"),{width:0,height:0};var b=a.getBoundingClientRect();0<parseFloat(b.width)&&(b=a.getBBox());a={width:parseInt(b.width),height:parseInt(b.height)};"left"in b?(a.x=parseInt(b.left),a.y=parseInt(b.right)):"x"in b&&(a.x=parseInt(b.x),a.y=parseInt(b.y));return a};m.prototype.FinishTextDrawing=function(a,b){a||(a=this.draw_g);if(a.property("draw_text_completed"))return e.CallBack(b),a.property("max_text_width");b&&(a.node().text_callback=b);var c=null;
if(a.property("mathjax_use")){var d=0;c=a.selectAll(".math_svg");c.each(function(){var b=k.select(this);b.node().parentNode===a.node()&&b.select("svg").empty()&&d++});if(d)return}var h=this,f=0,g=a.property("text_factor"),l=a.property("text_font"),p=a.property("max_font_size"),q=l.size;0<g&&(.9>g||1<g)&&(l.size=Math.floor(l.size/g));p&&l.size>p&&(l.size=p);l.size!=q&&(a.call(l.func),q=l.size);c&&c.each(function(){function b(a){if(!a||"string"!==typeof a||a.indexOf("ex")!==a.length-2)return null;a=
parseFloat(a.substr(0,a.length-2));return isNaN(a)?null:a*q*.5}var c=k.select(this);if(c.node().parentNode===a.node()){var d=c.select("svg");if(d.empty())console.log("MathJax SVG ouptut error");else{var g=b(d.attr("width")),l=b(d.attr("height")),p=d.attr("style");p=p&&0==p.indexOf("vertical-align:")&&p.indexOf("ex;")==p.length-3?b(p.substr(16,p.length-17)):null;g=!g||.5>=g?1:Math.round(g);l=!l||.5>=l?1:Math.round(l);d.attr("width",g).attr("height",l).attr("style",null);e.nodejs||(l=h.GetBoundarySizes(c.node()),
g=1.05*l.width,l=1.05*l.height);c=c.property("_arg");c.valign=p;c.scale&&(f=Math.max(f,g/c.width,l/c.height))}}});c&&c.each(function(){var b=k.select(this);if(b.node().parentNode===a.node()){var c=b.property("_arg"),d=b.select("svg"),e=parseInt(d.attr("width")),g=parseInt(d.attr("height"));isNaN(g)||isNaN(e)?(d=h.GetBoundarySizes(b.node()),e=d.width||e||100,g=d.height||g||10):0<f&&(e/=f,g/=f,d.attr("width",Math.round(e)).attr("height",Math.round(g)));0<f&&c.valign&&(c.valign/=f);null===c.valign&&
(c.valign=(q-g)/2);var l=d=1,p="x",m="y";if(180==c.rotate)d=l=-1;else if(270==c.rotate||90==c.rotate)d=270==c.rotate?-1:1,l=-d,p="y",m="x";"middle"==c.align[0]?c[p]+=d*(c.width-e)/2:"end"==c.align[0]&&(c[p]+=d*(c.width-e));"middle"==c.align[1]?c[m]+=l*(c.height-g)/2:"bottom"==c.align[1]?c[m]+=l*(c.height-g):"bottom-base"==c.align[1]&&(c[m]+=l*(c.height-g-c.valign));e="translate("+c.x+","+c.y+")";c.rotate&&(e+=" rotate("+c.rotate+")");b.attr("transform",e).attr("visibility",null).property("_arg",null)}});
a.selectAll(".hidden_text").attr("visibility",null).attr("class",null).each(function(){var b=k.select(this),c=b.property("_arg");b.property("_arg",null);if(c){e.nodejs?c.scale&&0<g&&(c.box.width/=g,c.box.height/=g):c.plain||c.fast||(c.box=h.GetBoundarySizes(b.node()));c.width&&("middle"==c.align[0]?c.x+=c.width/2:"end"==c.align[0]&&(c.x+=c.width));c.dx=c.dy=0;c.plain?b.attr("text-anchor",c.align[0]):(b.attr("text-anchor","start"),c.dx=("middle"==c.align[0]?-.5:"end"==c.align[0]?-1:0)*c.box.width);
c.height&&(0===c.align[1].indexOf("bottom")?c.y+=c.height:"middle"==c.align[1]&&(c.y+=c.height/2));c.plain?"top"==c.align[1]?b.attr("dy",".8em"):"middle"==c.align[1]&&(e.browser.isIE||e.nodejs?b.attr("dy",".4em"):b.attr("dominant-baseline","middle")):c.dy=("top"==c.align[1]?c.top_shift||1:"middle"==c.align[1]?c.mid_shift||.5:0)*c.box.height;c.rotate||(c.x+=c.dx,c.y+=c.dy,c.dx=c.dy=0);var d=c.x||c.y?"translate("+Math.round(c.x)+","+Math.round(c.y)+")":"";c.rotate&&(d+=" rotate("+Math.round(c.rotate)+
")");if(c.dx||c.dy)d+=" translate("+Math.round(c.dx)+","+Math.round(c.dy)+")";d&&b.attr("transform",d);e.browser.isWebKit&&a.node().insertAdjacentHTML&&c.large_latex&&(c=b.node().outerHTML,b.remove(),a.node().insertAdjacentHTML("beforeend",c))}});b||(b=a.node().text_callback);a.node().text_callback=null;a.property("draw_text_completed",!0);e.CallBack(b);return a.property("max_text_width")};m.prototype.produceLatex=function(a,b,c,d){function h(a,b){if("string"==typeof b){a.rect||(a.rect={x:a.x,y:a.y,
height:0,width:0});var d=-a.x;a.x+=b.length*c.font.aver_width*a.fsize;var f=a.x;var g=-(a.y-1.1*a.fsize);var l=a.y+.1*a.fsize}else a.rect||(a.rect=e.extend({},b)),d=-b.x,f=b.x+b.width,g=-b.y,l=b.y+b.height;b=a.rect;d+=b.x;f-=b.x+b.width;g+=b.y;l-=b.y+b.height;0<d&&(b.x-=d,b.width+=d);0<f&&(b.width+=f);0<g&&(b.y-=g,b.height+=g);0<l&&(b.height+=l);if(a.parent)return h(a.parent,b);c.text_rect=b;a=b.height;d=b.y+b.height/2;0<a&&(c.mid_shift=-d/a||.001,c.top_shift=-b.y/a||.001)}function f(a){if(.01>Math.abs(a))return null;
if(a==Math.round(a))return Math.round(a)+"em";a=a.toFixed(2);0==a.indexOf("0.")?a=a.substr(1):0==a.indexOf("-0.")&&(a="-."+a.substr(3));"0"==a[a.length-1]&&(a=a.substr(0,a.length-1));return a+"em"}function g(a,b,d){if(e.nodejs||!b||b.empty())return d||{height:0,width:0};var f=[];for(d=b.node();d&&d!=c.mainnode;)f.push(d),d=d.parentNode;b.selectAll("tspan").each(function(){f.push(this)});b=k.select(c.mainnode).selectAll("tspan");3<b.size()&&(c.large_latex=!0);b.each(function(){0>f.indexOf(this)&&k.select(this).attr("display",
"none")});a=a.GetBoundarySizes(c.mainnode);b.each(function(){0>f.indexOf(this)&&k.select(this).attr("display",null)});return a}d||(d={lvl:0,x:0,y:0,dx:0,dy:-.1,fsize:c.font_size,parent:null},c.mainnode=a.node());var l=[{name:"#it{"},{name:"#bf{"},{name:"#underline{",deco:"underline"},{name:"#overline{",deco:"overline"},{name:"#strike{",deco:"line-through"},{name:"kern[",arg:"float"},{name:"lower[",arg:"float"},{name:"scale[",arg:"float"},{name:"#color[",arg:"int"},{name:"#font[",arg:"int"},{name:"_{"},
{name:"^{"},{name:"#bar{",deco:"overline"},{name:"#hat{",accent:"\u02c6"},{name:"#check{",accent:"\u02c7"},{name:"#acute{",accent:"\u02ca"},{name:"#grave{",accent:"\u02cb"},{name:"#dot{",accent:"\u02d9"},{name:"#ddot{",accent:"\u02ba"},{name:"#tilde{",accent:"\u02dc"},{name:"#slash{",accent:"\u2215"},{name:"#vec{",accent:"\u02ed"},{name:"#frac{"},{name:"#splitline{"},{name:"#sqrt[",arg:"int"},{name:"#sqrt{"},{name:"#sum",special:"\u2211",w:.8,h:.9},{name:"#int",special:"\u222b",w:.3,h:1},{name:"#left[",
right:"#right]",braces:"[]"},{name:"#left(",right:"#right)",braces:"()"},{name:"#left{",right:"#right}",braces:"{}"},{name:"#left|",right:"#right|",braces:"||"},{name:"#[]{",braces:"[]"},{name:"#(){",braces:"()"},{name:"#{}{",braces:"{}"},{name:"#||{",braces:"||"}],p=!1,q,m,v,n=null;for(m=null;b;){var y=b.length;var t=q=null;for(m=0;m<l.length;++m){var r=b.indexOf(l[m].name);0<=r&&r<y&&(y=r,q=l[m])}if(!q&&!p){p=e.Painter.translateLaTeX(b);if(!d.lvl&&p==b)return 0;h(d,p);d.accent&&1==p.length?(b=a.append("svg:tspan").text(p),
t=g(this,b,{width:1E4}),b=Math.min(t.width/d.fsize,.5),a.append("svg:tspan").attr("dx",f(d.dx-b)).attr("dy",f(d.dy-.2)).text(d.accent),d.dy=.2,d.dx=Math.max(.2,b-.2),d.accent=!1):a.text(p);break}0<y&&(p=e.Painter.translateLaTeX(b.substr(0,y)),0<p.length&&(h(d,p),a.append("svg:tspan").attr("dx",f(d.dx)).attr("dy",f(d.dy)).text(p),d.dx=d.dy=0),n=null,delete d.special,delete d.next_super_dy);if(!q)break;b=b.substr(y+q.name.length);y=v=a.append("svg:tspan");m=n;n={lvl:d.lvl+1,x:d.x,y:d.y,fsize:d.fsize,
dx:0,dy:0,parent:d};p=!0;if(q.arg){r=b.indexOf("]{");if(0>r)return console.log("missing argument for ",q.name),!1;t=b.substr(0,r);if("int"==q.arg){if(t=parseInt(t),isNaN(t))return console.log("wrong int argument",b.substr(0,r)),!1}else if("float"==q.arg&&(t=parseFloat(t),isNaN(t)))return console.log("wrong float argument",b.substr(0,r)),!1;b=b.substr(r+2)}r=d.dy;var x=d.dx,u=null,A=1,z="{",w="}";d.dy=d.dx=0;if(q.special)v.attr("dx",f(x)).attr("dy",f(r)).text(q.special),x=r=0,d.special=q,t=g(this,
v),t.width&&t.height&&(q.w=t.width/d.fsize,q.h=t.height/d.fsize-.1);else{if(q.braces)n.left_cont=v.append("svg:tspan"),n.left=n.left_cont.append("svg:tspan").text(q.braces[0]),y=v.append("svg:tspan"),n.left_rect={y:d.y-1.1*d.fsize,height:1.2*d.fsize,x:d.x,width:.6*d.fsize},h(d,n.left_rect),n.braces=q,q.right&&(z=q.name,w=q.right);else if(q.deco)n.deco=q.deco;else if(q.accent)n.accent=q.accent;else switch(q.name){case "#color[":this.get_color(t)&&v.attr("fill",this.get_color(t));break;case "#kern[":x+=
t;break;case "#lower[":d.dy-=t;r+=t;break;case "scale[":A=t;break;case "#font[":e.Painter.getFontDetails(t).setFont(v,"without-size");break;case "#it{":d.italic=!0;for(u=d;u=u.parent;)if(void 0!==u.italic){d.italic=!u.italic;break}v.attr("font-style",d.italic?"italic":"normal");break;case "#bf{":d.bold=!0;for(u=d;u=u.parent;)if(void 0!==u.bold){d.bold=!u.bold;break}v.attr("font-weight",d.bold?"bold":"normal");break;case "#underline{":v.attr("text-decoration","underline");break;case "#overline{":v.attr("text-decoration",
"overline");break;case "_{":A=.6;n.script="sub";d.special?(d.dx=d.special.w,d.dy=-.7,x-=d.dx,r-=d.dy):(x+=.1*A,r+=.4*A,n.y+=.4*n.fsize,d.dy=-.4*A,m&&"super"===m.script&&(t=g(this,m.node,m.rect),n.width_limit=t.width,x-=(t.width/n.fsize+.1)*A));break;case "^{":A=.6;n.script="super";d.special?(d.dx=d.special.w,d.dy=d.special.h,x-=d.dx,r-=d.dy):(d.dy=.6*A,d.next_super_dy&&(d.dy-=d.next_super_dy),x+=.1*A,r-=d.dy,n.y-=.4*n.fsize,m&&"sub"===m.script&&(t=g(this,m.node,m.rect),n.width_limit=t.width,x-=(t.width/
n.fsize+.1)*A));break;case "#frac{":case "#splitline{":n.first=v;n.two_lines=!0;n.need_middle="#frac{"==q.name;n.x0=n.x;r-=.6;d.dy=-.6;break;case "#sqrt{":t=2;case "#sqrt[":n.square_root=v.append("svg:tspan"),n.square_root.append("svg:tspan").text(3==t?"\u221b":4==t?"\u221c":"\u221a"),y=v.append("svg:tspan"),n.sqrt_rect={y:d.y-1.1*d.fsize,height:1.2*d.fsize,x:0,width:.7*d.fsize},h(d,n.sqrt_rect)}1!==A&&(v.attr("font-size",Math.round(100*A)+"%"),n.fsize*=A,x/=A,r/=A);d.special&&!n.script&&delete d.special;
delete d.next_super_dy;for(n.node=v;;){n.x+=x*n.fsize;n.y+=r*n.fsize;v.attr("dx",f(x)).attr("dy",f(r));x=r=0;r=-1;for(m=1;0!=m&&++r<b.length;)b.indexOf(z,r)===r?m++:b.indexOf(w,r)===r&&m--;if(0!=m)return console.log("mismatch with open "+z+" and close "+w+" braces in Latex",b),!1;q=b.substr(0,r);if(!this.produceLatex(y,q,c,n))return!1;d.x=n.x;d.y=n.y;d.dx+=n.dx*n.fsize/d.fsize;d.dy+=n.dy*n.fsize/d.fsize;b=b.substr(r+w.length);n.width_limit&&(t=g(this,y,n.rect),t.width<n.width_limit&&(d.dx+=(n.width_limit-
t.width)/d.fsize),delete n.width_limit);d.special&&(t=g(this,y,n.rect),d.dx-=t.width/d.fsize);if(n.square_root){x=2;A=1;z=0;x=1;w=g(this,n.square_root,n.sqrt_rect);q=g(this,y,n.rect);q.height>w.height&&0<w.height&&(x=q.height/w.height*1.2,z=(q.y+q.height-(w.y+w.height))/d.fsize/x,n.square_root.style("font-size",Math.round(100*x)+"%").attr("dy",f(z)));x=q.width/n.fsize/x;v="";for(w=Math.round(Math.max(3*x,2));w--;)v+="\u203e";n.square_root.append("svg:tspan").attr("dy",f(-.25)).text(v);n.square_root.append("svg:tspan").attr("dy",
f(.25-z)).attr("dx",f(-v.length/3-.2)).text("\u2009");break}if(n.deco){if(0==y.selectAll("tspan").size()){y.attr("text-decoration",n.deco);break}q=g(this,y,n.rect);x=q.width/n.fsize;switch(n.deco){case "underline":z=.35;w=1.2;q="\uff3f";break;case "overline":z=-.35;w=3;q="\u203e";break;default:z=0,w=1.8,q="\u23af"}w=Math.round(Math.max(x*w,1));for(v="";w--;)v+=q;y.append("svg:tspan").attr("dx",f(-x-.2)).attr("dy",f(z)).text(v);d.dy-=z;break}if(n.braces){w=g(this,n.left_cont,n.left_rect);q=g(this,
y,n.rect);x=1;y=0;1.2*w.height<q.height&&(x=q.height/w.height,y=0,n.left.style("font-size",Math.round(100*x)+"%").attr("dy",f(y)),n.left_cont.append("svg:tspan").attr("dx",f(-.2)).attr("dy",f(-y*x)).text("\u2009"),d.next_super_dy=-.3*x);n.left_rect.y=d.y;n.left_rect.height*=x;h(d,n.left_rect);z=v.append("svg:tspan").attr("dx",f(d.dx)).attr("dy",f(d.dy));d.dx=d.dy=0;1!=x&&z.append("svg:tspan").attr("dx",f(-.2)).text("\u2009");z=z.append("svg:tspan").text(n.braces.braces[1]);1!=x&&(z.style("font-size",
Math.round(100*x)+"%").attr("dy",f(y)),d.dy=-y*x);break}if(n.first&&n.second){y=g(this,n.first,n.rect1);v=g(this,n.second,n.rect);y=y.width/n.fsize;q=v.width/n.fsize;t=Math.max(q,y);if(n.need_middle){t=Math.round(Math.max(t,1)+.3);for(v="";v.length<t;)v+="\u2014";a.append("svg:tspan").attr("dx",f(-.5*(t+q))).attr("dy",f(d.dy-.2)).text(v);d.dy=.2;d.dx=.2}else d.dx=.2,q<y&&(d.dx+=.5*(y-q));n.need_middle||"middle"==c.align[0]?(n.first.attr("dx",f(.5*(t-y))),n.second.attr("dx",f(-.5*(q+y)))):"end"==c.align[0]?
(y<q&&n.first.attr("dx",f(q-y)),n.second.attr("dx",f(-q))):n.second.attr("dx",f(-y));delete n.first;delete n.second}if(!n.two_lines)break;if("{"!=b[0])return console.log("missing { for second line",b),!1;b=b.substr(1);v=y=a.append("svg:tspan");n.two_lines=!1;n.rect1=n.rect;delete n.rect;n.x=n.x0;n.second=v;r=d.dy+1.6;d.dy=-.4;n.dx=n.dy=0}}}return!0};m.prototype.DrawText=function(a){var b=a.text||"",c=["start","middle"];"string"==typeof a.align?(c=a.align.split(";"),1==c.length&&c.push("middle")):
"number"==typeof a.align&&(3<=a.align/10?c[0]="end":2<=a.align/10&&(c[0]="middle"),0==a.align%10?c[1]="bottom":1==a.align%10?c[1]="bottom-base":3==a.align%10&&(c[1]="top"));a.draw_g=a.draw_g||this.draw_g;void 0===a.latex&&(a.latex=1);a.align=c;a.x=a.x||0;a.y=a.y||0;a.scale=a.width&&a.height&&!a.font_size;a.width=a.width||0;a.height=a.height||0;if(a.draw_g.property("_fast_drawing"))if(a.scale){if(4>a.height)return 0}else if(a.font_size){if(4>a.font_size)return 0}else if(a.draw_g.property("_font_too_small"))return 0;
if(void 0!==e.gStyle.MathJax){switch(e.gStyle.MathJax){case 0:e.gStyle.Latex=2;break;case 2:e.gStyle.Latex=4;break;default:e.gStyle.Latex=3}delete e.gStyle.MathJax}if("string"==typeof e.gStyle.Latex)switch(e.gStyle.Latex){case "off":e.gStyle.Latex=0;break;case "symbols":e.gStyle.Latex=1;break;case "MathJax":case "mathjax":case "math":e.gStyle.Latex=3;break;case "AlwaysMathJax":case "alwaysmath":case "alwaysmathjax":e.gStyle.Latex=4;break;default:c=parseInt(e.gStyle.Latex),e.gStyle.Latex=!isNaN(c)&&
0<=c&&4>=c?c:2}c=a.draw_g.property("text_font");var d=2==a.latex;1===a.latex&&(d=3<e.gStyle.Latex||3==e.gStyle.Latex&&e.Painter.isAnyLatex(b));if(!d||a.nomathjax)return d=a.draw_g.append("svg:text"),a.color&&d.attr("fill",a.color),a.font_size?d.attr("font-size",a.font_size):a.font_size=c.size,a.font=c,a.plain=!a.latex||2>e.gStyle.Latex||0===this.produceLatex(d,b,a),a.plain&&(a.latex&&1==e.gStyle.Latex&&(b=u.translateLaTeX(b)),d.text(b)),a.box=e.nodejs||e.gStyle.ApproxTextSize||a.fast?a.text_rect||
{height:1.2*a.font_size,width:e.Painter.approxTextWidth(c,b)}:this.GetBoundarySizes(d.node()),d.attr("class","hidden_text").attr("visibility","hidden").property("_arg",a),a.box.width>a.draw_g.property("max_text_width")&&a.draw_g.property("max_text_width",a.box.width),a.scale&&this.TextScaleFactor(1.05*a.box.width/a.width,a.draw_g),a.scale&&this.TextScaleFactor(1*a.box.height/a.height,a.draw_g),a.box.width;b=e.Painter.translateMath(b,a.latex,a.color,this);var h=a.draw_g.append("svg:g").attr("class",
"math_svg").attr("visibility","hidden").property("_arg",a);a.draw_g.property("mathjax_use",!0);if(e.nodejs)return e.nodejs_mathjax||(e.nodejs_mathjax=require("mathjax-node"),e.nodejs_mathjax.config({TeX:{extensions:["color.js"]},SVG:{mtextFontInherit:!0,minScaleAdjust:100,matchFontHeight:!0,useFontCache:!1}}),e.nodejs_mathjax.start()),0==b.indexOf("\\(")&&b.lastIndexOf("\\)")==b.length-2&&(b=b.substr(2,b.length-4)),e.nodejs_mathjax.typeset({jsroot_painter:this,jsroot_drawg:a.draw_g,jsroot_fog:h,ex:c.size,
math:b,useFontCache:!1,useGlobalCache:!1,format:"TeX",svg:!0},function(a,b){a.errors?(console.log("MathJax error",b.math),b.jsroot_fog.html("<svg></svg>")):b.jsroot_fog.html(a.svg);b.jsroot_painter.FinishTextDrawing(b.jsroot_drawg)}),0;var f=document.createElement("p");k.select(f).style("visibility","hidden").style("overflow","hidden").style("position","absolute").style("font-size",c.size+"px").style("font-family",c.name).html("<mtext>"+b+"</mtext>");document.body.appendChild(f);h.property("_element",
f);var g=this;e.AssertPrerequisites("mathjax",function(){MathJax.Hub.Typeset(f,["FinishMathjax",g,a.draw_g,h]);MathJax.Hub.Queue(["FinishMathjax",g,a.draw_g,h])});return 0};m.prototype.FinishMathjax=function(a,b,c){if(b.node().parentNode===a.node()&&(c=b.property("_element"))){var d=k.select(c).select("svg");if(d.empty()){var e=k.select(c).select("merror");if(e.empty())return;console.warn("MathJax error",e.text());var f=b.property("_arg");f&&2!=f.latex?(f.nomathjax=!0,b.remove(),this.DrawText(f)):
b.append("svg").attr("width",Math.min(20,e.text().length+5)+"ex").attr("height","3ex").style("vertical-align","0ex").append("text").style("font-size","12px").style("fill","red").attr("x","0").attr("y","2ex").text("Err: "+e.text())}else d.remove(),b.append(function(){return d.node()});b.property("_element",null);document.body.removeChild(c);this.FinishTextDrawing(a)}};u.SelectActivePad=function(a){a.active?(this.$active_pp&&"function"==typeof this.$active_pp.SetActive&&this.$active_pp.SetActive(!1),
(this.$active_pp=a.pp)&&"function"==typeof this.$active_pp.SetActive&&this.$active_pp.SetActive(!0)):this.$active_pp===a.pp&&delete this.$active_pp};u.GetActivePad=function(){return this.$active_pp};J.prototype=Object.create(m.prototype);J.prototype.hints_layer=function(){var a=this.canv_painter();return a?a.svg_layer("info_layer"):k.select(null)};J.prototype.IsTooltipShown=function(){if(!this.tooltip_enabled||!this.IsTooltipAllowed())return!1;var a=this.hints_layer().select(".objects_hints");return a.empty()?
!1:a.property("hints_pad")==this.pad_name};J.prototype.ProcessTooltipEvent=function(a,b){function c(a){for(var b=0;b<d.length&&a<F;++b){var c=d[b];c&&c.y>=a-5&&c.y<=a+c.height+5&&(a=c.y+10,b=-1)}return a}void 0!==b&&(this.tooltip_enabled=b);a&&a.handler&&(b=this.draw_g?this.draw_g.select(".main_layer"):null,!b||b.empty()?a=null:a.touch?a=(a=k.touches(b.node()))&&1==a.length?{touch:!0,x:a[0][0],y:a[0][1]}:null:(a=k.mouse(b.node()),a={touch:!1,x:a[0],y:a[1]}));var d=[],h=0,f=0,g=0,l=!1,p=11;b=this.GetFrameRect();
var m=this.pad_width(),u=this.pad_painter(),v=e.Painter.getFontDetails(160,p),n=this.GetShowStatusFunc(),y=!this.IsTooltipAllowed()||!this.tooltip_enabled;if(void 0===a||y&&!n)a=null;a&&y&&(a.disabled=!0);a&&(a.painters=!0);u&&(d=u.GetTooltips(a));a&&a.touch&&(p=15);for(var t=0;t<d.length;++t){var r=d[t];if(r)if(r.painter&&void 0!==r.user_info&&r.painter.ProvideUserTooltip(r.user_info),r.lines&&0!==r.lines.length){for(var x=0;x<t;++x){var w=d[x],A=!1;if(w&&w.lines.length===r.lines.length){for(var z=
0;z<r.lines.length&&!A;++z)w.lines[z]!==r.lines[z]&&(A=!0);if(!A){d[t]=null;break}}}if(d[t]){h++;for(z=0;z<r.lines.length;++z)f=Math.max(f,r.lines[z].length);r.height=Math.round(r.lines.length*p*1.2+6-p*(1.2-1));void 0!==r.color1&&"none"!==r.color1&&(0!==g&&g!==r.color1&&(l=!0),g=r.color1)}}else d[t]=null}t=this.hints_layer();g=t.select(".objects_hints");if(n){A=w=z="";r=null;var C=1E10,D=null,B=a?Math.round(a.x)+","+Math.round(a.y):"";for(x=0;x<(d?d.length:0);++x)if(d[x]){r||(r=d[x]);if(d[x].exact&&
(!r||!r.exact)){r=d[x];break}if(a&&void 0!==d[x].x&&void 0!==d[x].y){var E=(a.x-d[x].x)*(a.x-d[x].x)+(a.y-d[x].y)*(a.y-d[x].y);E<C&&(C=E,D=d[x])}}r&&r.exact||!(400>C)||(r=D);r&&(w=r.lines&&1<r.lines.length?r.lines[0]:r.name,z=r.title||"",A=r.line,!A&&r.lines&&(A=r.lines.slice(1).join(" ")));n(w,z,A,B)}if(!a||y||0===d.length||0===f||15<h)g.remove();else{g.empty()&&(g=t.append("svg:g").attr("class","objects_hints").style("pointer-events","none"));r={x:0,y:0};t=b.transform||"";u.iscan||(u.CalcAbsolutePosition(this.svg_pad(),
r),t="translate("+r.x+","+r.y+") "+t);g.attr("transform",t).property("last_point",a).property("hints_pad",this.pad_name);u=g.property("viewmode")||"";f=0;n=a.x+b.hint_delta_x;1<h?(z=t=.5,"left"==u?z=.7:"right"==u&&(t=.3),n<=t*b.width?(u="left",n=20):n>=z*b.width?(u="right",n=b.width-60):n=g.property("startx")):(u="single",n+=15);u!==g.property("viewmode")&&(g.property("viewmode",u),g.selectAll("*").remove());x=y=10;A=w=-1111;C=-r.y;var F=this.pad_height("")-b.y-r.y;for(t=0;t<d.length;++t)if(D=function(){return function(a,
b,c){return function(a){return.8>a?"0":5*(a-.8)}}},r=d[t],B=g.select(".painter_hint_"+t),null===r)B.remove();else{(E=B.empty())&&(B=g.append("svg:svg").attr("class","painter_hint_"+t).attr("opacity",0).style("overflow","hidden").style("pointer-events","none"));"single"==u?y=a.touch?a.y-r.height-5:Math.min(a.y+15,F-r.height-3)+b.hint_delta_y:(x=c(x),-1111===w&&-1111===A&&(w=A=r.x),w=Math.min(w,r.x),A=Math.min(A,r.x));B.attr("x",n).attr("y",y).property("curry",y).property("gapy",x);y+=r.height+5;x+=
r.height+5;E||B.selectAll("*").remove();B.attr("width",60).attr("height",r.height);z=B.append("rect").attr("x",0).attr("y",0).attr("width",60).attr("height",r.height).attr("fill","lightgrey").style("pointer-events","none");if(1<h){var G=l?r.color1:r.color2;void 0!==G&&"none"!==G&&z.attr("stroke",G).attr("stroke-width",r.exact?3:1)}for(z=0;z<(r.lines?r.lines.length:0);z++)null!==r.lines[z]&&(G=B.append("svg:text").attr("text-anchor","start").attr("x",3).attr("y",3+z*p*1.2).attr("dy",".8em").attr("fill",
"black").style("pointer-events","none").call(v.func).text(r.lines[z]),G=this.GetBoundarySizes(G.node()),f=Math.max(f,G.width));E&&(0<e.gStyle.TooltipAnimation?B.transition().duration(e.gStyle.TooltipAnimation).attrTween("opacity",D()):B.attr("opacity",1))}f+=6;a=g.selectAll("svg");"right"==u&&n+f>b.width-20&&(n=b.width-f-20,a.attr("x",n));"single"==u&&n+f>m-b.x&&n>f+20&&(n-=f+20,a.attr("x",n));if("single"!==u&&x<F&&x!==y)w<=n+f+5&&A>=n-5&&a.attr("y",function(){return k.select(this).property("gapy")});
else if("single"!==u&&y>F){var H=Math.max(F-y-10,C);0>H&&a.attr("y",function(){return k.select(this).property("curry")+H})}10<f&&a.attr("width",f).select("rect").attr("width",f);g.property("startx",n)}};e.TCanvasStatusBits={kShowEventStatus:e.BIT(15),kAutoExec:e.BIT(16),kMenuBar:e.BIT(17),kShowToolBar:e.BIT(18),kShowEditor:e.BIT(19),kMoveOpaque:e.BIT(20),kResizeOpaque:e.BIT(21),kIsGrayscale:e.BIT(22),kShowToolTips:e.BIT(23)};e.EAxisBits={kTickPlus:e.BIT(9),kTickMinus:e.BIT(10),kAxisRange:e.BIT(11),
kCenterTitle:e.BIT(12),kCenterLabels:e.BIT(14),kRotateTitle:e.BIT(15),kPalette:e.BIT(16),kNoExponent:e.BIT(17),kLabelsHori:e.BIT(18),kLabelsVert:e.BIT(19),kLabelsDown:e.BIT(20),kLabelsUp:e.BIT(21),kIsInteger:e.BIT(22),kMoreLogLabels:e.BIT(23),kDecimals:e.BIT(11)};u.drawRawText=function(a,b,c){c=new w;c.txt=b;c.SetDivId(a);c.RedrawObject=function(a){this.txt=a;this.Draw();return!0};c.Draw=function(){var a=this.txt._typename&&"TObjString"==this.txt._typename?this.txt.fString:this.txt.value;"string"!=
typeof a&&(a="<undefined>");var b=this.txt.mathjax||4==e.gStyle.Latex;if(!(b||"as_is"in this.txt)){var c=a.split("\n");a="";for(var g=0;g<c.length;++g)a+="<pre style='margin:0'>"+c[g]+"</pre>"}var l=this.select_main();c=l.select("div");c.empty()&&(c=l.append("div").style("max-width","100%").style("max-height","100%").style("overflow","auto"));c.html(a);this.SetDivId(this.divid);b&&e.AssertPrerequisites("mathjax",function(){MathJax.Hub.Typeset(l.node())})};c.Draw();return c.DrawingReady()};e.RegisterForResize=
function(a,b){function c(){d=null;document.body.style.cursor="wait";if("function"==typeof a)a();else if("object"==typeof a&&"function"==typeof a.CheckResize)a.CheckResize();else if("string"==typeof a){var b=k.select("#"+a);if(!b.empty()){var c=b.property("mdi");c?c.CheckMDIResize():e.resize(b.node())}}document.body.style.cursor="auto"}if(a){var d=null,h=b?b:300;20>h&&(h=20);window.addEventListener("resize",function(){null!==d&&clearTimeout(d);d=setTimeout(c,h)})}};e.DrawFuncs={lst:[{name:"TCanvas",
icon:"img_canvas",prereq:"v6",func:"JSROOT.Painter.drawCanvas",opt:";grid;gridx;gridy;tick;tickx;ticky;log;logx;logy;logz",expand_item:"fPrimitives"},{name:"TPad",icon:"img_canvas",prereq:"v6",func:"JSROOT.Painter.drawPad",opt:";grid;gridx;gridy;tick;tickx;ticky;log;logx;logy;logz",expand_item:"fPrimitives"},{name:"TSlider",icon:"img_canvas",prereq:"v6",func:"JSROOT.Painter.drawPad"},{name:"TFrame",icon:"img_frame",prereq:"v6",func:"JSROOT.Painter.drawFrame"},{name:"TPave",icon:"img_pavetext",prereq:"v6;hist",
func:"JSROOT.Painter.drawPave"},{name:"TPaveText",icon:"img_pavetext",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"},{name:"TPavesText",icon:"img_pavetext",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"},{name:"TPaveStats",icon:"img_pavetext",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"},{name:"TPaveLabel",icon:"img_pavelabel",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"},{name:"TDiamond",icon:"img_pavelabel",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"},{name:"TLatex",icon:"img_text",
prereq:"more2d",func:"JSROOT.Painter.drawText",direct:!0},{name:"TMathText",icon:"img_text",prereq:"more2d",func:"JSROOT.Painter.drawText",direct:!0},{name:"TText",icon:"img_text",prereq:"more2d",func:"JSROOT.Painter.drawText",direct:!0},{name:/^TH1/,icon:"img_histo1d",prereq:"v6;hist",func:"JSROOT.Painter.drawHistogram1D",opt:";hist;P;P0;E;E1;E2;E3;E4;E1X0;L;LF2;B;B1;A;TEXT;LEGO;same",ctrl:"l"},{name:"TProfile",icon:"img_profile",prereq:"v6;hist",func:"JSROOT.Painter.drawHistogram1D",opt:";E0;E1;E2;p;AH;hist"},
{name:"TH2Poly",icon:"img_histo2d",prereq:"v6;hist",func:"JSROOT.Painter.drawHistogram2D",opt:";COL;COL0;COLZ;LCOL;LCOL0;LCOLZ;LEGO;TEXT;same",expand_item:"fBins",theonly:!0},{name:"TProfile2Poly",sameas:"TH2Poly"},{name:"TH2PolyBin",icon:"img_histo2d",draw_field:"fPoly"},{name:/^TH2/,icon:"img_histo2d",prereq:"v6;hist",func:"JSROOT.Painter.drawHistogram2D",opt:";COL;COLZ;COL0;COL1;COL0Z;COL1Z;COLA;BOX;BOX1;PROJ;PROJX1;PROJX2;PROJX3;PROJY1;PROJY2;PROJY3;SCAT;TEXT;TEXTE;TEXTE0;CONT;CONT1;CONT2;CONT3;CONT4;ARR;SURF;SURF1;SURF2;SURF4;SURF6;E;A;LEGO;LEGO0;LEGO1;LEGO2;LEGO3;LEGO4;same",
ctrl:"colz"},{name:"TProfile2D",sameas:"TH2"},{name:/^TH3/,icon:"img_histo3d",prereq:"v6;hist3d",func:"JSROOT.Painter.drawHistogram3D",opt:";SCAT;BOX;BOX2;BOX3;GLBOX1;GLBOX2;GLCOL"},{name:"THStack",icon:"img_histo1d",prereq:"v6;hist",func:"JSROOT.Painter.drawHStack",expand_item:"fHists",opt:"NOSTACK;HIST;E;PFC;PLC"},{name:"TPolyMarker3D",icon:"img_histo3d",prereq:"v6;hist3d",func:"JSROOT.Painter.drawPolyMarker3D"},{name:"TPolyLine3D",icon:"img_graph",prereq:"3d",func:"JSROOT.Painter.drawPolyLine3D",
direct:!0},{name:"TGraphStruct"},{name:"TGraphNode"},{name:"TGraphEdge"},{name:"TGraphTime",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawGraphTime",opt:"once;repeat;first",theonly:!0},{name:"TGraph2D",icon:"img_graph",prereq:"v6;hist3d",func:"JSROOT.Painter.drawGraph2D",opt:";P;PCOL",theonly:!0},{name:"TGraph2DErrors",icon:"img_graph",prereq:"v6;hist3d",func:"JSROOT.Painter.drawGraph2D",opt:";P;PCOL;ERR",theonly:!0},{name:"TGraphPolargram",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawGraphPolargram",
theonly:!0},{name:"TGraphPolar",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawGraphPolar",opt:";F;L;P;PE",theonly:!0},{name:/^TGraph/,icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawGraph",opt:";L;P"},{name:"TEfficiency",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawEfficiency",opt:";AP"},{name:"TCutG",sameas:"TGraph"},{name:/^RooHist/,sameas:"TGraph"},{name:/^RooCurve/,sameas:"TGraph"},{name:"RooPlot",icon:"img_canvas",prereq:"more2d",func:"JSROOT.Painter.drawRooPlot"},
{name:"TMultiGraph",icon:"img_mgraph",prereq:"more2d",func:"JSROOT.Painter.drawMultiGraph",expand_item:"fGraphs"},{name:"TStreamerInfoList",icon:"img_question",prereq:"hierarchy",func:"JSROOT.Painter.drawStreamerInfo"},{name:"TPaletteAxis",icon:"img_colz",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"},{name:"TWebPainting",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawWebPainting"},{name:"TCanvasWebSnapshot",icon:"img_canvas",prereq:"v6",func:"JSROOT.Painter.drawPadSnapshot"},{name:"TPadWebSnapshot",
sameas:"TCanvasWebSnapshot"},{name:"kind:Text",icon:"img_text",func:e.Painter.drawRawText},{name:"TObjString",icon:"img_text",func:e.Painter.drawRawText},{name:"TF1",icon:"img_tf1",prereq:"math;more2d",func:"JSROOT.Painter.drawFunction"},{name:"TF2",icon:"img_tf2",prereq:"math;hist",func:"JSROOT.Painter.drawTF2"},{name:"TSpline3",icon:"img_tf1",prereq:"more2d",func:"JSROOT.Painter.drawSpline"},{name:"TSpline5",icon:"img_tf1",prereq:"more2d",func:"JSROOT.Painter.drawSpline"},{name:"TEllipse",icon:"img_graph",
prereq:"more2d",func:"JSROOT.Painter.drawEllipse",direct:!0},{name:"TArc",sameas:"TEllipse"},{name:"TCrown",sameas:"TEllipse"},{name:"TPie",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawPie",direct:!0},{name:"TLine",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawLine",direct:!0},{name:"TArrow",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawArrow",direct:!0},{name:"TPolyLine",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawPolyLine",direct:!0},{name:"TCurlyLine",
sameas:"TPolyLine"},{name:"TCurlyArc",sameas:"TPolyLine"},{name:"TGaxis",icon:"img_graph",prereq:"v6",func:"JSROOT.Painter.drawGaxis"},{name:"TLegend",icon:"img_pavelabel",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"},{name:"TBox",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawBox",direct:!0},{name:"TWbox",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawBox",direct:!0},{name:"TSliderBox",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawBox",direct:!0},{name:"TAxis3D",
prereq:"v6;hist3d",func:"JSROOT.Painter.drawAxis3D"},{name:"TMarker",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawMarker",direct:!0},{name:"TPolyMarker",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawPolyMarker",direct:!0},{name:"TASImage",icon:"img_mgraph",prereq:"more2d",func:"JSROOT.Painter.drawASImage"},{name:"TJSImage",icon:"img_mgraph",prereq:"more2d",func:"JSROOT.Painter.drawJSImage",opt:";scale;center"},{name:"TGeoVolume",icon:"img_histo3d",prereq:"geom",func:"JSROOT.Painter.drawGeoObject",
expand:"JSROOT.GEO.expandObject",opt:";more;all;count;projx;projz;wire;dflt",ctrl:"dflt"},{name:"TEveGeoShapeExtract",icon:"img_histo3d",prereq:"geom",func:"JSROOT.Painter.drawGeoObject",expand:"JSROOT.GEO.expandObject",opt:";more;all;count;projx;projz;wire;dflt",ctrl:"dflt"},{name:"ROOT::Experimental::REveGeoShapeExtract",icon:"img_histo3d",prereq:"geom",func:"JSROOT.Painter.drawGeoObject",expand:"JSROOT.GEO.expandObject",opt:";more;all;count;projx;projz;wire;dflt",ctrl:"dflt"},{name:"TGeoOverlap",
icon:"img_histo3d",prereq:"geom",expand:"JSROOT.GEO.expandObject",func:"JSROOT.Painter.drawGeoObject",opt:";more;all;count;projx;projz;wire;dflt",dflt:"dflt",ctrl:"expand"},{name:"TGeoManager",icon:"img_histo3d",prereq:"geom",expand:"JSROOT.GEO.expandObject",func:"JSROOT.Painter.drawGeoObject",opt:";more;all;count;projx;projz;wire;tracks;dflt",dflt:"expand",ctrl:"dflt"},{name:/^TGeo/,icon:"img_histo3d",prereq:"geom",func:"JSROOT.Painter.drawGeoObject",opt:";more;all;axis;compa;count;projx;projz;wire;dflt",
ctrl:"dflt"},{name:"kind:Command",icon:"img_execute",execute:!0},{name:"TFolder",icon:"img_folder",icon2:"img_folderopen",noinspect:!0,prereq:"hierarchy",expand:"JSROOT.Painter.FolderHierarchy"},{name:"TTask",icon:"img_task",prereq:"hierarchy",expand:"JSROOT.Painter.TaskHierarchy",for_derived:!0},{name:"TTree",icon:"img_tree",prereq:"tree;more2d",expand:"JSROOT.Painter.TreeHierarchy",func:"JSROOT.Painter.drawTree",dflt:"expand",opt:"player;testio",shift:"inspect"},{name:"TNtuple",icon:"img_tree",
prereq:"tree;more2d",expand:"JSROOT.Painter.TreeHierarchy",func:"JSROOT.Painter.drawTree",dflt:"expand",opt:"player;testio",shift:"inspect"},{name:"TNtupleD",icon:"img_tree",prereq:"tree;more2d",expand:"JSROOT.Painter.TreeHierarchy",func:"JSROOT.Painter.drawTree",dflt:"expand",opt:"player;testio",shift:"inspect"},{name:"TBranchFunc",icon:"img_leaf_method",prereq:"tree;more2d",func:"JSROOT.Painter.drawTree",opt:";dump",noinspect:!0},{name:/^TBranch/,icon:"img_branch",prereq:"tree;more2d",func:"JSROOT.Painter.drawTree",
dflt:"expand",opt:";dump",ctrl:"dump",shift:"inspect",ignore_online:!0},{name:/^TLeaf/,icon:"img_leaf",prereq:"tree;more2d",noexpand:!0,func:"JSROOT.Painter.drawTree",opt:";dump",ctrl:"dump",ignore_online:!0},{name:"TList",icon:"img_list",prereq:"hierarchy",func:"JSROOT.Painter.drawList",expand:"JSROOT.Painter.ListHierarchy",dflt:"expand"},{name:"THashList",sameas:"TList"},{name:"TObjArray",sameas:"TList"},{name:"TClonesArray",sameas:"TList"},{name:"TMap",sameas:"TList"},{name:"TColor",icon:"img_color"},
{name:"TFile",icon:"img_file",noinspect:!0},{name:"TMemFile",icon:"img_file",noinspect:!0},{name:"TStyle",icon:"img_question",noexpand:!0},{name:"Session",icon:"img_globe"},{name:"kind:TopFolder",icon:"img_base"},{name:"kind:Folder",icon:"img_folder",icon2:"img_folderopen",noinspect:!0},{name:"ROOT::Experimental::RCanvas",icon:"img_canvas",prereq:"v7",func:"JSROOT.v7.drawCanvas",opt:"",expand_item:"fPrimitives"},{name:"ROOT::Experimental::RCanvasDisplayItem",icon:"img_canvas",prereq:"v7",func:"JSROOT.v7.drawPadSnapshot",
opt:"",expand_item:"fPrimitives"}],cache:{}};e.addDrawFunc=function(a,b,c){if(1==arguments.length&&"object"==typeof arguments[0])return e.DrawFuncs.lst.push(arguments[0]),arguments[0];var d={name:a,func:b,opt:c};e.DrawFuncs.lst.push(d);return d};e.getDrawHandle=function(a,b){if("string"!=typeof a)return null;""===b&&(b=null);var c=null;if(null===b&&a in e.DrawFuncs.cache)return e.DrawFuncs.cache[a];for(var d=0==a.indexOf("ROOT.")?a.substr(5):"kind:"+a,h=0,f=0;f<e.DrawFuncs.lst.length;++f){var g=e.DrawFuncs.lst[f];
if("string"==typeof g.name){if(g.name!=d)continue}else if(!d.match(g.name))continue;if(void 0!==g.sameas)return e.getDrawHandle("ROOT."+g.sameas,b);if(null===b||void 0===b)return a in e.DrawFuncs.cache||(e.DrawFuncs.cache[a]=g),g;if("string"==typeof b)if(c||(c=g),"::expand"==b){if("expand"in g||"expand_item"in g)return g}else{if("opt"in g){for(var l=g.opt.split(";"),p=0;p<l.length;++p)l[p]=l[p].toLowerCase();if(0<=l.indexOf(b.toLowerCase()))return g}}else if(b===h)return g;++h}return c};e.addStreamerInfos=
function(a){function b(c,d){if(null==c.fElements||10<d)return null;for(var f=0;f<c.fElements.arr.length;++f){var g=c.fElements.arr[f];if("BASE"===g.fTypeName){var h=e.getDrawHandle("ROOT."+g.fName);h&&!h.for_derived&&(h=null);if(null===h)for(var m=0;m<a.arr.length;++m)if(a.arr[m].fName===g.fName){h=b(a.arr[m],d+1);break}if(h&&h.for_derived)return h}}return null}if(a)for(var c=0;c<a.arr.length;++c){var d=a.arr[c];if(null===e.getDrawHandle("ROOT."+d.fName)){var h=b(d,0);h&&(h=e.extend({},h),h.name=
d.fName,e.DrawFuncs.lst.push(h))}}};e.getDrawSettings=function(a,b){var c={opts:null,inspect:!1,expand:!1,draw:!1,handle:null};if("string"!=typeof a)return c;var d=!1,h=!1,f=!1;"string"!==typeof b&&(b="");for(var g=0;1E3>g;++g){var l=e.getDrawHandle(a,g);if(!l)break;c.handle||(c.handle=l);l.noinspect&&(h=!0);if(l.expand||l.expand_item||l.can_expand)f=!0;if(!("func"in l))break;d=!0;if("opt"in l){for(var m=l.opt.split(";"),k=0;k<m.length;++k)m[k]=m[k].toLowerCase(),0<=b.indexOf("nosame")&&0==m[k].indexOf("same")||
(null===c.opts&&(c.opts=[]),0>c.opts.indexOf(m[k])&&c.opts.push(m[k]));if(l.theonly)break}}0<=b.indexOf("noinspect")&&(h=!0);d&&null===c.opts&&(c.opts=[""]);d||0!=a.indexOf("ROOT.")||h||(c.opts=[]);!h&&c.opts&&c.opts.push("inspect");c.inspect=!h;c.expand=f;c.draw=c.opts&&0<c.opts.length;return c};e.getDrawOptions=function(a,b){return e.getDrawSettings(a).opts};e.canDraw=function(a){return null!==e.getDrawSettings("ROOT."+a).opts};e.draw=function(a,b,c,d){function h(a){var b=null,c=!1;"function"==
typeof d?b=d:d&&"object"==typeof d&&"function"==typeof d.func&&(b=d.func,c=!0);if(c&&g&&(!a||a._ready_called_))return d.completed=!0,a;a&&d&&"function"==typeof a.WhenReady?a.WhenReady(b):e.CallBack(b,a);return a}function f(){k.direct?(q=new m(b,c),q.csstype=k.csstype,q.SetDivId(a,2),q.Redraw=k.func,q.Redraw(),q.DrawingReady()):(q=k.func(a,b,c))&&!q.options&&(q.options={original:c||""});return h(q)}var g=!0;if(null===b||"object"!==typeof b)return h(null);if("inspect"==c){var l=e.findFunction("JSROOT.Painter.drawInspector");
if(l)return h(l(a,b));e.AssertPrerequisites("hierarchy",function(){h(e.Painter.drawInspector(a,b))});return null}var k=null,q=null;"_typename"in b?k=e.getDrawHandle("ROOT."+b._typename,c):"_kind"in b&&(k=e.getDrawHandle(b._kind,c));if(!k)return h(null);if(k.draw_field&&b[k.draw_field])return e.draw(a,b[k.draw_field],c,d);if(!k.func)return c&&0<=c.indexOf("same")&&(l=e.GetMainPainter(a))&&"function"===typeof l.PerformDrop?l.PerformDrop(b,"",null,c,h):h(null);if("function"==typeof k.func)return f();
var u="",v="";"object"==typeof k.func?("func"in k.func&&(u=k.func.func),"script"in k.func&&(v="user:"+k.func.script)):"string"==typeof k.func&&(u=k.func,"prereq"in k&&"string"==typeof k.prereq&&(v=k.prereq),"script"in k&&"string"==typeof k.script&&(v+=";user:"+k.script));if(0===u.length)return h(null);if(l=e.findFunction(u))return k.func=l,f();if(0===v.length)return h(null);g=!1;e.AssertPrerequisites(v,function(){var a=e.findFunction(u);if(!a)return alert("Fail to find function "+u+" after loading "+
v),h(null);k.func=a;f()});return q};e.redraw=function(a,b,c,d){if(!b)return e.CallBack(d,null);var h=new m;h.SetDivId(a,-1);h=h.canv_painter();var f=null;b._typename&&(f=e.getDrawHandle("ROOT."+b._typename));f&&f.draw_field&&b[f.draw_field]&&(b=b[f.draw_field]);if(h){if("TCanvas"===b._typename)return h.RedrawObject(b),e.CallBack(d,h),h;for(f=0;f<h.painters.length;++f){var g=h.painters[f];if(g.MatchObjectType(b._typename)&&g.UpdateObject(b,c))return h.RedrawPad(),e.CallBack(d,g),g}}h&&e.console("Cannot find painter to update object of type "+
b._typename);e.cleanup(a);return e.draw(a,b,c,d)};e.StoreJSON=function(a){var b=new m;b.SetDivId(a,-1);return(a=b.canv_painter())?a.ProduceJSON():""};e.MakeSVG=function(a,b){function c(c){c.attr("width",a.width).attr("height",a.height);c.style("width",a.width+"px").style("height",a.height+"px");e.svg_workaround=void 0;e.draw(c.node(),a.object,a.option||"",function(d){d=e.Painter.ProcessSVGWorkarounds&&e.svg_workaround;c.select("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("width",
a.width).attr("height",a.height).attr("style",null).attr("class",null).attr("x",null).attr("y",null);var f=c.html();e.nodejs&&(f=f.replace(/xlink_href_nodejs=/g,"xlink:href="));d&&(f=e.Painter.ProcessSVGWorkarounds(f));f=f.replace(/url\(&quot;#(\w+)&quot;\)/g,"url(#$1)").replace(/ class="\w*"/g,"").replace(/<g transform="translate\(\d+,\d+\)"><\/g>/g,"").replace(/<g><\/g>/g,"");0>f.indexOf("xlink:href")&&(f=f.replace(/ xmlns:xlink="http:\/\/www.w3.org\/1999\/xlink"/g,""));c.remove();e.CallBack(b,
f)})}a||(a={});if(!a.object)return e.CallBack(b,null);a.width||(a.width=1200);a.height||(a.height=800);e.nodejs?(e.nodejs_document||(eval('const { JSDOM } = require("jsdom"); JSROOT.nodejs_window = (new JSDOM("<!DOCTYPE html>hello")).window;'),e.nodejs_document=e.nodejs_window.document,e.nodejs_window.d3=k.select(e.nodejs_document)),c(e.nodejs_window.d3.select("body").append("div"))):c(k.select("body").append("div").style("visible","hidden"))};e.resize=function(a,b){!0===b?b={force:!0}:"object"!==
typeof b&&(b=null);var c=!1,d=new m;d.SetDivId(a,-1);d.ForEachPainter(function(a){c||"function"!=typeof a.CheckResize||(c=a.CheckResize(b))});return c};e.CheckElementResize=e.resize;e.GetMainPainter=function(a){var b=new e.TObjectPainter;b.SetDivId(a,-1);return b.main_painter(!0)};e.cleanup=function(a){var b=new m,c=[];b.SetDivId(a,-1);b.ForEachPainter(function(a){0>c.indexOf(a)&&c.push(a)});for(a=0;a<c.length;++a)c[a].Cleanup();b.select_main().html("");return c};e.progress=function(a,b){if(!e.BatchMode&&
"undefined"!==typeof document){var c=k.select("#jsroot_progressbox");if(!e.gStyle.ProgressBox)return c.remove();0!=arguments.length&&a?(c.empty()&&(c=k.select(document.body).append("div").attr("id","jsroot_progressbox"),c.append("p")),c.property("with_timeout",!1),"string"===typeof a?c.select("p").html(a):(c.html(""),c.node().appendChild(a)),!isNaN(b)&&0<b&&(c.property("with_timeout",!0),setTimeout(e.progress.bind(e,"",-1),b))):(-1!==b||!c.empty()&&c.property("with_timeout"))&&c.remove()}};e.CloseCurrentWindow=
function(){window&&(window.close(),window.open("","_self").close())};u.createRootColors();e.LongPollSocket=H;e.WebWindowHandle=B;e.DrawOptions=C;e.ColorPalette=E;e.TAttLineHandler=G;e.TAttFillHandler=F;e.TAttMarkerHandler=D;e.TBasePainter=w;e.TObjectPainter=m;e.TooltipHandler=J;return e});
