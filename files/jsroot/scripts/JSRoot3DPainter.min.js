(function(c){if("function"===typeof define&&define.amd)define(["JSRootPainter","d3","threejs","threejs_all"],c);else if("object"===typeof exports&&"undefined"!==typeof module){var u=require("./JSRootCore.js");c(u,require("d3"),require("three"),require("./three.extra.min.js"),u.nodejs||"undefined"==typeof document?u.nodejs_document:document)}else{if("undefined"==typeof JSROOT)throw Error("JSROOT is not defined","JSRoot3DPainter.js");if("object"!=typeof d3)throw Error("This extension requires d3.js",
"JSRoot3DPainter.js");if("undefined"==typeof THREE)throw Error("THREE is not defined","JSRoot3DPainter.js");c(JSROOT,d3,THREE)}})(function(c,u,f,y,l){function r(){}function t(a){this.mesh=a}function v(a,c,d){this.webgl=void 0===c?!0:c;this.scale=d||1;this.pos=new Float32Array(3*a);this.geom=new f.BufferGeometry;this.geom.addAttribute("position",new f.BufferAttribute(this.pos,3));this.indx=0}function x(a,e){if(!a||!e)return null;a=a.get_color(e.fLineColor);var d=e.fLineStyle?c.Painter.root_line_styles[e.fLineStyle]:
"";a=(d=d?d.split(","):[])&&2<=d.length?new f.LineDashedMaterial({color:a,dashSize:parseInt(d[0]),gapSize:parseInt(d[1])}):new f.LineBasicMaterial({color:a});e.fLineWidth&&1<e.fLineWidth&&!c.browser.isIE&&(a.linewidth=e.fLineWidth);return a}c.sources.push("3d");"undefined"==typeof l&&"object"==typeof window&&(l=window.document);if("object"!=typeof c.Painter)throw Error("JSROOT.Painter is not defined","JSRoot3DPainter.js");c.Painter.TestWebGL=function(){if(c.gStyle.NoWebGL||c.nodejs)return!1;if("_Detect_WebGL"in
this)return this._Detect_WebGL;try{var a=l.createElement("canvas");this._Detect_WebGL=!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(e){this._Detect_WebGL=!1}return this._Detect_WebGL};c.Painter.UseSVGFor3D=function(){if(!c.nodejs)return!1;if(void 0!==this._Detect_UseSVGFor3D)return this._Detect_UseSVGFor3D;var a=null;try{a=require("canvas")}catch(e){a=null}return this._Detect_UseSVGFor3D=!a};c.Painter.Create3DRenderer=function(a,e,d,n,h,k){var g=
{renderer:null,dom:null,usesvg:d,usesvgimg:d&&c.gStyle.ImageSVG};k||(k={antialias:!0,alpha:!0});g.usewebgl=c.nodejs?!1:void 0!==h?h:c.Painter.TestWebGL();c.BatchMode&&c.browser.isChromeHeadless&&g.usewebgl&&(k.premultipliedAlpha=!1);if(d){h=null;if(c.nodejs&&g.usesvgimg)try{h=require("canvas")}catch(w){h=null,g.usesvgimg=!1,c.gStyle.ImageSVG=!1}g.usesvgimg?(h&&(k.canvas=new h(a,e),k.canvas.style={}),g.renderer=g.usewebgl?new f.WebGLRenderer(k):new f.SoftwareRenderer(k)):g.renderer=f.CreateSVGRenderer(!1,
0,l);if(g.usesvgimg||void 0!==g.renderer.makeOuterHTML)c.svg_workaround||(c.svg_workaround=[]),g.renderer.workaround_id=c.svg_workaround.length,c.svg_workaround[g.renderer.workaround_id]="<svg></svg>",g.dom=l.createElementNS("http://www.w3.org/2000/svg","path"),g.dom.setAttribute("jsroot_svg_workaround",g.renderer.workaround_id)}else g.renderer=g.usewebgl?new f.WebGLRenderer(k):new f.SoftwareRenderer(k);g.renderer.setSize(a,e);g.dom||(g.dom=g.renderer.domElement,!d&&n&&(g.dom=g.renderer.svgImage=
l.createElementNS("http://www.w3.org/2000/svg","image"),u.select(g.dom).attr("width",a).attr("height",e)));return g};c.Painter.AfterRender3D=function(a){if(a.svgImage){var e=a.domElement.toDataURL("image/png"),d=c.nodejs?"xlink_href_nodejs":"xlink:href";u.select(a.svgImage).attr(d,e)}void 0!==a.workaround_id&&("function"==typeof a.makeOuterHTML?c.svg_workaround[a.workaround_id]=a.makeOuterHTML():(d=a.domElement,e=d.toDataURL("image/png"),c.svg_workaround[a.workaround_id]='<image width="'+d.width+
'" height="'+d.height+'" xlink:href="'+e+'"></image>'))};c.Painter.ProcessSVGWorkarounds=function(a){if(!c.svg_workaround)return a;for(var e=0;e<c.svg_workaround.length;++e)a=a.replace('<path jsroot_svg_workaround="'+e+'"></path>',c.svg_workaround[e]);c.svg_workaround=void 0;return a};c.Painter.TooltipFor3D=function(a,e){this.cont=this.tt=null;this.lastlbl="";this.parent=a?a:l.body;this.canvas=e;this.abspos=!a;this.check_parent=function(a){a&&this.parent!==a&&(this.hide(),this.parent=a)};this.extract_pos=
function(a){if("object"==typeof a&&void 0!==a.u&&void 0!==a.l)return a;var d={u:0,l:0};this.abspos?(d.l=c.browser.isIE?a.clientX+l.documentElement.scrollLeft:a.pageX,d.u=c.browser.isIE?a.clientY+l.documentElement.scrollTop:a.pageY):(d.l=a.offsetX,d.u=a.offsetY);return d};this.pos=function(a){if(this.tt){a=this.extract_pos(a);if(!this.abspos){var d=this.parent.getBoundingClientRect(),c=this.canvas.getBoundingClientRect();void 0!==d.left&&void 0!==c.left&&(a.l+=c.left-d.left);void 0!==d.top&&void 0!==
c.top&&(a.u+=c.top-d.top);a.l+this.tt.offsetWidth+3>=this.parent.offsetWidth&&(a.l=this.parent.offsetWidth-this.tt.offsetWidth-3);a.u+this.tt.offsetHeight+15>=this.parent.offsetHeight&&(a.u=this.parent.offsetHeight-this.tt.offsetHeight-15);for(c=this.parent;c;){var e=getComputedStyle(c);if(!e||"static"!==e.position)break;if(!c.parentNode||1!=c.parentNode.nodeType)break;c=c.parentNode}c&&c!==this.parent&&(c=c.getBoundingClientRect(),a.l+=d.left-c.left,a.u+=d.top-c.top)}this.tt.style.top=a.u+15+"px";
this.tt.style.left=a.l+3+"px"}};this.show=function(a,e,f){if(!a||""===a)return this.hide();if(a&&"object"==typeof a&&(a.lines||a.line)){if(a.only_status)return this.hide();if(a.line)a=a.line;else{e=a.lines[0];for(f=1;f<a.lines.length;++f)e+="<br/>"+a.lines[f];a=e}}null===this.tt&&(this.tt=l.createElement("div"),this.tt.setAttribute("class","jsroot_tt3d_main"),this.cont=l.createElement("div"),this.cont.setAttribute("class","jsroot_tt3d_cont"),this.tt.appendChild(this.cont),this.parent.appendChild(this.tt));
this.lastlbl!==a&&(this.lastlbl=this.cont.innerHTML=a,this.tt.style.width="auto",c.browser.isIE&&(this.tt.style.width=this.tt.offsetWidth))};this.hide=function(){null!==this.tt&&this.parent.removeChild(this.tt);this.tt=null;this.lastlbl=""};return this};c.Painter.CreateOrbitControl=function(a,e,d,n,h){function k(a){if(c.Painter.IsRender3DFired(b.painter)||b.mouse_zoom_mesh)a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();else{var p=b.DetectZoomMesh(a);if(p&&(a.preventDefault(),
a.stopPropagation(),a.stopImmediatePropagation(),b.painter&&"function"==typeof b.painter.AnalyzeMouseWheelEvent)){var d=p.object.zoom,e=p.point[d],f={name:d,ignore:!1};e="z"!==d?(e+b.painter.size_xy3d)/2/b.painter.size_xy3d:e/2/b.painter.size_z3d;b.painter.AnalyzeMouseWheelEvent(a,f,e,!1);"z"===d&&p.object.use_y_for_z&&(d="y");b.painter.Zoom(d,f.min,f.max)}}}function g(a){if(b.mouse_zoom_mesh)a.stopImmediatePropagation(),a.stopPropagation();else if(void 0===a.button||0===a.button)if(void 0===a.buttons||
1===a.buttons){if(b.enable_zoom&&(b.mouse_zoom_mesh=b.DetectZoomMesh(a),b.mouse_zoom_mesh)){a.stopImmediatePropagation();a.stopPropagation();return}b.enable_select&&(b.mouse_select_pnt=b.GetMousePos(a,{}))}}function w(a){if(b.mouse_zoom_mesh&&b.mouse_zoom_mesh.point2&&b.painter.Get3DZoomCoord){var d=b.mouse_zoom_mesh.object.zoom,c=b.painter.Get3DZoomCoord(b.mouse_zoom_mesh.point,d),p=b.painter.Get3DZoomCoord(b.mouse_zoom_mesh.point2,d);if(c>p){var e=c;c=p;p=e}"z"===d&&b.mouse_zoom_mesh.object.use_y_for_z&&
(d="y");"z"===d&&b.mouse_zoom_mesh.object.use_y_for_z&&(d="y");c<p&&b.painter.Zoom(d,c,p)&&(b.mouse_zoom_mesh=null)}b.enable_zoom&&b.RemoveZoomMesh();b.enable_select&&b.mouse_select_pnt&&(d=b.GetMousePos(a,{}),c=d.x==b.mouse_select_pnt.x&&d.y==b.mouse_select_pnt.y,delete b.mouse_select_pnt,c&&(c=b.GetMouseIntersects(d),b.painter.ProcessMouseClick(d,c,a)))}c.gStyle.Zooming&&c.gStyle.ZoomWheel&&n.domElement.addEventListener("wheel",k);var q=c.gStyle.Zooming&&c.gStyle.ZoomMouse,m="function"==typeof a.ProcessMouseClick;
if(q||m)n.domElement.addEventListener("mousedown",g),n.domElement.addEventListener("mouseup",w);var b=new f.OrbitControls(e,n.domElement);b.enableDamping=!1;b.dampingFactor=1;b.enableZoom=!0;b.enableKeys=c.key_handling;h&&(b.target.copy(h),b.target0.copy(h),b.update());b.tooltip=new c.Painter.TooltipFor3D(a.select_main().node(),n.domElement);b.painter=a;b.camera=e;b.scene=d;b.renderer=n;b.raycaster=new f.Raycaster;b.raycaster.linePrecision=10;b.mouse_zoom_mesh=null;b.block_ctxt=!1;b.block_mousemove=
!1;b.cursor_changed=!1;b.control_changed=!1;b.control_active=!1;b.mouse_ctxt={x:0,y:0,on:!1};b.enable_zoom=q;b.enable_select=m;b.Cleanup=function(){c.gStyle.Zooming&&c.gStyle.ZoomWheel&&this.domElement.removeEventListener("wheel",k);if(this.enable_zoom||this.enable_select)this.domElement.removeEventListener("mousedown",g),this.domElement.removeEventListener("mouseup",w);this.lstn_click&&this.domElement.removeEventListener("click",this.lstn_click);this.domElement.removeEventListener("dblclick",this.lstn_dblclick);
this.domElement.removeEventListener("contextmenu",this.lstn_contextmenu);this.domElement.removeEventListener("mousemove",this.lstn_mousemove);this.domElement.removeEventListener("mouseleave",this.lstn_mouseleave);this.dispose();this.tooltip.hide();delete this.tooltip;delete this.painter;delete this.camera;delete this.scene;delete this.renderer;delete this.raycaster;delete this.mouse_zoom_mesh};b.HideTooltip=function(){this.tooltip.hide()};b.GetMousePos=function(a,b){b.x="offsetX"in a?a.offsetX:a.layerX;
b.y="offsetY"in a?a.offsetY:a.layerY;b.clientX=a.clientX;b.clientY=a.clientY;return b};b.GetOriginDirectionIntersects=function(a,b){this.raycaster.set(a,b);a=this.raycaster.intersectObjects(this.scene.children,!0);"function"==typeof this.painter.FilterIntersects&&(a=this.painter.FilterIntersects(a));return a};b.GetMouseIntersects=function(a){var b=this.renderer instanceof f.WebGLRenderer?this.renderer.getSize(new f.Vector2):this.renderer.domElement;a={x:a.x/b.width*2-1,y:-a.y/b.height*2+1};this.camera.updateMatrix();
this.camera.updateMatrixWorld();this.raycaster.setFromCamera(a,this.camera);a=this.raycaster.intersectObjects(this.scene.children,!0);"function"==typeof this.painter.FilterIntersects&&(a=this.painter.FilterIntersects(a));return a};b.DetectZoomMesh=function(a){a=this.GetMousePos(a,{});if(a=this.GetMouseIntersects(a))for(var b=0;b<a.length;++b)if(a[b].object.zoom)return a[b];return null};b.ProcessDblClick=function(a){(a=this.DetectZoomMesh(a))&&this.painter?this.painter.Unzoom(a.object.use_y_for_z?
"y":a.object.zoom):this.reset()};b.ChangeEvent=function(){this.mouse_ctxt.on=!1;this.painter.zoom_changed_interactive=1;this.painter.Render3D(0);this.control_changed=!0};b.StartEvent=function(){this.control_active=!0;this.block_ctxt=!1;this.mouse_ctxt.on=!1;this.tooltip.hide()};b.EndEvent=function(){this.control_active=!1;this.mouse_ctxt.on&&(this.mouse_ctxt.on=!1,this.ContextMenu(this.mouse_ctxt,this.GetMouseIntersects(this.mouse_ctxt)));this.control_changed=!1};b.MainProcessContextMenu=function(a){a.preventDefault();
this.GetMousePos(a,this.mouse_ctxt);this.control_active?this.mouse_ctxt.on=!0:this.block_ctxt?this.block_ctxt=!1:this.ContextMenu(this.mouse_ctxt,this.GetMouseIntersects(this.mouse_ctxt))};b.ContextMenu=function(a,b){};b.SwitchTooltip=function(a){this.block_mousemove=!a;!1===a&&(this.tooltip.hide(),this.RemoveZoomMesh())};b.RemoveZoomMesh=function(){this.mouse_zoom_mesh&&this.mouse_zoom_mesh.object.ShowSelection()&&this.painter.Render3D();this.mouse_zoom_mesh=null};b.MainProcessMouseMove=function(a){this.control_active&&
a.buttons&&a.buttons&2&&(this.block_ctxt=!0);if(!this.control_active&&!this.block_mousemove&&this.ProcessMouseMove)if(this.mouse_zoom_mesh){if(a=(a=this.DetectZoomMesh(a))&&a.object===this.mouse_zoom_mesh.object?a.point:this.mouse_zoom_mesh.object.GlobalIntersect(this.raycaster))this.mouse_zoom_mesh.point2=a;a&&this.painter.enable_highlight&&this.mouse_zoom_mesh.object.ShowSelection(this.mouse_zoom_mesh.point,a)&&this.painter.Render3D(0);this.tooltip.hide()}else a.preventDefault(),this.tmout_mouse=
this.GetMousePos(a,{}),this.tmout_ttpos=this.tooltip?this.tooltip.extract_pos(a):null,this.tmout_handle&&(clearTimeout(this.tmout_handle),delete this.tmout_handle),this.mouse_tmout?this.tmout_handle=setTimeout(this.DelayedProcessMouseMove.bind(this),this.mouse_tmout):this.DelayedProcessMouseMove()};b.DelayedProcessMouseMove=function(){delete this.tmout_handle;var a=this.tmout_mouse,b=this.GetMouseIntersects(a),d=this.ProcessMouseMove(b),c=this.painter.GetShowStatusFunc();if(d&&c){var e="",f="",g=
"",h="";a&&(g=a.x.toFixed(0)+","+a.y.toFixed(0));"string"==typeof d?h=d:(e=d.name,f=d.title,d.line?h=d.line:d.lines&&(h=d.lines.slice(1).join(" "),e=d.lines[0]));c(e,f,h,g)}this.cursor_changed=!1;if(d&&this.painter&&this.painter.IsTooltipAllowed())this.tooltip.check_parent(this.painter.select_main().node()),this.tooltip.show(d,a),this.tooltip.pos(this.tmout_ttpos);else if(this.tooltip.hide(),b)for(a=0;a<b.length;++a)b[a].object.zoom&&(this.cursor_changed=!0);l.body.style.cursor=this.cursor_changed?
"pointer":"auto"};b.MainProcessMouseLeave=function(){this.tmout_handle&&(clearTimeout(this.tmout_handle),delete this.tmout_handle);this.tooltip.hide();"function"===typeof this.ProcessMouseLeave&&this.ProcessMouseLeave();this.cursor_changed&&(l.body.style.cursor="auto",this.cursor_changed=!1)};b.MainProcessDblClick=function(a){this.ProcessDblClick(a)};a&&a.options&&a.options.mouse_click&&(b.ProcessClick=function(a){"function"==typeof this.ProcessSingleClick&&(a=this.GetMouseIntersects(a),this.ProcessSingleClick(a))},
b.lstn_click=function(a){this.single_click_tm&&(clearTimeout(this.single_click_tm),delete this.single_click_tm);2!=a.detail&&(this.single_click_tmout=setTimeout(this.ProcessClick.bind(this,this.GetMousePos(a,{})),300))}.bind(b));b.addEventListener("change",b.ChangeEvent.bind(b));b.addEventListener("start",b.StartEvent.bind(b));b.addEventListener("end",b.EndEvent.bind(b));b.lstn_contextmenu=b.MainProcessContextMenu.bind(b);b.lstn_dblclick=b.MainProcessDblClick.bind(b);b.lstn_mousemove=b.MainProcessMouseMove.bind(b);
b.lstn_mouseleave=b.MainProcessMouseLeave.bind(b);b.lstn_click&&n.domElement.addEventListener("click",b.lstn_click);n.domElement.addEventListener("dblclick",b.lstn_dblclick);n.domElement.addEventListener("contextmenu",b.lstn_contextmenu);n.domElement.addEventListener("mousemove",b.lstn_mousemove);n.domElement.addEventListener("mouseleave",b.lstn_mouseleave);return b};c.Painter.DisposeThreejsObject=function(a,e){if(a){if(a.children)for(var d=0;d<a.children.length;d++)c.Painter.DisposeThreejsObject(a.children[d]);
e?a.children=[]:(a.children=void 0,a.geometry&&(a.geometry.dispose(),a.geometry=void 0),a.material&&(a.material.map&&(a.material.map.dispose(),a.material.map=void 0),a.material.dispose(),a.material=void 0),delete a.painter,delete a.bins_index,delete a.tooltip,delete a.stack,delete a.drawn_highlight)}};c.Painter.createLineSegments=function(a,c,d,n){var e=new f.BufferGeometry;e.addAttribute("position",a instanceof Float32Array?new f.BufferAttribute(a,3):new f.Float32BufferAttribute(a,3));d&&e.setIndex(new f.BufferAttribute(d,
1));if(c.isLineDashedMaterial){var k=new f.Vector3,g=new f.Vector3,l=0;if(d){var q=new Float32Array(d.length);for(var m=0;m<d.length;m+=2){var b=d[m],p=d[m+1];k.set(a[b],a[b+1],a[b+2]);g.set(a[p],a[p+1],a[p+2]);q[m]=l;l+=g.distanceTo(k);q[m+1]=l}}else for(q=new Float32Array(a.length/3),m=0;m<a.length;m+=6)k.set(a[m],a[m+1],a[m+2]),g.set(a[m+3],a[m+4],a[m+5]),q[m/3]=l,l+=g.distanceTo(k),q[m/3+1]=l;e.addAttribute("lineDistance",new f.BufferAttribute(q,1))}return n?e:new f.LineSegments(e,c)};c.Painter.Box3D=
{Vertices:[new f.Vector3(1,1,1),new f.Vector3(1,1,0),new f.Vector3(1,0,1),new f.Vector3(1,0,0),new f.Vector3(0,1,0),new f.Vector3(0,1,1),new f.Vector3(0,0,0),new f.Vector3(0,0,1)],Indexes:[0,2,1,2,3,1,4,6,5,6,7,5,4,5,1,5,0,1,7,6,2,6,3,2,5,7,0,7,2,0,1,3,4,3,6,4],Normals:[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Segments:[0,2,2,7,7,5,5,0,1,3,3,6,6,4,4,1,1,0,3,2,6,7,4,5]};c.Painter.Box3D.MeshSegments=function(){for(var a=c.Painter.Box3D,e=new Int32Array(a.Segments.length),d=0;d<e.length;++d)for(var f=
0;f<a.Indexes.length;++f)if(a.Segments[d]===a.Indexes[f]){e[d]=f;break}return e}();c.Painter.IsRender3DFired=function(a){return a&&void 0!==a.renderer?void 0!==a.render_tmout:!1};r.prototype.cleanup=function(){};r.prototype.extractIndex=function(a){};r.prototype.setSelected=function(a,c){};r.prototype.setHighlight=function(a,c){};r.prototype.checkHighlightIndex=function(a){};t.prototype=Object.create(r.prototype);t.prototype.cleanup=function(){this.mesh&&(delete this.mesh.is_selected,this.createSpecial(null),
delete this.mesh)};t.prototype.extractIndex=function(a){return a&&void 0!==a.index?a.index:void 0};t.prototype.setSelected=function(a,c){var d=this.mesh;d.select_col==a&&d.select_indx==c&&(console.log("Reset selection"),a=null,c=void 0);d.select_col=a;d.select_indx=c;this.createSpecial(a,c);return!0};t.prototype.setHighlight=function(a,c){var d=this.mesh;d.h_index=c;a?this.createSpecial(a,c):this.createSpecial(d.select_col,d.select_indx);return!0};t.prototype.createSpecial=function(a,e){var d=this.mesh;
if(a){if(!d.js_special){var l=new f.BufferGeometry;l.addAttribute("position",d.geometry.getAttribute("position"));var h=new f.PointsMaterial({size:2*d.material.size,color:a});h.sizeAttenuation=d.material.sizeAttenuation;d.js_special=new f.Points(l,h);d.js_special.jsroot_special=!0;d.add(d.js_special)}a&&(d.js_special.material.color=new f.Color(a));void 0!==e&&d.js_special.geometry.setDrawRange(e,1)}else d.js_special&&(d.remove(d.js_special),c.Painter.DisposeThreejsObject(d.js_special),delete d.js_special)};
v.prototype.AddPoint=function(a,c,d){this.pos[this.indx]=a;this.pos[this.indx+1]=c;this.pos[this.indx+2]=d;this.indx+=3};v.prototype.AssignCallback=function(a){this.callback=a};v.prototype.Complete=function(a){if(this.texture){if("loaded"==a&&this.texture.onUpdate)this.texture.onUpdate(this.texture);if(this._did_create)return;a=new f.PointsMaterial({size:(this.webgl?3:1)*this.scale,map:this.texture,transparent:!0})}else{if(this._did_create)return;a=new f.PointsMaterial({size:(this.webgl?3:1)*this.scale*
this.k,color:this.color})}this._did_create=!0;a=new f.Points(this.geom,a);a.nvertex=1;if(!this.callback)return a;c.CallBack(this.callback,a)};v.prototype.CreatePoints=function(a){"object"!==typeof a&&(a={color:a});a.color||(a.color="black");this.k=1;this.color=a.color;this._did_create=!1;1===a.style?this.k=.3:6===a.style?this.k=.5:7===a.style&&(this.k=.7);if(!a.style||1!==this.k||c.BatchMode)return this.Complete();a=new c.TAttMarkerHandler({style:a.style,color:a.color,size:8});a='<svg width="64" height="64" xmlns="http://www.w3.org/2000/svg"><path d="'+
a.create(32,32)+'" stroke="'+a.getStrokeColor()+'" fill="'+a.getFillColor()+'"/></svg>';this.texture=new f.Texture;this.texture.needsUpdate=!0;this.texture.format=f.RGBAFormat;this.texture.image=l.createElement("img");this.texture.image.onload=this.Complete.bind(this,"loaded");this.texture.image.src="data:image/svg+xml;utf8,"+a;if(!this.callback)return this.Complete()};c.Painter.PointsCreator=v;c.Painter.InteractiveControl=r;c.Painter.PointsControl=t;c.Painter.drawPolyLine3D=function(){var a=this.GetObject(),
e=this.frame_painter();if(e&&e.mode3d&&e.toplevel&&a){var d=[];if(a._blob&&4==a._blob.length){var f=a._blob[1];var h=a._blob[2]}else f=a.fN,h=a.fP;for(var k=3;k<3*f;k+=3)d.push(e.grx(h[k-3]),e.gry(h[k-2]),e.grz(h[k-1]),e.grx(h[k]),e.gry(h[k+1]),e.grz(h[k+2]));a=c.Painter.createLineSegments(d,x(this,a));e.toplevel.add(a)}};c.Painter.Create3DLineMaterial=x;return c});
