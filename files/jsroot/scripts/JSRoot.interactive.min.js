var $jscomp$this=this,$jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(e){var p=0;return function(){return p<e.length?{done:!1,value:e[p++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.makeIterator=function(e){var p="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return p?p.call(e):$jscomp.arrayIterator(e)};
$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,p,t){e!=Array.prototype&&e!=Object.prototype&&(e[p]=t.value)};
$jscomp.polyfill=function(e,p,t,n){if(p){t=$jscomp.global;e=e.split(".");for(n=0;n<e.length-1;n++){var f=e[n];f in t||(t[f]={});t=t[f]}e=e[e.length-1];n=t[e];p=p(n);p!=n&&null!=p&&$jscomp.defineProperty(t,e,{configurable:!0,writable:!0,value:p})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(e){function p(){this.batch_=null}function t(k){return k instanceof f?k:new f(function(e,a){e(k)})}if(e&&!$jscomp.FORCE_POLYFILL_PROMISE)return e;p.prototype.asyncExecute=function(k){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction(function(){e.executeBatch_()})}this.batch_.push(k)};var n=$jscomp.global.setTimeout;p.prototype.asyncExecuteFunction=function(k){n(k,0)};p.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var k=
this.batch_;this.batch_=[];for(var e=0;e<k.length;++e){var a=k[e];k[e]=null;try{a()}catch(b){this.asyncThrow_(b)}}}this.batch_=null};p.prototype.asyncThrow_=function(e){this.asyncExecuteFunction(function(){throw e;})};var f=function(e){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var k=this.createResolveAndReject_();try{e(k.resolve,k.reject)}catch(a){k.reject(a)}};f.prototype.createResolveAndReject_=function(){function e(b){return function(c){a||(a=!0,b.call(B,c))}}var B=this,a=!1;
return{resolve:e(this.resolveTo_),reject:e(this.reject_)}};f.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof f)this.settleSameAsPromise_(e);else{a:switch(typeof e){case "object":var k=null!=e;break a;case "function":k=!0;break a;default:k=!1}k?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}};f.prototype.resolveToNonPromiseObj_=function(e){var k=void 0;try{k=e.then}catch(a){this.reject_(a);return}"function"==typeof k?
this.settleSameAsThenable_(k,e):this.fulfill_(e)};f.prototype.reject_=function(e){this.settle_(2,e)};f.prototype.fulfill_=function(e){this.settle_(1,e)};f.prototype.settle_=function(e,f){if(0!=this.state_)throw Error("Cannot settle("+e+", "+f+"): Promise already settled in state"+this.state_);this.state_=e;this.result_=f;this.executeOnSettledCallbacks_()};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)D.asyncExecute(this.onSettledCallbacks_[e]);
this.onSettledCallbacks_=null}};var D=new p;f.prototype.settleSameAsPromise_=function(e){var k=this.createResolveAndReject_();e.callWhenSettled_(k.resolve,k.reject)};f.prototype.settleSameAsThenable_=function(e,f){var a=this.createResolveAndReject_();try{e.call(f,a.resolve,a.reject)}catch(b){a.reject(b)}};f.prototype.then=function(e,p){function a(a,d){return"function"==typeof a?function(d){try{b(a(d))}catch(h){c(h)}}:d}var b,c,d=new f(function(a,d){b=a;c=d});this.callWhenSettled_(a(e,b),a(p,c));return d};
f.prototype.catch=function(e){return this.then(void 0,e)};f.prototype.callWhenSettled_=function(e,f){function a(){switch(b.state_){case 1:e(b.result_);break;case 2:f(b.result_);break;default:throw Error("Unexpected state: "+b.state_);}}var b=this;null==this.onSettledCallbacks_?D.asyncExecute(a):this.onSettledCallbacks_.push(a)};f.resolve=t;f.reject=function(e){return new f(function(f,a){a(e)})};f.race=function(e){return new f(function(f,a){for(var b=$jscomp.makeIterator(e),c=b.next();!c.done;c=b.next())t(c.value).callWhenSettled_(f,
a)})};f.all=function(e){var k=$jscomp.makeIterator(e),a=k.next();return a.done?t([]):new f(function(b,c){function d(a){return function(c){g[a]=c;e--;0==e&&b(g)}}var g=[],e=0;do g.push(void 0),e++,t(a.value).callWhenSettled_(d(g.length-1),c),a=k.next();while(!a.done)})};return f},"es6","es3");
JSROOT.define(["d3","painter"],function(e,p){function t(a,b){function c(a){return"buttons"in a?2===a.buttons:"which"in a?3===a.which:"button"in a?2===a.button:!1}function d(){return Number(h.draw_g.attr("width"))}function g(){return Number(h.draw_g.attr("height"))}function C(a,c,d,g){function e(b,c){var d="js_"+b.replace(/[-]/g,"_"),e=a.select("."+d);e.empty()&&(e=a.append("path").classed(d,!0));e.style("opacity",0).style("cursor",b).attr("d",c);g&&e.call(g)}e("nw-resize","M2,2h15v-5h-20v20h5Z");
e("ne-resize","M"+(c-2)+",2h-15v-5h20v20h-5 Z");e("sw-resize","M2,"+(d-2)+"h15v5h-20v-20h5Z");e("se-resize","M"+(c-2)+","+(d-2)+"h-15v5h20v-20h-5Z");b.no_change_x||(e("w-resize","M-3,18h5v"+Math.max(0,d-36)+"h-5Z"),e("e-resize","M"+(c+3)+",18h-5v"+Math.max(0,d-36)+"h5Z"));b.no_change_y||(e("n-resize","M18,-3v5h"+Math.max(0,c-36)+"v-5Z"),e("s-resize","M18,"+(d+3)+"v-5h"+Math.max(0,c-36)+"v5Z"))}function f(){q.style("cursor","auto");if(!h.draw_g)return q.remove(),q=null,!1;var a=Number(h.draw_g.attr("x")),
c=Number(h.draw_g.attr("y")),e=Number(q.attr("x")),l=Number(q.attr("y")),f=Number(q.attr("width")),E=Number(q.attr("height"));b.minwidth&&f<b.minwidth&&(f=b.minwidth);b.minheight&&E<b.minheight&&(E=b.minheight);var m=f!==d()||E!==g();a=e!==a||l!==c;h.draw_g.attr("x",e).attr("y",l).attr("transform","translate("+e+","+l+")").attr("width",f).attr("height",E);q.remove();q=null;k(h,!0);C(h.draw_g,f,E);if(m||a)if(m&&"resize"in b&&b.resize(f,E),a&&"move"in b&&b.move(e,l,e-oldxx,l-c),m||a)"obj"in b&&(c=w.getPadRect(),
b.obj.fX1NDC=e/c.width,b.obj.fX2NDC=(e+f)/c.width,b.obj.fY1NDC=1-(l+E)/c.height,b.obj.fY2NDC=1-l/c.height,b.obj.modified_NDC=!0),"redraw"in b&&b.redraw();return m||a}if(JSROOT.settings.MoveResize&&!JSROOT.batch_mode){var h=a,q=null,w=h.getPadPainter();if(!w||!w._fast_drawing){a=e.drag().subject(Object);var m=e.drag().subject(Object);a.on("start",function(a){c(a.sourceEvent)||(p.closeMenu&&p.closeMenu(),k(h,!1),a.sourceEvent.preventDefault(),a.sourceEvent.stopPropagation(),a=w.getPadRect(),a={acc_x1:Number(h.draw_g.attr("x")),
acc_y1:Number(h.draw_g.attr("y")),pad_w:a.width-d(),pad_h:a.height-g(),drag_tm:new Date,path:"v"+g()+"h"+d()+"v"+-g()+"z"},q=e.select(h.draw_g.node().parentNode).append("path").classed("zoom",!0).attr("x",a.acc_x1).attr("y",a.acc_y1).attr("width",d()).attr("height",g()).attr("d","M"+a.acc_x1+","+a.acc_y1+a.path).style("cursor","move").style("pointer-events","none").property("drag_handle",a))}).on("drag",function(a){if(q){a.sourceEvent.preventDefault();a.sourceEvent.stopPropagation();var c=q.property("drag_handle");
b.no_change_x||(c.acc_x1+=a.dx);b.no_change_y||(c.acc_y1+=a.dy);a=Math.min(Math.max(c.acc_x1,0),c.pad_w);var d=Math.min(Math.max(c.acc_y1,0),c.pad_h);q.attr("x",a).attr("y",d).attr("d","M"+a+","+d+c.path)}}).on("end",function(a){q&&(a.sourceEvent.preventDefault(),a=q.property("drag_handle"),!1===f()&&(a=(new Date).getTime()-a.drag_tm.getTime(),b.ctxmenu&&600<a&&h.showContextMenu?(a=resize_se.node().getBoundingClientRect(),h.showContextMenu("main",{clientX:a.left,clientY:a.top})):b.canselect&&600>=
a&&(a=h.getPadPainter())&&a.selectObjectPainter(h)))});m.on("start",function(a){c(a.sourceEvent)||(a.sourceEvent.stopPropagation(),a.sourceEvent.preventDefault(),k(h,!1),a=w.getPadRect(),a={acc_x1:Number(h.draw_g.attr("x")),acc_y1:Number(h.draw_g.attr("y")),pad_w:a.width,pad_h:a.height},a.acc_x2=a.acc_x1+d(),a.acc_y2=a.acc_y1+g(),q=e.select(h.draw_g.node().parentNode).append("rect").classed("zoom",!0).style("cursor",e.select(this).style("cursor")).attr("x",a.acc_x1).attr("y",a.acc_y1).attr("width",
a.acc_x2-a.acc_x1).attr("height",a.acc_y2-a.acc_y1).property("drag_handle",a))}).on("drag",function(a){if(q){a.sourceEvent.preventDefault();a.sourceEvent.stopPropagation();var c=q.property("drag_handle"),d=a.dx;a=a.dy;var g=e.select(this);b.no_change_x&&(d=0);b.no_change_y&&(a=0);g.classed("js_nw_resize")?(c.acc_x1+=d,c.acc_y1+=a):g.classed("js_ne_resize")?(c.acc_x2+=d,c.acc_y1+=a):g.classed("js_sw_resize")?(c.acc_x1+=d,c.acc_y2+=a):g.classed("js_se_resize")?(c.acc_x2+=d,c.acc_y2+=a):g.classed("js_w_resize")?
c.acc_x1+=d:g.classed("js_n_resize")?c.acc_y1+=a:g.classed("js_e_resize")?c.acc_x2+=d:g.classed("js_s_resize")&&(c.acc_y2+=a);d=Math.max(0,c.acc_x1);a=Math.min(c.acc_x2,c.pad_w);g=Math.max(0,c.acc_y1);c=Math.min(c.acc_y2,c.pad_h);q.attr("x",d).attr("y",g).attr("width",Math.max(0,a-d)).attr("height",Math.max(0,c-g))}}).on("end",function(a){q&&(a.sourceEvent.preventDefault(),f())});b.only_resize||h.draw_g.style("cursor","move").call(a);b.only_move||C(h.draw_g,d(),g(),m)}}}function n(a,b){return Math.round((b||
1)*(a.iscan||!a.has_canvas?16:12))}function f(a,b){var c=a.getLayerSvg("btns_layer",a.this_pad_name),d=c.select("[name='Toggle']");if(!d.empty()){var g=d.property("buttons_state");d.property("timout_handler")&&("timeout"!==b&&clearTimeout(d.property("timout_handler")),d.property("timout_handler",null));var C=!1;switch(b){case "enable":C=!0;break;case "enterbtn":return;case "timeout":C=!1;break;case "toggle":g=!g;d.property("buttons_state",g);C=g;break;case "disable":case "leavebtn":g||d.property("timout_handler",
setTimeout(function(){return f(a,"timeout")},1200));return}c.selectAll("svg").each(function(){this!==d.node()&&e.select(this).style("display",C?"":"none")})}}var D={hints_layer:function(){var a=this.getCanvPainter();return a?a.getLayerSvg("info_layer"):e.select(null)},isTooltipShown:function(){if(!this.tooltip_enabled||!this.isTooltipAllowed())return!1;var a=this.hints_layer().select(".objects_hints");return a.empty()?!1:a.property("hints_pad")==this.getPadName()},setTooltipEnabled:function(a){void 0!==
a&&(this.tooltip_enabled=a)},processFrameTooltipEvent:function(a,b){function c(a){for(var b=0;b<g.length&&a<H;++b){var c=g[b];c&&c.y>=a-5&&c.y<=a+c.height+5&&(a=c.y+10,b=-1)}return a}if(a&&a.handler){var d=this.draw_g?this.draw_g.select(".main_layer"):null;!d||d.empty()?a=null:a.touch&&b?a=(a=e.pointers(b,d.node()))&&1==a.length?{touch:!0,x:a[0][0],y:a[0][1]}:null:b&&(a=e.pointer(b,d.node()),a={touch:!1,x:a[0],y:a[1]})}var g=[],C=0,f=0,h=0,k=!1,w=11;b=this.getFrameRect();var m=this.getPadPainter();
d=m.getPadWidth();var t=new JSROOT.FontHandler(160,w),u=!this.isTooltipAllowed()||!this.tooltip_enabled;a&&u&&(a.disabled=!0);a&&(a.painters=!0);m&&(g=m.processPadTooltipEvent(a));a&&a.touch&&(w=15);for(var x=0;x<g.length;++x){var l=g[x];if(l)if(l.painter&&void 0!==l.user_info&&l.painter.provideUserTooltip(l.user_info),l.lines&&0!==l.lines.length){for(var A=0;A<x;++A){var n=g[A],v=!1;if(n&&n.lines.length===l.lines.length){for(var y=0;y<l.lines.length&&!v;++y)n.lines[y]!==l.lines[y]&&(v=!0);if(!v){g[x]=
null;break}}}if(g[x]){C++;for(A=0;A<l.lines.length;++A)f=Math.max(f,l.lines[A].length);l.height=Math.round(l.lines.length*w*1.2+6-w*(1.2-1));void 0!==l.color1&&"none"!==l.color1&&(0!==h&&h!==l.color1&&(k=!0),h=l.color1)}}else g[x]=null}x=this.hints_layer();h=x.select(".objects_hints");n=A=l="";v=null;y=1E10;for(var B=null,z=a?Math.round(a.x)+","+Math.round(a.y):"",r=0;r<(g?g.length:0);++r)if(g[r]){v||(v=g[r]);if(g[r].exact&&(!v||!v.exact)){v=g[r];break}if(a&&void 0!==g[r].x&&void 0!==g[r].y){var D=
(a.x-g[r].x)*(a.x-g[r].x)+(a.y-g[r].y)*(a.y-g[r].y);D<y&&(y=D,B=g[r])}}v&&v.exact||!(400>y)||(v=B);v&&(A=v.lines&&1<v.lines.length?v.lines[0]:v.name,l=v.title||"",n=v.line,!n&&v.lines&&(n=v.lines.slice(1).join(" ")));this.showObjectStatus(A,l,n,z);if(!a||u||0===g.length||0===f||15<C)h.remove();else{h.empty()&&(h=x.append("svg:g").attr("class","objects_hints").style("pointer-events","none"));y={x:0,y:0};f=b.transform||"";m.iscan||(y=p.getAbsPosInCanvas(this.getPadSvg(),y),f="translate("+y.x+","+y.y+
") "+f);h.attr("transform",f).property("last_point",a).property("hints_pad",this.getPadName());m=h.property("viewmode")||"";f=0;u=a.x+b.hint_delta_x;1<C?(l=x=.5,"left"==m?l=.7:"right"==m&&(x=.3),u<=x*b.width?(m="left",u=20):u>=l*b.width?(m="right",u=b.width-60):u=h.property("startx")):(m="single",u+=15);m!==h.property("viewmode")&&(h.property("viewmode",m),h.selectAll("*").remove());l=x=10;n=A=-1111;v=-y.y;var H=this.getCanvPainter().getPadHeight()-b.y-y.y;for(y=0;y<g.length;++y)if(B=function(){return function(){return function(a){return.8>
a?"0":5*(a-.8)}}},z=g[y],r=h.select(".painter_hint_"+y),null===z)r.remove();else{(D=r.empty())&&(r=h.append("svg:svg").attr("class","painter_hint_"+y).attr("opacity",0).style("overflow","hidden").style("pointer-events","none"));"single"==m?x=a.touch?a.y-z.height-5:Math.min(a.y+15,H-z.height-3)+b.hint_delta_y:(l=c(l),-1111===A&&-1111===n&&(A=n=z.x),A=Math.min(A,z.x),n=Math.min(n,z.x));r.attr("x",u).attr("y",x).property("curry",x).property("gapy",l);x+=z.height+5;l+=z.height+5;D||r.selectAll("*").remove();
r.attr("width",60).attr("height",z.height);var F=r.append("rect").attr("x",0).attr("y",0).attr("width",60).attr("height",z.height).attr("fill","lightgrey").style("pointer-events","none");if(1<C){var G=k?z.color1:z.color2;void 0!==G&&"none"!==G&&F.attr("stroke",G).attr("stroke-width",z.exact?3:1)}for(F=0;F<(z.lines?z.lines.length:0);F++)null!==z.lines[F]&&(G=r.append("svg:text").attr("text-anchor","start").attr("x",3).attr("y",3+F*w*1.2).attr("dy",".8em").attr("fill","black").style("pointer-events",
"none").call(t.func).text(z.lines[F]),G=p.getElementRect(G,"bbox"),f=Math.max(f,G.width));D&&(0<JSROOT.settings.TooltipAnimation?r.transition().duration(JSROOT.settings.TooltipAnimation).attrTween("opacity",B()):r.attr("opacity",1))}f+=6;a=h.selectAll("svg");"right"==m&&u+f>b.width-20&&(u=b.width-f-20,a.attr("x",u));"single"==m&&u+f>d-b.x&&u>f+20&&(u-=f+20,a.attr("x",u));if("single"!==m&&l<H&&l!==x)A<=u+f+5&&n>=u-5&&a.attr("y",function(){return e.select(this).property("gapy")});else if("single"!==
m&&x>H){var I=Math.max(H-x-10,v);0>I&&a.attr("y",function(){return e.select(this).property("curry")+I})}10<f&&a.attr("width",f).select("rect").attr("width",f);h.property("startx",u)}},assign:function(a){a.tooltip_enabled=!0;a.hints_layer=this.hints_layer;a.isTooltipShown=this.isTooltipShown;a.setTooltipEnabled=this.setTooltipEnabled;a.processFrameTooltipEvent=this.processFrameTooltipEvent}},k=function(a,b){a&&((a=a.getFramePainter())&&"function"==typeof a.setTooltipEnabled&&(a.setTooltipEnabled(b),
a.processFrameTooltipEvent(null)),$jscomp$this.control&&"function"==typeof $jscomp$this.control.setTooltipEnabled&&$jscomp$this.control.setTooltipEnabled(b))},B={camera:{path:"M 152.00,304.00c0.00,57.438, 46.562,104.00, 104.00,104.00s 104.00-46.562, 104.00-104.00s-46.562-104.00-104.00-104.00S 152.00,246.562, 152.00,304.00z M 480.00,128.00L 368.00,128.00 c-8.00-32.00-16.00-64.00-48.00-64.00L 192.00,64.00 c-32.00,0.00-40.00,32.00-48.00,64.00L 32.00,128.00 c-17.60,0.00-32.00,14.40-32.00,32.00l0.00,288.00 c0.00,17.60, 14.40,32.00, 32.00,32.00l 448.00,0.00 c 17.60,0.00, 32.00-14.40, 32.00-32.00L 512.00,160.00 C 512.00,142.40, 497.60,128.00, 480.00,128.00z M 256.00,446.00c-78.425,0.00-142.00-63.574-142.00-142.00c0.00-78.425, 63.575-142.00, 142.00-142.00c 78.426,0.00, 142.00,63.575, 142.00,142.00 C 398.00,382.426, 334.427,446.00, 256.00,446.00z M 480.00,224.00l-64.00,0.00 l0.00-32.00 l 64.00,0.00 L 480.00,224.00 z"},
disk:{path:"M384,0H128H32C14.336,0,0,14.336,0,32v448c0,17.656,14.336,32,32,32h448c17.656,0,32-14.344,32-32V96L416,0H384z M352,160   V32h32v128c0,17.664-14.344,32-32,32H160c-17.664,0-32-14.336-32-32V32h128v128H352z M96,288c0-17.656,14.336-32,32-32h256   c17.656,0,32,14.344,32,32v192H96V288z"},question:{path:"M256,512c141.375,0,256-114.625,256-256S397.375,0,256,0S0,114.625,0,256S114.625,512,256,512z M256,64   c63.719,0,128,36.484,128,118.016c0,47.453-23.531,84.516-69.891,110.016C300.672,299.422,288,314.047,288,320   c0,17.656-14.344,32-32,32c-17.664,0-32-14.344-32-32c0-40.609,37.25-71.938,59.266-84.031   C315.625,218.109,320,198.656,320,182.016C320,135.008,279.906,128,256,128c-30.812,0-64,20.227-64,64.672   c0,17.664-14.336,32-32,32s-32-14.336-32-32C128,109.086,193.953,64,256,64z M256,449.406c-18.211,0-32.961-14.75-32.961-32.969   c0-18.188,14.75-32.953,32.961-32.953c18.219,0,32.969,14.766,32.969,32.953C288.969,434.656,274.219,449.406,256,449.406z"},
undo:{path:"M450.159,48.042c8.791,9.032,16.983,18.898,24.59,29.604c7.594,10.706,14.146,22.207,19.668,34.489  c5.509,12.296,9.82,25.269,12.92,38.938c3.113,13.669,4.663,27.834,4.663,42.499c0,14.256-1.511,28.863-4.532,43.822  c-3.009,14.952-7.997,30.217-14.953,45.795c-6.955,15.577-16.202,31.52-27.755,47.826s-25.88,32.9-42.942,49.807  c-5.51,5.444-11.787,11.67-18.834,18.651c-7.033,6.98-14.496,14.366-22.39,22.168c-7.88,7.802-15.955,15.825-24.187,24.069  c-8.258,8.231-16.333,16.203-24.252,23.888c-18.3,18.13-37.354,37.016-57.191,56.65l-56.84-57.445  c19.596-19.472,38.54-38.279,56.84-56.41c7.75-7.685,15.772-15.604,24.108-23.757s16.438-16.163,24.33-24.057  c7.894-7.893,15.356-15.33,22.402-22.312c7.034-6.98,13.312-13.193,18.821-18.651c22.351-22.402,39.165-44.648,50.471-66.738  c11.279-22.09,16.932-43.567,16.932-64.446c0-15.785-3.217-31.005-9.638-45.671c-6.422-14.665-16.229-28.504-29.437-41.529  c-3.282-3.282-7.358-6.395-12.217-9.325c-4.871-2.938-10.381-5.503-16.516-7.697c-6.121-2.201-12.815-3.992-20.058-5.373  c-7.242-1.374-14.9-2.064-23.002-2.064c-8.218,0-16.802,0.834-25.788,2.507c-8.961,1.674-18.053,4.429-27.222,8.271  c-9.189,3.842-18.456,8.869-27.808,15.089c-9.358,6.219-18.521,13.819-27.502,22.793l-59.92,60.271l93.797,94.058H0V40.91  l93.27,91.597l60.181-60.532c13.376-15.018,27.222-27.248,41.536-36.697c14.308-9.443,28.608-16.776,42.89-21.992  c14.288-5.223,28.505-8.74,42.623-10.557C294.645,0.905,308.189,0,321.162,0c13.429,0,26.389,1.185,38.84,3.562  c12.478,2.377,24.2,5.718,35.192,10.029c11.006,4.311,21.126,9.404,30.374,15.265C434.79,34.724,442.995,41.119,450.159,48.042z"},
arrow_right:{path:"M30.796,226.318h377.533L294.938,339.682c-11.899,11.906-11.899,31.184,0,43.084c11.887,11.899,31.19,11.893,43.077,0  l165.393-165.386c5.725-5.712,8.924-13.453,8.924-21.539c0-8.092-3.213-15.84-8.924-21.551L338.016,8.925  C332.065,2.975,324.278,0,316.478,0c-7.802,0-15.603,2.968-21.539,8.918c-11.899,11.906-11.899,31.184,0,43.084l113.391,113.384  H30.796c-16.822,0-30.463,13.645-30.463,30.463C0.333,212.674,13.974,226.318,30.796,226.318z"},arrow_up:{path:"M295.505,629.446V135.957l148.193,148.206c15.555,15.559,40.753,15.559,56.308,0c15.555-15.538,15.546-40.767,0-56.304  L283.83,11.662C276.372,4.204,266.236,0,255.68,0c-10.568,0-20.705,4.204-28.172,11.662L11.333,227.859  c-7.777,7.777-11.666,17.965-11.666,28.158c0,10.192,3.88,20.385,11.657,28.158c15.563,15.555,40.762,15.555,56.317,0  l148.201-148.219v493.489c0,21.993,17.837,39.82,39.82,39.82C277.669,669.267,295.505,651.439,295.505,629.446z"},
arrow_diag:{path:"M279.875,511.994c-1.292,0-2.607-0.102-3.924-0.312c-10.944-1.771-19.333-10.676-20.457-21.71L233.97,278.348  L22.345,256.823c-11.029-1.119-19.928-9.51-21.698-20.461c-1.776-10.944,4.031-21.716,14.145-26.262L477.792,2.149  c9.282-4.163,20.167-2.165,27.355,5.024c7.201,7.189,9.199,18.086,5.024,27.356L302.22,497.527  C298.224,506.426,289.397,511.994,279.875,511.994z M118.277,217.332l140.534,14.294c11.567,1.178,20.718,10.335,21.878,21.896  l14.294,140.519l144.09-320.792L118.277,217.332z"},
auto_zoom:{path:"M505.441,242.47l-78.303-78.291c-9.18-9.177-24.048-9.171-33.216,0c-9.169,9.172-9.169,24.045,0.006,33.217l38.193,38.188  H280.088V80.194l38.188,38.199c4.587,4.584,10.596,6.881,16.605,6.881c6.003,0,12.018-2.297,16.605-6.875  c9.174-9.172,9.174-24.039,0.011-33.217L273.219,6.881C268.803,2.471,262.834,0,256.596,0c-6.229,0-12.202,2.471-16.605,6.881  l-78.296,78.302c-9.178,9.172-9.178,24.045,0,33.217c9.177,9.171,24.051,9.171,33.21,0l38.205-38.205v155.4H80.521l38.2-38.188  c9.177-9.171,9.177-24.039,0.005-33.216c-9.171-9.172-24.039-9.178-33.216,0L7.208,242.464c-4.404,4.403-6.881,10.381-6.881,16.611  c0,6.227,2.477,12.207,6.881,16.61l78.302,78.291c4.587,4.581,10.599,6.875,16.605,6.875c6.006,0,12.023-2.294,16.61-6.881  c9.172-9.174,9.172-24.036-0.005-33.211l-38.205-38.199h152.593v152.063l-38.199-38.211c-9.171-9.18-24.039-9.18-33.216-0.022  c-9.178,9.18-9.178,24.059-0.006,33.222l78.284,78.302c4.41,4.404,10.382,6.881,16.611,6.881c6.233,0,12.208-2.477,16.611-6.881  l78.302-78.296c9.181-9.18,9.181-24.048,0-33.205c-9.174-9.174-24.054-9.174-33.21,0l-38.199,38.188v-152.04h152.051l-38.205,38.199  c-9.18,9.175-9.18,24.037-0.005,33.211c4.587,4.587,10.596,6.881,16.604,6.881c6.01,0,12.024-2.294,16.605-6.875l78.303-78.285  c4.403-4.403,6.887-10.378,6.887-16.611C512.328,252.851,509.845,246.873,505.441,242.47z"},
statbox:{path:"M28.782,56.902H483.88c15.707,0,28.451-12.74,28.451-28.451C512.331,12.741,499.599,0,483.885,0H28.782   C13.074,0,0.331,12.741,0.331,28.451C0.331,44.162,13.074,56.902,28.782,56.902zM483.885,136.845H28.782c-15.708,0-28.451,12.741-28.451,28.451c0,15.711,12.744,28.451,28.451,28.451H483.88   c15.707,0,28.451-12.74,28.451-28.451C512.331,149.586,499.599,136.845,483.885,136.845zM483.885,273.275H28.782c-15.708,0-28.451,12.731-28.451,28.452c0,15.707,12.744,28.451,28.451,28.451H483.88   c15.707,0,28.451-12.744,28.451-28.451C512.337,286.007,499.599,273.275,483.885,273.275zM256.065,409.704H30.492c-15.708,0-28.451,12.731-28.451,28.451c0,15.707,12.744,28.451,28.451,28.451h225.585   c15.707,0,28.451-12.744,28.451-28.451C284.516,422.436,271.785,409.704,256.065,409.704z"},
circle:{path:"M256,256 m-150,0 a150,150 0 1,0 300,0 a150,150 0 1,0 -300,0"},three_circles:{path:"M256,85 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0  M256,255 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0  M256,425 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0 "},diamand:{path:"M256,0L384,256L256,511L128,256z"},rect:{path:"M80,80h352v352h-352z"},cross:{path:"M80,40l176,176l176,-176l40,40l-176,176l176,176l-40,40l-176,-176l-176,176l-40,-40l176,-176l-176,-176z"},vrgoggles:{size:"245.82 141.73",path:"M175.56,111.37c-22.52,0-40.77-18.84-40.77-42.07S153,27.24,175.56,27.24s40.77,18.84,40.77,42.07S198.08,111.37,175.56,111.37ZM26.84,69.31c0-23.23,18.25-42.07,40.77-42.07s40.77,18.84,40.77,42.07-18.26,42.07-40.77,42.07S26.84,92.54,26.84,69.31ZM27.27,0C11.54,0,0,12.34,0,28.58V110.9c0,16.24,11.54,30.83,27.27,30.83H99.57c2.17,0,4.19-1.83,5.4-3.7L116.47,118a8,8,0,0,1,12.52-.18l11.51,20.34c1.2,1.86,3.22,3.61,5.39,3.61h72.29c15.74,0,27.63-14.6,27.63-30.83V28.58C245.82,12.34,233.93,0,218.19,0H27.27Z"},
th2colorz:{recs:[{x:128,y:486,w:256,h:26,f:"rgb(38,62,168)"},{y:461,f:"rgb(22,82,205)"},{y:435,f:"rgb(16,100,220)"},{y:410,f:"rgb(18,114,217)"},{y:384,f:"rgb(20,129,214)"},{y:358,f:"rgb(14,143,209)"},{y:333,f:"rgb(9,157,204)"},{y:307,f:"rgb(13,167,195)"},{y:282,f:"rgb(30,175,179)"},{y:256,f:"rgb(46,183,164)"},{y:230,f:"rgb(82,186,146)"},{y:205,f:"rgb(116,189,129)"},{y:179,f:"rgb(149,190,113)"},{y:154,f:"rgb(179,189,101)"},{y:128,f:"rgb(209,187,89)"},{y:102,f:"rgb(226,192,75)"},{y:77,f:"rgb(244,198,59)"},
{y:51,f:"rgb(253,210,43)"},{y:26,f:"rgb(251,230,29)"},{y:0,f:"rgb(249,249,15)"}]},th2color:{recs:[{x:0,y:256,w:13,h:39,f:"rgb(38,62,168)"},{x:13,y:371,w:39,h:39},{y:294,h:39},{y:256,h:39},{y:218,h:39},{x:51,y:410,w:39,h:39},{y:371,h:39},{y:333,h:39},{y:294},{y:256,h:39},{y:218,h:39},{y:179,h:39},{y:141,h:39},{y:102,h:39},{y:64},{x:90,y:448,w:39,h:39},{y:410},{y:371,h:39},{y:333,h:39,f:"rgb(22,82,205)"},{y:294},{y:256,h:39,f:"rgb(16,100,220)"},{y:218,h:39},{y:179,h:39,f:"rgb(22,82,205)"},{y:141,h:39},
{y:102,h:39,f:"rgb(38,62,168)"},{y:64},{y:0,h:27},{x:128,y:448,w:39,h:39},{y:410},{y:371,h:39},{y:333,h:39,f:"rgb(22,82,205)"},{y:294,f:"rgb(20,129,214)"},{y:256,h:39,f:"rgb(9,157,204)"},{y:218,h:39,f:"rgb(14,143,209)"},{y:179,h:39,f:"rgb(20,129,214)"},{y:141,h:39,f:"rgb(16,100,220)"},{y:102,h:39,f:"rgb(22,82,205)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{y:0,h:27},{x:166,y:486,h:14},{y:448,h:39},{y:410},{y:371,h:39,f:"rgb(22,82,205)"},{y:333,h:39,f:"rgb(20,129,214)"},{y:294,f:"rgb(82,186,146)"},{y:256,
h:39,f:"rgb(179,189,101)"},{y:218,h:39,f:"rgb(116,189,129)"},{y:179,h:39,f:"rgb(82,186,146)"},{y:141,h:39,f:"rgb(14,143,209)"},{y:102,h:39,f:"rgb(16,100,220)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{x:205,y:486,w:39,h:14},{y:448,h:39},{y:410},{y:371,h:39,f:"rgb(16,100,220)"},{y:333,h:39,f:"rgb(9,157,204)"},{y:294,f:"rgb(149,190,113)"},{y:256,h:39,f:"rgb(244,198,59)"},{y:218,h:39},{y:179,h:39,f:"rgb(226,192,75)"},{y:141,h:39,f:"rgb(13,167,195)"},{y:102,h:39,f:"rgb(18,114,217)"},{y:64,f:"rgb(22,82,205)"},
{y:26,h:39,f:"rgb(38,62,168)"},{x:243,y:448,w:39,h:39},{y:410},{y:371,h:39,f:"rgb(18,114,217)"},{y:333,h:39,f:"rgb(30,175,179)"},{y:294,f:"rgb(209,187,89)"},{y:256,h:39,f:"rgb(251,230,29)"},{y:218,h:39,f:"rgb(249,249,15)"},{y:179,h:39,f:"rgb(226,192,75)"},{y:141,h:39,f:"rgb(30,175,179)"},{y:102,h:39,f:"rgb(18,114,217)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{x:282,y:448,h:39},{y:410},{y:371,h:39,f:"rgb(18,114,217)"},{y:333,h:39,f:"rgb(14,143,209)"},{y:294,f:"rgb(149,190,113)"},{y:256,h:39,f:"rgb(226,192,75)"},
{y:218,h:39,f:"rgb(244,198,59)"},{y:179,h:39,f:"rgb(149,190,113)"},{y:141,h:39,f:"rgb(9,157,204)"},{y:102,h:39,f:"rgb(18,114,217)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{x:320,y:448,w:39,h:39},{y:410},{y:371,h:39,f:"rgb(22,82,205)"},{y:333,h:39,f:"rgb(20,129,214)"},{y:294,f:"rgb(46,183,164)"},{y:256,h:39},{y:218,h:39,f:"rgb(82,186,146)"},{y:179,h:39,f:"rgb(9,157,204)"},{y:141,h:39,f:"rgb(20,129,214)"},{y:102,h:39,f:"rgb(16,100,220)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{x:358,y:448,h:39},{y:410},
{y:371,h:39,f:"rgb(22,82,205)"},{y:333,h:39},{y:294,f:"rgb(16,100,220)"},{y:256,h:39,f:"rgb(20,129,214)"},{y:218,h:39,f:"rgb(14,143,209)"},{y:179,h:39,f:"rgb(18,114,217)"},{y:141,h:39,f:"rgb(22,82,205)"},{y:102,h:39,f:"rgb(38,62,168)"},{y:64},{y:26,h:39},{x:397,y:448,w:39,h:39},{y:371,h:39},{y:333,h:39},{y:294,f:"rgb(22,82,205)"},{y:256,h:39},{y:218,h:39},{y:179,h:39,f:"rgb(38,62,168)"},{y:141,h:39},{y:102,h:39},{y:64},{y:26,h:39},{x:435,y:410,h:39},{y:371,h:39},{y:333,h:39},{y:294},{y:256,h:39},
{y:218,h:39},{y:179,h:39},{y:141,h:39},{y:102,h:39},{y:64},{x:474,y:256,h:39},{y:179,h:39}]},th2draw3d:{path:"M172.768,0H51.726C23.202,0,0.002,23.194,0.002,51.712v89.918c0,28.512,23.2,51.718,51.724,51.718h121.042   c28.518,0,51.724-23.2,51.724-51.718V51.712C224.486,23.194,201.286,0,172.768,0z M177.512,141.63c0,2.611-2.124,4.745-4.75,4.745   H51.726c-2.626,0-4.751-2.134-4.751-4.745V51.712c0-2.614,2.125-4.739,4.751-4.739h121.042c2.62,0,4.75,2.125,4.75,4.739 L177.512,141.63L177.512,141.63z M460.293,0H339.237c-28.521,0-51.721,23.194-51.721,51.712v89.918c0,28.512,23.2,51.718,51.721,51.718h121.045   c28.521,0,51.721-23.2,51.721-51.718V51.712C512.002,23.194,488.802,0,460.293,0z M465.03,141.63c0,2.611-2.122,4.745-4.748,4.745   H339.237c-2.614,0-4.747-2.128-4.747-4.745V51.712c0-2.614,2.133-4.739,4.747-4.739h121.045c2.626,0,4.748,2.125,4.748,4.739 V141.63z M172.768,256.149H51.726c-28.524,0-51.724,23.205-51.724,51.726v89.915c0,28.504,23.2,51.715,51.724,51.715h121.042   c28.518,0,51.724-23.199,51.724-51.715v-89.915C224.486,279.354,201.286,256.149,172.768,256.149z M177.512,397.784   c0,2.615-2.124,4.736-4.75,4.736H51.726c-2.626-0.006-4.751-2.121-4.751-4.736v-89.909c0-2.626,2.125-4.753,4.751-4.753h121.042 c2.62,0,4.75,2.116,4.75,4.753L177.512,397.784L177.512,397.784z M460.293,256.149H339.237c-28.521,0-51.721,23.199-51.721,51.726v89.915c0,28.504,23.2,51.715,51.721,51.715h121.045   c28.521,0,51.721-23.199,51.721-51.715v-89.915C512.002,279.354,488.802,256.149,460.293,256.149z M465.03,397.784   c0,2.615-2.122,4.736-4.748,4.736H339.237c-2.614,0-4.747-2.121-4.747-4.736v-89.909c0-2.626,2.121-4.753,4.747-4.753h121.045 c2.615,0,4.748,2.116,4.748,4.753V397.784z"},
createSVG:function(a,b,c,d){a=a.append("svg:svg").attr("class","svg_toolbar_btn").attr("width",c+"px").attr("height",c+"px").attr("viewBox","0 0 512 512").style("overflow","hidden");if("recs"in b){c={};for(var g=0;g<b.recs.length;++g)JSROOT.extend(c,b.recs[g]),a.append("rect").attr("x",c.x).attr("y",c.y).attr("width",c.w).attr("height",c.h).attr("fill",c.f)}else a.append("svg:path").attr("d",b.path);a.append("svg:rect").attr("x",0).attr("y",0).attr("width",512).attr("height",512).style("opacity",
0).style("fill","none").style("pointer-events","visibleFill").append("svg:title").text(d);return a}};return{TooltipHandler:D,addDragHandler:t,addMoveHandler:function(a,b){void 0===b&&(b=!0);if(JSROOT.settings.MoveResize&&!JSROOT.batch_mode&&a.draw_g)if(!b)a.draw_g.property("assigned_move")&&(b=e.drag().subject(Object),b.on("start",null).on("drag",null).on("end",null),a.draw_g.style("cursor",null).property("assigned_move",null).call(b));else if(!a.draw_g.property("assigned_move")){b=e.drag().subject(Object);
var c=!0,d=!1;b.on("start",function(a){d=this.moveEnabled?!this.moveEnabled():!1;var b;if(b=!d)b=a.sourceEvent,b=!("buttons"in b?2===b.buttons:"which"in b?3===b.which:"button"in b&&2===b.button);b&&(a.sourceEvent.preventDefault(),a.sourceEvent.stopPropagation(),a=e.pointer(a,this.draw_g.node()),c=!0,this.moveStart&&this.moveStart(a[0],a[1]))}.bind(a)).on("drag",function(a){d||(a.sourceEvent.preventDefault(),a.sourceEvent.stopPropagation(),c=!1,this.moveDrag&&this.moveDrag(a.dx,a.dy))}.bind(a)).on("end",
function(a){d||(a.sourceEvent.preventDefault(),a.sourceEvent.stopPropagation(),this.moveEnd&&this.moveEnd(c),(a=this.getPadPainter())&&a.selectObjectPainter(this))}.bind(a));a.draw_g.style("cursor","move").property("assigned_move",!0).call(b)}},FrameInteractive:{addBasicInteractivity:function(){var a=this;D.assign(this);this.draw_g.attr("x",this._frame_x).attr("y",this._frame_y).attr("width",this.getFrameWidth()).attr("height",this.getFrameHeight());this._frame_rotate||this._frame_fixpos||t(this,
{obj:this,only_resize:!0,minwidth:20,minheight:20,redraw:function(){return a.sizeChanged()}});var b=this.draw_g.select(".main_layer");b.style("pointer-events","visibleFill").property("handlers_set",0);var c=this.getPadPainter(),d=c&&c._fast_drawing?0:1;if(b.property("handlers_set")!=d){c=d?this.processFrameTooltipEvent.bind(this,null):null;var e=d?this.processFrameTooltipEvent.bind(this,{handler:!0,touch:!1}):null;b.property("handlers_set",d).on("mouseenter",e).on("mousemove",e).on("mouseleave",c);
JSROOT.browser.touches&&(d=d?this.processFrameTooltipEvent.bind(this,{handler:!0,touch:!0}):null,b.on("touchstart",d).on("touchmove",d).on("touchend",c).on("touchcancel",c))}b.attr("x",0).attr("y",0).attr("width",this.getFrameWidth()).attr("height",this.getFrameHeight());b=this.hints_layer().select(".objects_hints");!b.empty()&&this.isTooltipAllowed()&&b.property("hints_pad")==this.getPadName()&&setTimeout(this.processFrameTooltipEvent.bind(this,b.property("last_point"),null),10)},addInteractivity:function(){var a=
this,b=this.getPadPainter(),c=this.getFrameSvg();if(b&&b._fast_drawing||c.empty())return Promise.resolve(this);b=c.selectAll(".xaxis_container");var d=c.selectAll(".yaxis_container");c.property("interactive_set")||(this.addKeysHandler(),this.last_touch=new Date(0),this.zoom_kind=0,this.zoom_curr=this.zoom_origin=this.zoom_rect=null,this.touch_cnt=0);if(JSROOT.settings.Zooming&&!this.projection&&(JSROOT.settings.ZoomMouse&&(c.on("mousedown",this.startRectSel.bind(this)),c.on("dblclick",this.mouseDoubleClick.bind(this))),
JSROOT.settings.ZoomWheel))c.on("wheel",this.mouseWheel.bind(this));if(JSROOT.browser.touches&&(JSROOT.settings.Zooming&&JSROOT.settings.ZoomTouch&&!this.projection||JSROOT.settings.ContextMenu))c.on("touchstart",this.startTouchZoom.bind(this));JSROOT.settings.ContextMenu&&(JSROOT.browser.touches&&(b.on("touchstart",this.startTouchMenu.bind(this,"x")),d.on("touchstart",this.startTouchMenu.bind(this,"y"))),c.on("contextmenu",function(b){return a.showContextMenu("",b)}),b.on("contextmenu",function(b){return a.showContextMenu("x",
b)}),d.on("contextmenu",function(b){return a.showContextMenu("y",b)}));b.on("mousemove",function(b){return a.showAxisStatus("x",b)});d.on("mousemove",function(b){return a.showAxisStatus("y",b)});c.property("interactive_set",!0);return Promise.resolve(this)},addKeysHandler:function(){var a=this;this.keys_handler||"undefined"==typeof window||(this.keys_handler=function(b){return a.processKeyPress(b)},window.addEventListener("keydown",this.keys_handler,!1))},processKeyPress:function(a){var b=this.selectDom();
if(JSROOT.settings.HandleKeys&&!b.empty()&&!1!==this.enabledKeys){switch(a.keyCode){case 33:var c="PageUp";break;case 34:c="PageDown";break;case 37:c="ArrowLeft";break;case 38:c="ArrowUp";break;case 39:c="ArrowRight";break;case 40:c="ArrowDown";break;case 42:c="PrintScreen";break;case 106:c="*";break;default:return!1}b=this.getPadPainter();if(p.getActivePad()===b){a.shiftKey&&(c="Shift "+c);a.altKey&&(c="Alt "+c);a.ctrlKey&&(c="Ctrl "+c);var d={name:"x",dleft:0,dright:0};switch(c){case "ArrowLeft":d.dleft=
-1;d.dright=1;break;case "ArrowRight":d.dleft=1;d.dright=-1;break;case "Ctrl ArrowLeft":d.dleft=d.dright=-1;break;case "Ctrl ArrowRight":d.dleft=d.dright=1;break;case "ArrowUp":d.name="y";d.dleft=1;d.dright=-1;break;case "ArrowDown":d.name="y";d.dleft=-1;d.dright=1;break;case "Ctrl ArrowUp":d.name="y";d.dleft=d.dright=1;break;case "Ctrl ArrowDown":d.name="y",d.dleft=d.dright=-1}if(d.dleft||d.dright){if(!JSROOT.settings.Zooming||this.mode3d&&0!==c.indexOf("Ctrl"))return!1;this.analyzeMouseWheelEvent(null,
d,.5);this.zoom(d.name,d.min,d.max);d.changed&&this.zoomChangedInteractive(d.name,!0);a.stopPropagation();a.preventDefault()}else if(c=b&&b.findPadButton?b.findPadButton(c):"")b.clickPadButton(c),a.stopPropagation(),a.preventDefault();return!0}}},processFrameClick:function(a,b){var c=this.getPadPainter();if(c){a.painters=!0;a.disabled=!0;for(var d=c.processPadTooltipEvent(a),e=null,f=0;f<d.length&&!e;++f)d[f]&&d[f].exact&&(e=d[f]);var k;e&&(d=b?this._dblclick_handler:this._click_handler)&&(k=d(e.user_info,
a));b||c.selectObjectPainter(e?e.painter:this,{x:a.x+(this._frame_x||0),y:a.y+(this._frame_y||0)});return k}},startRectSel:function(a){var b=this;if(!(100<this.zoom_kind)&&1===(a.which||a.button)){a.preventDefault();var c=this.getFrameSvg();c=e.pointer(a,c.node());this.clearInteractiveElements();var d=this.getFrameWidth(),g=this.getFrameHeight();this.zoom_lastpos=c;this.zoom_curr=[Math.max(0,Math.min(d,c[0])),Math.max(0,Math.min(g,c[1]))];this.zoom_origin=[0,0];0>c[0]||c[0]>d?(this.zoom_kind=3,this.zoom_origin[1]=
this.zoom_curr[1],this.zoom_curr[0]=d,this.zoom_curr[1]+=1):0>c[1]||c[1]>g?(this.zoom_kind=2,this.zoom_origin[0]=this.zoom_curr[0],this.zoom_curr[0]+=1,this.zoom_curr[1]=g):(this.zoom_kind=1,this.zoom_origin[0]=this.zoom_curr[0],this.zoom_origin[1]=this.zoom_curr[1]);e.select(window).on("mousemove.zoomRect",this.moveRectSel.bind(this)).on("mouseup.zoomRect",this.endRectSel.bind(this),!0);this.zoom_rect=null;k(this,!1);a.stopPropagation();1!=this.zoom_kind&&setTimeout(function(){return b.startLabelsMove()},
500)}},startLabelsMove:function(){if(!this.zoom_rect){var a=2==this.zoom_kind?this.x_handle:this.y_handle;a&&"function"==typeof a.processLabelsMove&&this.zoom_lastpos&&a.processLabelsMove("start",this.zoom_lastpos)&&(this.zoom_labels=a)}},moveRectSel:function(a){if(!(0==this.zoom_kind||100<this.zoom_kind)){a.preventDefault();a=e.pointer(a,this.getFrameSvg().node());if(this.zoom_labels)return this.zoom_labels.processLabelsMove("move",a);this.zoom_lastpos[0]=a[0];this.zoom_lastpos[1]=a[1];a[0]=Math.max(0,
Math.min(this.getFrameWidth(),a[0]));a[1]=Math.max(0,Math.min(this.getFrameHeight(),a[1]));switch(this.zoom_kind){case 1:this.zoom_curr[0]=a[0];this.zoom_curr[1]=a[1];break;case 2:this.zoom_curr[0]=a[0];break;case 3:this.zoom_curr[1]=a[1]}a=Math.min(this.zoom_origin[0],this.zoom_curr[0]);var b=Math.min(this.zoom_origin[1],this.zoom_curr[1]),c=Math.abs(this.zoom_curr[0]-this.zoom_origin[0]),d=Math.abs(this.zoom_curr[1]-this.zoom_origin[1]);if(!this.zoom_rect){if(1!=this.zoom_kind&&(2>c||2>d))return;
this.zoom_rect=this.getFrameSvg().append("rect").attr("class","zoom").attr("pointer-events","none")}this.zoom_rect.attr("x",a).attr("y",b).attr("width",c).attr("height",d)}},endRectSel:function(a){if(!(0==this.zoom_kind||100<this.zoom_kind)){a.preventDefault();e.select(window).on("mousemove.zoomRect",null).on("mouseup.zoomRect",null);var b=e.pointer(a,this.getFrameSvg().node());a=this.zoom_kind;if(this.zoom_labels)this.zoom_labels.processLabelsMove("stop",b);else{var c=[!0,!0];b[0]=Math.max(0,Math.min(this.getFrameWidth(),
b[0]));b[1]=Math.max(0,Math.min(this.getFrameHeight(),b[1]));switch(this.zoom_kind){case 1:this.zoom_curr[0]=b[0];this.zoom_curr[1]=b[1];break;case 2:this.zoom_curr[0]=b[0];c[1]=!1;break;case 3:this.zoom_curr[1]=b[1],c[0]=!1}b=!1;var d=this.swap_xy?1:0,g=1-d;if(c[d]&&10<Math.abs(this.zoom_curr[d]-this.zoom_origin[d])){var f=Math.min(this.revertAxis("x",this.zoom_origin[d]),this.revertAxis("x",this.zoom_curr[d]));var k=Math.max(this.revertAxis("x",this.zoom_origin[d]),this.revertAxis("x",this.zoom_curr[d]));
b=!0}if(c[g]&&10<Math.abs(this.zoom_curr[g]-this.zoom_origin[g])){var h=Math.min(this.revertAxis("y",this.zoom_origin[g]),this.revertAxis("y",this.zoom_curr[g]));var q=Math.max(this.revertAxis("y",this.zoom_origin[g]),this.revertAxis("y",this.zoom_curr[g]));b=!0}b&&(this.zoomChangedInteractive("x",!0),this.zoomChangedInteractive("y",!0),this.zoom(f,k,h,q),a=0)}f=1===a?{x:this.zoom_origin[0],y:this.zoom_origin[1]}:null;this.clearInteractiveElements();switch(a){case 1:this.processFrameClick(f);break;
case 2:(a=this.getPadPainter())&&a.selectObjectPainter(this,null,"xaxis");break;case 3:(a=this.getPadPainter())&&a.selectObjectPainter(this,null,"yaxis")}}},mouseDoubleClick:function(a){var b=this;a.preventDefault();var c=e.pointer(a,this.getFrameSvg().node());this.clearInteractiveElements();a=0<=c[0]&&c[0]<=this.getFrameWidth();var d=0<=c[1]&&c[1]<=this.getFrameHeight();if(!(a&&d&&this._dblclick_handler&&this.processFrameClick({x:c[0],y:c[1]},!0))){var g="xyz";a?d||(g=this.swap_xy?"y":"x"):g=this.swap_xy?
"x":"y";this.unzoom(g).then(function(a){if(!a){a=b.getPadPainter();var d=b.getFrameRect();a&&a.selectObjectPainter(a,{x:c[0]+d.x,y:c[1]+d.y,dbl:!0})}})}},startTouchZoom:function(a){if(0!=this.zoom_kind)a.preventDefault(),a.stopPropagation();else{var b=e.pointers(a,this.getFrameSvg().node());this.touch_cnt+=1;if(1==b.length){var c=new Date,d=c.getTime()-this.last_touch.getTime();this.last_touch=c;300>d&&this.zoom_curr&&30>Math.abs(this.zoom_curr[0]-b[0][0])&&30>Math.abs(this.zoom_curr[1]-b[0][1])?
(a.preventDefault(),a.stopPropagation(),this.clearInteractiveElements(),this.unzoom("xyz"),this.last_touch=new Date(0),this.getFrameSvg().on("touchcancel",null).on("touchend",null,!0)):JSROOT.settings.ContextMenu&&(this.zoom_curr=b[0],this.getFrameSvg().on("touchcancel",this.endTouchSel.bind(this)).on("touchend",this.endTouchSel.bind(this)),a.preventDefault(),a.stopPropagation())}2==b.length&&JSROOT.settings.Zooming&&JSROOT.settings.ZoomTouch&&(a.preventDefault(),a.stopPropagation(),this.clearInteractiveElements(),
this.getFrameSvg().on("touchcancel",null).on("touchend",null),a=b[0],b=b[1],c=this.getFrameWidth(),d=this.getFrameHeight(),this.zoom_curr=[Math.min(a[0],b[0]),Math.min(a[1],b[1])],this.zoom_origin=[Math.max(a[0],b[0]),Math.max(a[1],b[1])],0>this.zoom_curr[0]||this.zoom_curr[0]>c?(this.zoom_kind=103,this.zoom_curr[0]=0,this.zoom_origin[0]=c):this.zoom_origin[1]>d||0>this.zoom_origin[1]?(this.zoom_kind=102,this.zoom_curr[1]=0,this.zoom_origin[1]=d):this.zoom_kind=101,k(this,!1),this.zoom_rect=this.getFrameSvg().append("rect").attr("class",
"zoom").attr("id","zoomRect").attr("x",this.zoom_curr[0]).attr("y",this.zoom_curr[1]).attr("width",this.zoom_origin[0]-this.zoom_curr[0]).attr("height",this.zoom_origin[1]-this.zoom_curr[1]),e.select(window).on("touchmove.zoomRect",this.moveTouchSel.bind(this)).on("touchcancel.zoomRect",this.endTouchSel.bind(this)).on("touchend.zoomRect",this.endTouchSel.bind(this)))}},moveTouchSel:function(a){if(!(100>this.zoom_kind)){a.preventDefault();var b=e.pointers(a,this.getFrameSvg().node());if(2!=b.length)return this.clearInteractiveElements();
var c=b[0];b=b[1];103!=this.zoom_kind&&(this.zoom_curr[0]=Math.min(c[0],b[0]),this.zoom_origin[0]=Math.max(c[0],b[0]));102!=this.zoom_kind&&(this.zoom_curr[1]=Math.min(c[1],b[1]),this.zoom_origin[1]=Math.max(c[1],b[1]));this.zoom_rect.attr("x",this.zoom_curr[0]).attr("y",this.zoom_curr[1]).attr("width",this.zoom_origin[0]-this.zoom_curr[0]).attr("height",this.zoom_origin[1]-this.zoom_curr[1]);(10<this.zoom_origin[0]-this.zoom_curr[0]||10<this.zoom_origin[1]-this.zoom_curr[1])&&k(this,!1);a.stopPropagation()}},
endTouchSel:function(a){this.getFrameSvg().on("touchcancel",null).on("touchend",null);if(0===this.zoom_kind){a.preventDefault();var b=(new Date).getTime()-this.last_touch.getTime();500<b&&2E3>b&&!this.isTooltipShown()?(this.showContextMenu("main",{clientX:this.zoom_curr[0],clientY:this.zoom_curr[1]}),this.last_touch=new Date(0)):this.clearInteractiveElements()}if(!(100>this.zoom_kind)){a.preventDefault();e.select(window).on("touchmove.zoomRect",null).on("touchend.zoomRect",null).on("touchcancel.zoomRect",
null);b=!1;var c=this.swap_xy?1:0,d=1-c,g=[!0,!0];102===this.zoom_kind&&(g[1]=!1);103===this.zoom_kind&&(g[0]=!1);if(g[c]&&10<Math.abs(this.zoom_curr[c]-this.zoom_origin[c])){var f=Math.min(this.revertAxis("x",this.zoom_origin[c]),this.revertAxis("x",this.zoom_curr[c]));var k=Math.max(this.revertAxis("x",this.zoom_origin[c]),this.revertAxis("x",this.zoom_curr[c]));b=!0}if(g[d]&&10<Math.abs(this.zoom_curr[d]-this.zoom_origin[d])){var h=Math.min(this.revertAxis("y",this.zoom_origin[d]),this.revertAxis("y",
this.zoom_curr[d]));var q=Math.max(this.revertAxis("y",this.zoom_origin[d]),this.revertAxis("y",this.zoom_curr[d]));b=!0}this.clearInteractiveElements();this.last_touch=new Date(0);b&&(this.zoomChangedInteractive("x",!0),this.zoomChangedInteractive("y",!0),this.zoom(f,k,h,q));a.stopPropagation()}},analyzeMouseWheelEvent:function(a,b,c,d){var e=this[b.name+"_handle"];if(e)return e.analyzeWheelEvent(a,c,b,d);console.error("Fail to analyze zooming event for ",b.name)},isAllowedDefaultYZooming:function(){var a=
this.getPadPainter();if(a&&a.painters)for(var b=0;b<a.painters.length;++b){var c=a.painters[b];if(c&&void 0!==c.wheel_zoomy)return c.wheel_zoomy}return!1},mouseWheel:function(a){a.stopPropagation();a.preventDefault();this.clearInteractiveElements();var b={name:"x",reverse:this.reverse_x,ignore:!1},c={name:"y",reverse:this.reverse_y,ignore:!this.isAllowedDefaultYZooming()},d=e.pointer(a,this.getFrameSvg().node()),g=this.getFrameWidth(),f=this.getFrameHeight();this.analyzeMouseWheelEvent(a,this.swap_xy?
c:b,d[0]/g,0<=d[1]&&d[1]<=f);this.analyzeMouseWheelEvent(a,this.swap_xy?b:c,1-d[1]/f,0<=d[0]&&d[0]<=g);this.zoom(b.min,b.max,c.min,c.max);b.changed&&this.zoomChangedInteractive("x",!0);c.changed&&this.zoomChangedInteractive("y",!0)},showContextMenu:function(a,b,c){if(!("zoom_kind"in this&&100<this.zoom_kind)){var d=this,g=null,f=!1,n=null;if(b.stopPropagation)if(b.preventDefault(),b.stopPropagation(),"painter"==a&&c)d=c,a="";else if(a)this.v7_frame||"x"!=a&&"y"!=a&&"z"!=a||(g=this.getMainPainter());
else{var h=e.pointer(b,this.getFrameSvg().node()),q=e.pointers(b,this.getFrameSvg().node()),w=this.getPadPainter(),m=null,t=null;n=this;1===q.length?m={x:q[0][0],y:q[0][1],touch:!0}:2===h.length&&(m={x:h[0],y:h[1],touch:!1});if(null!==m&&null!==w)for(m.painters=!0,h=w.processPadTooltipEvent(m),q=1E3,w=0;w<h.length;++w)if(h[w]&&h[w].menu){var u="menu_dist"in h[w]?h[w].menu_dist:7;u<q&&(t=h[w].painter,q=u)}t?d=t:a="frame";m&&(f=0<m.x&&20>m.x&&0<m.y&&20>m.y);n.setLastEventPos(m)}else"painter"==a&&c&&
(d=c,a="");g||(g=d);d&&d.fillContextMenu&&(this.clearInteractiveElements(),p.createMenu(b,d).then(function(b){var d=b.painter.fillContextMenu(b,a,c);n&&(!d||f&&"frame"!==a)&&(d=n.fillContextMenu(b));d&&g.fillObjectExecMenu(b,a).then(function(a){k(a.painter,!1);a.show().then(function(){return k(a.painter,!0)})})}))}},startTouchMenu:function(a,b){var c=e.pointers(b,this.getFrameSvg().node());if(1==c.length){a&&""!=a||(a="main");var d="touch_"+a;b.sourceEvent.preventDefault();b.sourceEvent.stopPropagation();
this[d]={dt:new Date,pos:c[0]};a=this.endTouchMenu.bind(this,a);this.getFrameSvg().on("touchcancel",a).on("touchend",a)}},endTouchMenu:function(a,b){var c="touch_"+a;c in this&&(b.sourceEvent.preventDefault(),b.sourceEvent.stopPropagation(),b=(new Date).getTime()-this[c].dt.getTime(),this.getFrameSvg().on("touchcancel",null).on("touchend",null),500<b&&(b=this.getFrameSvg().node().getBoundingClientRect(),this.showContextMenu(a,{clientX:b.left+this[c].pos[0],clientY:b.top+this[c].pos[1]})),delete this[c])},
clearInteractiveElements:function(){p.closeMenu&&p.closeMenu();this.zoom_kind=0;this.zoom_rect&&(this.zoom_rect.remove(),delete this.zoom_rect);delete this.zoom_curr;delete this.zoom_origin;delete this.zoom_lastpos;delete this.zoom_labels;k(this,!0)},assign:function(a){JSROOT.extend(a,this)}},ToolbarIcons:B,PadButtonsHandler:{alignButtons:function(a,b,c){var d=n(this,1.25),e=(a.property("nextx")||0)+d;a.property("vertical")?(b=a.property("leftside")?2:b-d,c-=e):(b=a.property("leftside")?2:b-e,c-=
d);a.attr("transform","translate("+b+","+c+")")},findPadButton:function(a){var b=this.getLayerSvg("btns_layer",this.this_pad_name),c="";b.empty()||b.selectAll("svg").each(function(){e.select(this).attr("key")===a&&(c=e.select(this).attr("name"))});return c},removePadButtons:function(){var a=this.getLayerSvg("btns_layer",this.this_pad_name);a.empty()||(a.selectAll("*").remove(),a.property("nextx",null))},showPadButtons:function(){var a=this,b=this.getLayerSvg("btns_layer",this.this_pad_name);if(!b.empty()&&
(b.selectAll("*").remove(),this._buttons)){var c=this.iscan||!this.has_canvas,d=b.property("leftside")?n(this,1.25):0;if(this._fast_drawing){var e=B.createSVG(b,B.circle,n(this),"enlargePad");e.attr("name","Enlarge").attr("x",0).attr("y",0).on("click",function(b){return a.clickPadButton("enlargePad",b)})}else{e=B.createSVG(b,B.rect,n(this),"Toggle tool buttons");e.attr("name","Toggle").attr("x",0).attr("y",0).property("buttons_state","popup"!==JSROOT.settings.ToolBar).on("click",function(){return f(a,
"toggle")}).on("mouseenter",function(){return f(a,"enable")}).on("mouseleave",function(){return f(a,"disable")});for(var k={},p=0;p<this._buttons.length;k={$jscomp$loop$prop$item$13:k.$jscomp$loop$prop$item$13},++p){k.$jscomp$loop$prop$item$13=this._buttons[p];var h=k.$jscomp$loop$prop$item$13.btn;"string"==typeof h&&(h=B[h]);h||(h=B.circle);h=B.createSVG(b,h,n(this),k.$jscomp$loop$prop$item$13.tooltip+(c?"":" on pad "+this.this_pad_name)+(k.$jscomp$loop$prop$item$13.keyname?" (keyshortcut "+k.$jscomp$loop$prop$item$13.keyname+
")":""));b.property("vertical")?h.attr("x",0).attr("y",d):h.attr("x",d).attr("y",0);h.attr("name",k.$jscomp$loop$prop$item$13.funcname).style("display",e.property("buttons_state")?"":"none").on("mouseenter",function(){return f(a,"enterbtn")}).on("mouseleave",function(){return f(a,"leavebtn")});k.$jscomp$loop$prop$item$13.keyname&&h.attr("key",k.$jscomp$loop$prop$item$13.keyname);h.on("click",function(b){return function(c){return a.clickPadButton(b.$jscomp$loop$prop$item$13.funcname,c)}}(k));d+=n(this,
1.25)}}b.property("nextx",d);this.alignButtons(b,this.getPadWidth(),this.getPadHeight());b.property("vertical")?e.attr("y",d):b.property("leftside")||e.attr("x",d)}},assign:function(a){a.alignButtons=this.alignButtons;a.findPadButton=this.findPadButton;a.removePadButtons=this.removePadButtons;a.showPadButtons=this.showPadButtons}}}});
