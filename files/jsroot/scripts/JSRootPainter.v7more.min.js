(function(d){if("function"===typeof define&&define.amd)define(["JSRootPainter","d3"],d);else if("object"===typeof exports&&"undefined"!==typeof module)d(require("./JSRootCore.js"),require("d3"));else{if("object"!=typeof d3)throw Error("This extension requires d3.js","JSRootPainter.v7hist.js");if("undefined"==typeof JSROOT)throw Error("JSROOT is not defined","JSRootPainter.v7hist.js");if("object"!=typeof JSROOT.Painter)throw Error("JSROOT.Painter not defined","JSRootPainter.v7hist.js");d(JSROOT,d3)}})(function(d,
t){function q(){var a=this.GetObject();this.v7EvalAttr("legend_text_size",20);var b=-1*this.v7EvalAttr("legend_text_angle",0),h=this.v7EvalAttr("legend_text_align",12),k=this.v7EvalColor("legend_text_color","black"),f=this.v7EvalAttr("legend_text_font",41),g=this.pave_width,c=this.pave_height,e=a.fEntries.length,p=this.pad_painter();a.fTitle&&e++;if(e&&p){var l=c/e,m=0,n=.02*g;this.StartTextDrawing(f,c/(1.2*e));a.fTitle&&(this.DrawText({align:22,rotate:b,color:k,latex:1,width:g-2*n,height:l,x:n,y:m,
text:a.fTitle}),m+=l);for(f=0;f<a.fEntries.length;++f)c=null,e=a.fEntries[f],this.DrawText({align:h,rotate:b,color:k,latex:1,width:.75*g-3*n,height:l,x:2*n+.25*g,y:m,text:e.fLabel}),"custom"!=e.fDrawableId?c=p.FindSnap(e.fDrawableId,!0):e.fDrawable.fIO&&(c=new d.TObjectPainter(e.fDrawable.fIO),e.fLine&&c.createv7AttLine(),e.fFill&&c.createv7AttFill(),e.fMarker&&c.createv7AttMarker()),c&&e.fFill&&c.fillatt&&this.draw_g.append("svg:rect").attr("x",Math.round(n)).attr("y",Math.round(m+.1*l)).attr("width",
Math.round(g/4)).attr("height",Math.round(.8*l)).call(c.fillatt.func),c&&e.fLine&&c.lineatt&&this.draw_g.append("svg:line").attr("x1",Math.round(n)).attr("y1",Math.round(m+l/2)).attr("x2",Math.round(n+g/4)).attr("y2",Math.round(m+l/2)).call(c.lineatt.func),c&&e.fMarker&&c.markeratt&&this.draw_g.append("svg:path").attr("d",c.markeratt.create(n+g/8,m+l/2)).call(c.markeratt.func),m+=l;this.FinishTextDrawing()}}function r(){var a=this.GetObject();this.v7EvalAttr("pavetext_text_size",20);var b=-1*this.v7EvalAttr("pavetext_text_angle",
0),d=this.v7EvalAttr("pavetext_text_align",12),k=this.v7EvalColor("pavetext_text_color","black"),f=this.v7EvalAttr("pavetext_text_font",41),g=this.pave_width,c=this.pave_height,e=a.fText.length;if(e){var p=c/e,l=0,m=.02*g;this.StartTextDrawing(f,c/(1.2*e));for(f=0;f<a.fText.length;++f)this.DrawText({align:d,rotate:b,color:k,latex:1,width:g-2*m,height:p,x:m,y:l,text:a.fText[f]}),l+=p;this.FinishTextDrawing()}}d.sources.push("v7more");d.v7.drawText=function(){var a=this.GetObject(),b=this.pad_painter().GetCoordinate(a.fPos),
d=this.v7EvalAttr("text_size",12),k=-1*this.v7EvalAttr("text_angle",0),f=this.v7EvalAttr("text_align",22),g=this.v7EvalColor("text_color","black"),c=this.v7EvalAttr("text_font",41);this.CreateG(!1);a={align:f,x:b.x,y:b.y,text:a.fText,rotate:k,color:g,latex:1};this.StartTextDrawing(c,d);this.DrawText(a);this.FinishTextDrawing()};d.v7.drawLine=function(){var a=this.GetObject(),b=this.pad_painter(),h=b.GetCoordinate(a.fP1);a=b.GetCoordinate(a.fP2);b=this.v7EvalAttr("line_width",1);var k=this.v7EvalAttr("line_style",
1),f=this.v7EvalColor("line_color","black");this.CreateG();this.draw_g.append("svg:line").attr("x1",h.x).attr("y1",h.y).attr("x2",a.x).attr("y2",a.y).style("stroke",f).attr("stroke-width",b).style("stroke-dasharray",d.Painter.root_line_styles[k])};d.v7.drawBox=function(){var a=this.GetObject(),b=this.pad_painter(),h=b.GetCoordinate(a.fP1);a=b.GetCoordinate(a.fP2);b=this.v7EvalAttr("box_border_width",1);var k=this.v7EvalAttr("box_border_style",1),f=this.v7EvalColor("box_border_color","black"),g=this.v7EvalColor("box_fill_color",
"white"),c=this.v7EvalAttr("box_fill_style",1),e=this.v7EvalAttr("box_round_width",0),p=this.v7EvalAttr("box_round_height",0);this.CreateG();0==c&&(g="none");this.draw_g.append("svg:rect").attr("x",h.x).attr("width",a.x-h.x).attr("y",a.y).attr("height",h.y-a.y).attr("rx",e).attr("ry",p).style("stroke",f).attr("stroke-width",b).attr("fill",g).style("stroke-dasharray",d.Painter.root_line_styles[k])};d.v7.drawMarker=function(){var a=this.GetObject();a=this.pad_painter().GetCoordinate(a.fP);var b=this.v7EvalAttr("marker_size",
1),h=this.v7EvalAttr("marker_style",1),k=this.v7EvalColor("marker_color","black");b=new d.TAttMarkerHandler({style:h,color:k,size:b});a=b.create(a.x,a.y);this.CreateG();a&&this.draw_g.append("svg:path").attr("d",a).call(b.func)};d.v7.drawLegend=function(a,b,h){b=new d.v7.RPavePainter(b,h,"legend");b.SetDivId(a);b.DrawContent=q;b.DrawPave();return b.DrawingReady()};d.v7.drawPaveText=function(a,b,h){b=new d.v7.RPavePainter(b,h,"pavetext");b.SetDivId(a);b.DrawContent=r;b.DrawPave();return b.DrawingReady()};
return d});
